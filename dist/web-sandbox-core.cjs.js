"use strict";function e(e,t){const n=`please report internal shim error: ${e}`;throw console.error(n),t&&(console.error(`${t}`),console.error(`${t.stack}`)),n}function t(t,n){t||e(n)}function n(e){let t=`'use strict'; (${e})`;return t=t.replace(/\(0,\s*_[0-9a-fA-F]{3}\u200D\.e\)/g,"(0, eval)"),t=t.replace(/_[0-9a-fA-F]{3}\u200D\.g\./g,""),t=t.replace(/cov_[^+]+\+\+[;,]/g,""),t}function r(e,t){const{callAndWrapError:n}=e,{initRootRealm:r,initCompartment:o,getRealmGlobal:i,realmEvaluate:a}=t,{create:s,defineProperties:c}=Object;class Realm{constructor(){throw new TypeError("Realm is not a constructor")}static makeRootRealm(t={}){const o=s(Realm.prototype);return n(r,[e,o,t]),o}static makeCompartment(t={}){const r=s(Realm.prototype);return n(o,[e,r,t]),r}get global(){return n(i,[this])}evaluate(e,t,r={}){return n(a,[this,e,t,r])}}return c(Realm,{toString:{value:()=>"function Realm() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),c(Realm.prototype,{toString:{value:()=>"[object Realm]",writable:!1,enumerable:!1,configurable:!0}}),Realm}Object.defineProperty(exports,"__esModule",{value:!0});const o=n(r);const i=n((function(){const{getPrototypeOf:e}=Object,{apply:t}=Reflect,n=e=>(n,...r)=>t(e,n,r),r=n(Map.prototype.get),o=n(Set.prototype.has),i=new Map([["EvalError",EvalError],["RangeError",RangeError],["ReferenceError",ReferenceError],["SyntaxError",SyntaxError],["TypeError",TypeError],["URIError",URIError]]),a=new Set([EvalError.prototype,RangeError.prototype,ReferenceError.prototype,SyntaxError.prototype,TypeError.prototype,URIError.prototype,Error.prototype]);return function(n,s){try{return t(n,void 0,s)}catch(t){if(Object(t)!==t)throw t;if(o(a,e(t)))throw t;let n,s,c;try{n=`${t.name}`,s=`${t.message}`,c=`${t.stack||s}`}catch(e){throw new Error("unknown error")}const l=r(i,n)||Error;try{throw new l(s)}catch(e){throw e.stack=c,e}}}})),{assign:a,create:s,freeze:c,defineProperties:l,getOwnPropertyDescriptor:u,getOwnPropertyDescriptors:d,getOwnPropertyNames:p,getPrototypeOf:m,setPrototypeOf:f}=Object,{apply:h,ownKeys:b}=Reflect,y=e=>(t,...n)=>h(e,t,n),g=y(Object.prototype.hasOwnProperty),E=y(Array.prototype.filter),S=y(Array.prototype.pop),v=y(Array.prototype.join),w=y(Array.prototype.concat),C=y(RegExp.prototype.test),T=y(String.prototype.includes),N=["Infinity","NaN","undefined"],O=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Array","ArrayBuffer","Boolean","DataView","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Object","RangeError","ReferenceError","Set","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","JSON","Math","Reflect","escape","unescape"],A=["Date","Error","Promise","Proxy","RegExp","Intl"];function M(){const{defineProperty:e,defineProperties:t,getOwnPropertyDescriptor:n,getPrototypeOf:r,prototype:o}=Object;try{(0,o.__lookupGetter__)("x")}catch(e){return}function i(e){if(null==e)throw new TypeError("can't convert undefined or null to object");return Object(e)}function a(e){return"symbol"==typeof e?e:`${e}`}function s(e,t){if("function"!=typeof e)throw TypeError(`invalid ${t} usage`);return e}t(o,{__defineGetter__:{value:function(t,n){const r=i(this);e(r,t,{get:s(n,"getter"),enumerable:!0,configurable:!0})}},__defineSetter__:{value:function(t,n){const r=i(this);e(r,t,{set:s(n,"setter"),enumerable:!0,configurable:!0})}},__lookupGetter__:{value:function(e){let t,o=i(this);for(e=a(e);o&&!(t=n(o,e));)o=r(o);return t&&t.get}},__lookupSetter__:{value:function(e){let t,o=i(this);for(e=a(e);o&&!(t=n(o,e));)o=r(o);return t&&t.set}}})}function L(){const{defineProperties:e,getPrototypeOf:t,setPrototypeOf:n}=Object;function r(r,o){let i;try{i=(0,eval)(o)}catch(e){if(e instanceof SyntaxError)return;throw e}const a=t(i),s=function(){throw new TypeError("Not available")};e(s,{name:{value:r}}),e(a,{constructor:{value:s}}),e(s,{prototype:{value:a}}),s!==Function.prototype.constructor&&n(s,Function.prototype.constructor)}r("Function","(function(){})"),r("GeneratorFunction","(function*(){})"),r("AsyncFunction","(async function(){})"),r("AsyncGeneratorFunction","(async function*(){})")}const R=()=>{const e=function(){if("undefined"==typeof document)return;const e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e.contentWindow.eval("'use strict'; this")}(),t=function(){if(!new Function("try {return this===global}catch(e){return false}")())return;return require("vm").runInNewContext("(0, eval)(\"'use strict'; this\")")}();if(!e&&!t||e&&t)throw new Error("unexpected platform, unable to create Realm");return e||t};function P(e,n=[],r=!1){const o=function(e,n=!1){const r={};function o(n,o,i,a){for(const s of n){const n=u(e,s);n&&(t("value"in n,`unexpected accessor on global property: ${s}`),r[s]={value:n.value,writable:o,enumerable:i,configurable:a})}}return n?(o(N,!0,!1,!0),o(O,!0,!1,!0)):(o(N,!1,!1,!1),o(O,!1,!1,!1)),o(A,!0,!1,!0),r}(e,r),a=e.eval,s=e.Function,l=a(i)();return c({unsafeGlobal:e,sharedGlobalDescs:o,unsafeEval:a,unsafeFunction:s,callAndWrapError:l,allShims:n})}const D=n(M),x=n(L);const I=/^[a-zA-Z_$][\w$]*$/,j=new Set(["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"]);function k(e,t={}){const n=p(e);return E(n,(n=>{if(n in t)return!1;if("eval"===n||j.has(n)||!C(I,n))return!1;const r=u(e,n);return!1===r.configurable&&!1===r.writable&&g(r,"value")}))}const H=n((function(e,t,n={},r=!1){const{unsafeGlobal:o,unsafeEval:i}=e,{freeze:a,getOwnPropertyDescriptor:s}=Object,{get:c,set:l}=Reflect;return{__proto__:new Proxy(a({}),{get(e,t){throw new TypeError(`unexpected scope handler trap called: ${String(t)}`)}}),useUnsafeEvaluator:!1,get(e,r){if("symbol"!=typeof r)return"eval"===r&&!0===this.useUnsafeEvaluator?(this.useUnsafeEvaluator=!1,i):r in n?c(n,r,t):c(t,r)},set(e,r,o){if(r in n){return"value"in s(n,r)?l(n,r,o):l(n,r,o,t)}return l(t,r,o)},has:(e,i)=>!!r||("eval"===i||i in n||i in t||i in o),getPrototypeOf:()=>null}}));const V=n((function(e,t){const{callAndWrapError:n}=e,{defineProperties:r}=Object,o={eval(){return n(t,arguments)}}.eval;return r(o,{toString:{value:()=>"function eval() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),o}));const U=n((function(e,t){const{callAndWrapError:n,unsafeFunction:r}=e,{defineProperties:o}=Object,i=function(){return n(t,arguments)};return o(i,{prototype:{value:r.prototype},toString:{value:()=>"function Function() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),i}));const F=n((function(e,t){const{create:n,getOwnPropertyDescriptors:r}=Object,{apply:o}=Reflect;var i;return e={src:`${(e=(i=Array.prototype.reduce,(e,...t)=>o(i,e,t))(t,((e,t)=>t.rewrite?t.rewrite(e):e),e={src:`${e.src}`,endowments:n(null,r(e.endowments))})).src}`,endowments:n(null,r(e.endowments))}})),_=new RegExp("(?:\x3c!--|--\x3e)");const $=/\bimport\s*(?:\(|\/[/*])/;const W=/\beval\s*(?:\(|\/[/*])/;function B(e){!function(e){const t=e.search(_);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible html comment syntax rejected around line ${n}`)}}(e),function(e){const t=e.search($);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible import expression rejected around line ${n}`)}}(e),function(e){const t=e.search(W);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible direct eval expression rejected around line ${n}`)}}(e)}const z={rewrite:e=>(B(e.src),e)};function G(e,t){const{unsafeFunction:n}=e;return n(`\n    with (arguments[0]) {\n      ${function(e){return 0===e.length?"":`const {${v(e,",")}} = this;`}(t)}\n      return function() {\n        'use strict';\n        return eval(arguments[0]);\n      };\n    }\n  `)}const q=new WeakMap;function K(e){return t(Object(e)===e,"bad object, not a Realm instance"),t(q.has(e),"Realm instance has no record"),q.get(e)}function X(e,n){t(Object(e)===e,"bad object, not a Realm instance"),t(!q.has(e),"Realm instance already has a record"),q.set(e,n)}function Y(n,r,o){const{sharedGlobalDescs:i,unsafeGlobal:a}=n,u=s(a.Object.prototype,i),d=function(t,n,r,o){const{unsafeEval:i}=t,a=i(F);return function(s={},c={}){const l=c.transforms||[],u=w(l,r||[],[z]);return function(r){let c={src:r,endowments:s};c=a(c,u);const l=k(n,c.endowments),d=k(c.endowments),p=w(l,d),m=G(t,p),f=i(H)(t,n,c.endowments,o),b=Proxy.revocable({},f),y=b.proxy,g=h(m,n,[y]);let E;f.useUnsafeEvaluator=!0;try{return h(g,n,[c.src])}catch(e){throw E=e,e}finally{f.useUnsafeEvaluator&&(b.revoke(),e("handler did not revoke useUnsafeEvaluator",E))}}}}(n,u,r,o),p=d(),f=function(e,n){const{unsafeEval:r,unsafeFunction:o}=e,i=r(V)(e,n);return t(m(i).constructor!==Function,"hide Function"),t(m(i).constructor!==o,"hide unsafeFunction"),i}(n,p),b=function(e,n){const{unsafeGlobal:r,unsafeEval:o,unsafeFunction:i}=e,a=o(U)(e,(function(...e){const t=`${S(e)||""}`;let o=`${v(e,",")}`;if(!C(/^[\w\s,]*$/,o))throw new SyntaxError("shim limitation: Function arg must be simple ASCII identifiers, possibly separated by commas: no default values, pattern matches, or non-ASCII parameter names");if(new i(t),T(o,")"))throw new r.SyntaxError("shim limitation: Function arg string contains parenthesis");return o.length>0&&(o+="\n/*``*/"),n(`(function(${o}){\n${t}\n})`)}));return t(m(a).constructor!==Function,"hide Function"),t(m(a).constructor!==i,"hide unsafeFunction"),a}(n,p),y=function(e){return(t,n,r={})=>e(n,r)(t)}(d);!function(e,t,n){l(e,{eval:{value:t,writable:!0,configurable:!0},Function:{value:n,writable:!0,configurable:!0}})}(u,f,b);return c({safeGlobal:u,safeEval:f,safeEvalWhichTakesEndowments:y,safeFunction:b})}const Q={initRootRealm:function(e,t,n){const{shims:r,transforms:i,sloppyGlobals:a,configurableGlobals:s}=n,c=w(e.allShims,r),l=function(e,t=!1){const n=P(R(),e,t),{unsafeEval:r}=n;return r(D)(),r(x)(),n}(c,s),{unsafeEval:u}=l,d=u(o)(l,Q);l.sharedGlobalDescs.Realm={value:d,writable:!0,configurable:!0};const p=Y(l,i,a),{safeEvalWhichTakesEndowments:m}=p;for(const e of c)m(e);X(t,p)},initCompartment:function(e,t,n={}){const{transforms:r,sloppyGlobals:o}=n;X(t,Y(e,r,o))},getRealmGlobal:function(e){const{safeGlobal:t}=K(e);return t},realmEvaluate:function(e,t,n={},r={}){const{safeEvalWhichTakesEndowments:o}=K(e);return o(t,n,r)}},J=r(function(){const e=(0,eval)("'use strict'; this");return M(),L(),P(e)}(),Q);function Z({rootRealm:e,compartment:t}){const{seal:n}=Object,{defineProperty:r,getOwnPropertyDescriptor:o,ownKeys:i}=Reflect,a=(e,t)=>{const n=o(e,t);if(n&&n.configurable){if(n.hasOwnProperty("value")){const o=n.value;delete n.value,delete n.writable,n.get=()=>o,n.set=function(n){if(this===e)throw TypeError(`Cannot assign to read only property '${t}' of object '#<${e}>'`);r(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}}n.configurable=!1,r(e,t,n)}};delete t.global.Realm,i(e.global).map((t=>e.global[t])).filter((e=>e&&"object"==typeof e||"function"==typeof e)).forEach((e=>{i(e).forEach((t=>{a(e,t)})),n(e),e.prototype&&(i(e.prototype).forEach((t=>{a(e.prototype,t)})),n(e.prototype))}))}let ee;function te(){if(!ee){ee=J.makeRootRealm();const e=window.document.body.lastChild;if("IFRAME"===e.nodeName&&e.contentWindow&&ee.global instanceof e.contentWindow.Object){const t=e.contentDocument;t.removeChild(t.documentElement),Object.defineProperties(e,{contentWindow:{},contentDocument:{}})}}const e=ee.global.Realm.makeCompartment(),t=e.evaluate;return e.evaluate=function(e,...n){return e=e.replace(/\.import\(/g,"['import']("),t.call(this,e,...n)},ee.evaluate(`(${Z.toString()})`)({rootRealm:ee,compartment:e}),e}function ne(e){return e.split(";").reduce(((e,t)=>{const[n,...r]=t.trim().split(/\s+/g);return n&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=r.includes("'none'")?[]:r),e}),{})}class Injector{constructor(){this.dependencies=new Map}register(e,t){this.dependencies.set(e,t)}fallback(e){throw new Error(`Injector: Can't resolve ${e}`)}resolve(e,t=null){const n=this,r=new Proxy(Object.create(null),{get(e,t){if("string"==typeof t)return n.dependencies.has(t)?n.dependencies.get(t):n.fallback(t)}});return function(){return e.apply(t,[r,...arguments])}}}const re=e=>{if("string"==typeof e&&["","module","application/javascript","application/ecmascript","text/javascript","text/ecmascript"].includes(e.trim().toLowerCase()))return!0;let t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE;if(t||(t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE=new Map),t.has(e))return t.get(e);t.set(e,!1);const n=document.createElement("script");n.setAttribute("type",e),n.textContent=`WEBSANDBOX_PREVENT_SCRIPT_TYPE.set(${JSON.stringify(e)}, true)`,document.head.appendChild(n);const r=t.get(e);return document.head.removeChild(n),r};function oe({bindObject:e,callAndWrapError:t,currentNativeObject:n,evaluate:r,global:o,parent:i,symbols:{initializedCallback:a},toNativeAny:s,toVirtualAny:c,langUtils:{setPrototypeOf:l,defineProperties:u,from:d,getOwnPropertyDescriptor:p,isObject:m,ownKeys:f,construct:h,create:b}}){const y=r(((e,t,n,r,o,i,a,s,c,l,u,d,p,m,f,h,b,y,g)=>{const E=d.name,S=s(f,l),v=S&&S.value;function w(){const r=()=>{let t=this,r=o.get();if(r)e(t,r),g&&n(g,arguments,w);else{const o=a(arguments).map((e=>b(e)));if(void 0===new.target){const e=this?this===c||this.window===c?m:b(this):void 0;return r=d.apply(e,o),y(r)}r=n(d,o),u(r)&&e(t,r)}return v&&(o.set(r),t=v.call(t,...arguments)),t};return t(r)}if(d.prototype){const e={constructor:{configurable:!0,value:w,writable:!0},[Symbol.toStringTag]:{configurable:!0,value:d.prototype&&d.prototype[Symbol.toStringTag]||E},...p(f).reduce(((e,t)=>{const n=s(f,t);return e[t]=n,e}),{})};g?(h(w,g),w.prototype=r(g.prototype,e)):i(w.prototype,e),i(w,{prototype:{configurable:!1,enumerable:!1,writable:!1}})}else w.prototype=void 0;return i(w,{name:{value:E,configurable:!0}}),w}));return function(r,g={},E){return y(e,t,h,b,n,u,d,p,o,a,m,r,f,i,g,l,s,c,E)}}function ie({langUtils:{defineProperty:e},nativeCache:t,toNativeAny:n,toVirtualAny:r}){const o=t=>{function o(...e){const o=r(this),i=e.map((e=>r(e))),a=Reflect.apply(t,o,i);return n(a)}return e(o,"name",{value:t.name,configurable:!0}),o};return function(e){if(t.has(e))return t.get(e);const n=o(e);return t.set(e,n),n}}oe.cacheResult=!0,ie.cacheResult=!0;var ae=Object.freeze({__proto__:null,CSSStyleSheet:function({documentView:e,toNativeObject:t}){return{insertRule(n,r){const o=t(this);return n.includes(":host")&&e.contains(o.ownerNode)||o.insertRule(n,r),r},addRule(n,r,o){const i=t(this);return n.includes(":host")&&e.contains(i.ownerNode)||i.addRule(n,r,o),-1}}},CustomElementRegistry:function({bindObject:e,currentNativeObject:t,customElements:n,global:r,langUtils:{create:o,construct:i,setPrototypeOf:a,inherits:s,isArray:c},symbols:{elementDefined:l},toNativeObject:u}){const d=new Map;return{define(e,t,o={}){if(n.has(e))throw new TypeError(`customElements: The "${e}" has been registered`);if(!e.includes("-"))throw new TypeError("Illegal constructor");const i=t.observedAttributes;if(n.set(e,{constructor:t,observedAttributes:c(i)?[...i]:[],options:o}),d.has(e)){let t;for(;t=d.get(e).shift();)t()}r.document.querySelectorAll(o.extends?`${o.extends}[is="${e}"]`:e).forEach((e=>{this.upgrade(e)}))},get(e){const t=n.get(e);return t?t.constructor:void 0},upgrade(r){const c=r.getAttribute("is")||r.localName,d=n.get(c);if(!d||r instanceof d.constructor)return;const p=u(r);t.set(p);const m=i(d.constructor,[]);if(t.set(null),a(r,s(m,o(d.constructor.prototype))),p.setAttribute(l,""),e(r,p),d.observedAttributes.length&&r.attributeChangedCallback)for(const e of d.observedAttributes){const t=r.getAttribute(e);t&&r.attributeChangedCallback(e,null,t)}p.isConnected&&r.connectedCallback&&r.connectedCallback()},whenDefined:e=>n.get(e)?Promise.resolve():new Promise((t=>{d.has(e)||d.set(e,[]),d.get(e).push(t)}))}},Document:function({currentScript:e,global:t,toNativeObject:n,langUtils:{defineProperty:r,from:o,keys:i},parent:a,SandboxSecurityError:s,sanitizer:c,toNativeAny:l,toVirtualAny:u}){const d=new WeakMap,p=a.document,m=e=>function(){const t=o(arguments).map((e=>l(e))),n=p[e](...t),r=u(n);return r},f=e=>function(...n){const r={createElement:{name:n[0],options:n[1]},createElementNS:{ns:n[0],name:n[1],options:n[2]}}[e];if(!c.isValidElement(r.name))throw new s(`Forbidden: tag <${r.name} />`);const o=p[e](...n);if(r.options){if(!c.isValidElement(r.options.is))throw new s(`Forbidden: tag <${r.name} is="${r.options.is}" />`);o.setAttribute("is",r.options.is)}const i=u(o);return t.customElements.upgrade(i),i},h={adoptNode:m("adoptNode"),get adoptedStyleSheets(){const e=n(this);return u(e.adoptedStyleSheets)},set adoptedStyleSheets(e){const t=n(this),r=l(e).map((e=>l(e)));t.adoptedStyleSheets=r},get body(){return this.querySelector("body")},get characterSet(){return p.characterSet},get contentType(){return p.contentType},createAttribute:m("createAttribute"),createAttributeNS:m("createAttributeNS"),createCDATASection:m("createCDATASection"),createComment:m("createComment"),createDocumentFragment:m("createDocumentFragment"),createElement:f("createElement"),createElementNS:f("createElementNS"),createEvent:m("createEvent"),createNodeIterator:m("createNodeIterator"),createProcessingInstruction:m("createProcessingInstruction"),createTextNode:m("createTextNode"),createTreeWalker:m("createTreeWalker"),get currentScript(){return e.get()},get defaultView(){return t},get documentElement(){return this.querySelector("html")},get documentURI(){return p.documentURI},get domain(){return p.domain},getElementsByTagName(e){return this.querySelectorAll(e)},get head(){return this.querySelector("head")},get hidden(){return p.hidden},importNode:m("importNode"),get readyState(){return p.readyState},get title(){return this.querySelector("title").textContent},set title(e){this.querySelector("title").textContent=e},get URL(){return p.URL},get visibilityState(){return p.visibilityState}};return i(a.Document.prototype).filter((e=>/^on[\w\W]+$/.test(e))).forEach((e=>{r(h,e,{enumerable:!0,configurable:!0,get(){const t=d.get(this);return t&&t[e]||null},set(t){const n=e.replace("on",""),r=this[e];d.has(this)||d.set(this,{}),r&&this.removeEventListener(n,r),this.addEventListener(n,t),d.get(this)[e]=t}})})),h},Element:function({customElements:e,events:t,langUtils:{from:n},symbols:{prefix:r},SandboxSecurityError:o,sanitizer:i,toNativeAny:a,toNativeObject:s,toVirtualAny:c,toVirtualNodeCreater:l,toVirtualObject:u,windowView:d}){const p=(e,t)=>s(e)[t],m=(t,l)=>function(){const[u,d]=l(arguments),p=n(arguments).map((e=>a(e))),m=s(this),f=m.getAttribute(u),h=m.nodeName;if(!i.isValidAttribute(h,u,String(d))||0===u.indexOf(r)||0===String(d).indexOf(r)||f&&0===f.indexOf(r))throw new o(`Forbidden: attribute [${u}=${JSON.stringify(d)}]`);const b=m[t](...p),y=m.getAttribute("is")||m.localName,g=m.getAttribute(u);return e.get(y)&&e.get(y).observedAttributes.includes(u)&&this.attributeChangedCallback&&(null!==f||null!==g)&&this.attributeChangedCallback(u,f,g),c(b)},f=e=>{const t=d.getBoundingClientRect();return e.x-=t.x,e.y-=t.y,e},h=(e,n)=>{t.dispatch("mutation",{newNodes:e,oldNodes:n})};return{get className(){return p(this,"className")},set className(e){this.setAttribute("class",e)},set innerHTML(e){const t=s(this),r=t.isConnected,o=i.sanitize(e),a=n(t.childNodes),c=n(o.childNodes);for(;t.firstChild;)t.removeChild(t.firstChild);"template"===t.nodeName.toLowerCase()?t.content.appendChild(o):t.appendChild(o),r&&h(c,a)},get innerHTML(){return p(this,"innerHTML")},set outerHTML(e){const t=s(this),r=t.isConnected,o=i.sanitize(e),a=[t],c=n(o.childNodes);t.parentNode.replaceChild(o,t),r&&h(c,a)},get outerHTML(){return p(this,"outerHTML")},insertAdjacentHTML(e,t){const r=s(this),o=r.isConnected,a=i.sanitize(t),c=n(a.childNodes);switch(e.toLowerCase()){case"beforebegin":r.parentNode.insertBefore(a,r);break;case"afterbegin":r.insertBefore(a,r.firstChild);break;case"beforeend":r.appendChild(a);break;case"afterend":r.parentNode.insertBefore(a,r.nextElementSibling);break;default:throw new TypeError(`invalid parameter '${e}'`)}o&&h(c,[])},insertAdjacentElement:l("insertAdjacentElement",(e=>[e[1]]),(e=>e[1].isConnected?[e[1]]:[])),before:l("before",(e=>e),(e=>e.filter((e=>e.isConnected)))),append:l("append",(e=>e),(e=>e.filter((e=>e.isConnected)))),after:l("after",(e=>e),(e=>e.filter((e=>e.isConnected)))),remove:l("remove",(()=>[]),((e,t)=>t.isConnected?[t]:[])),getBoundingClientRect(){const e=s(this).getBoundingClientRect();return u(f(e))},getClientRects(){const e=s(this).getClientRects();for(let t=0;t<e.length;t++)f(e[t]);return u(e)},removeAttribute:m("removeAttribute",(e=>[e[0],""])),removeAttributeNS:m("removeAttributeNS",(e=>[e[1],""])),removeAttributeNode:m("removeAttributeNode",(e=>[e[0].name,""])),setAttribute:m("setAttribute",(e=>e)),setAttributeNS:m("setAttributeNS",(e=>[e[1],e[2]])),setAttributeNode:m("setAttributeNode",(e=>[e[0].name,e[0].value])),setAttributeNodeNS:m("setAttributeNodeNS",(e=>[e[0].name,e[0].value])),toggleAttribute:m("toggleAttribute",(e=>[e[0],""]))}},Event:function({documentView:e,global:t,parent:n,toNativeObject:r,toVirtualObject:o}){return{composedPath(){return r(this).composedPath().filter((t=>t===n||t instanceof n.Node&&e.contains(t))).map((e=>e===n?t:o(e)))}}},FocusEvent:function({global:e,toNativeObject:t,toVirtualAny:n}){return{get relatedTarget(){const r=t(this).relatedTarget;return r instanceof e.Object?n(r):null}}},HTMLLinkElement:function({cspValidation:e,cssStyleSheetFilter:t,global:n,parent:r,symbols:{attributeChangedCallback:o,connectedCallback:i,disabled:a,observedAttributes:s,statics:c},toNativeObject:l}){function u(o){if(!o.isConnected||"stylesheet"!==o.rel||!o.href)return;const i=l(o);function s(){!function(){try{return!!i.sheet.cssRules}catch(e){return!1}}()?(i.setAttribute("type",a),o.dispatchEvent(new n.Event("error")),r.console.error(`Access to stylesheet at '${i.href}' from origin '${n.location.origin}' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.`)):(t(i.sheet),o.dispatchEvent(new n.Event("load")))}e("style-src",i.href,"warn")||i.setAttribute("type",a),i.addEventListener("load",s),i.addEventListener("error",s)}return{[i](){u(this)},[o](){u(this)},[c]:{get[s](){return["href"]}}}},HTMLScriptElement:function({browserUtils:{scriptSourceLoader:e,queueMicrotask:t},cspValidation:n,currentNativeObject:r,currentScript:o,evaluate:i,global:a,langUtils:{isNull:s},parent:c,SandboxSecurityError:l,sanitizer:u,symbols:{attributeChangedCallback:d,connectedCallback:p,initializedCallback:m,observedAttributes:f,scriptType:h,statics:b},toNativeObject:y}){const g=c.URL,E=h;function S(e,n=null,r={}){o.set(n);try{i(e,r)}catch(e){t((()=>{throw e}))}o.set(null)}function v(t){if(!t.isConnected)return;y(t).getAttribute("type")===E&&(t.src?n("script-src",t.src,"warn")&&e(t.src).then((e=>{S(e,t),t.dispatchEvent(new a.Event("load"))}),(()=>{t.dispatchEvent(new a.Event("error"))})):t.textContent&&S(t.textContent,t))}return{[m](){return r.get().setAttribute("type",E),this},get src(){const e=y(this).getAttribute("src");return s(e)?"":new g(e,this.baseURI).href},set src(e){const t=y(this);!function(e,t,n){if(!u.isValidAttribute(e.nodeName,t,n))throw new l(`Forbidden: attribute [${t}=${JSON.stringify(n)}]`)}(t,"src",e),t.setAttribute("src",e)},get type(){const e=y(this).getAttribute("type");return s(e)?"":e},set type(e){y(this).setAttribute("type",e)},[p](){v(this)},[d](){v(this)},[b]:{get[f](){return["src"]}}}},HTMLStyleElement:function({toNativeObject:e,symbols:{connectedCallback:t},cssStyleSheetFilter:n}){return{[t](){const t=e(this).sheet;n(t)}}},MouseEvent:function({parent:e,toNativeObject:t,windowView:n}){const r=t=>t.view!==e;return{get clientX(){const e=t(this);if(!r(e)){const t=n.getBoundingClientRect();return e.clientX-t.x}return e.clientX},get clientY(){const e=t(this);if(!r(e)){const t=n.getBoundingClientRect();return e.clientY-t.y}return e.clientY},get x(){return this.clientX},get y(){return this.clientY},get pageX(){return n.scrollLeft+this.clientX},get pageY(){return n.scrollTop+this.clientY}}},Node:function({global:e,parent:t,toNativeObject:n,toVirtualNodeCreater:r}){const o=t.document;return{get ownerDocument(){const t=e.document;return t===this?null:t},get nodeName(){return(e.document===this?o:n(this)).nodeName},get nodeType(){return(e.document===this?o:n(this)).nodeType},appendChild:r("appendChild",(e=>[e[0]]),(e=>e[0].isConnected?[e[0]]:[])),insertBefore:r("insertBefore",(e=>[e[0]]),(e=>e[0].isConnected?[e[0]]:[])),replaceChild:r("replaceChild",(e=>[e[0]]),(e=>[e[1]])),removeChild:r("removeChild",(()=>[]),(e=>[e[0]]))}},ShadowRoot:function({events:e,langUtils:{from:t},sanitizer:n,toNativeAny:r,toNativeObject:o,toVirtualAny:i}){return{get adoptedStyleSheets(){const e=o(this);return i(e.adoptedStyleSheets)},set adoptedStyleSheets(e){const t=o(this),n=r(e).map((e=>r(e)));t.adoptedStyleSheets=n},get innerHTML(){return o(this).innerHTML},set innerHTML(r){const i=o(this),a=n.sanitize(r),s=i.isConnected,c=t(i.childNodes),l=t(a.childNodes);for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(a),s&&e.dispatch("mutation",{newNodes:l,oldNodes:c})}}},Storage:function({currentNativeObject:e,id:t,langUtils:{inherits:n,isString:r,keys:o},symbols:{prefix:i,initializedCallback:a},toNativeObject:s,toVirtualObject:c}){const l=`${i}${t}.`,u=e=>o(e).filter((e=>0===e.indexOf(l)));return{[a](){return n(this,new Proxy(e.get(),{get(e,t){const n=c(e);return r(t)?n.getItem(t):void 0},set(e,t,n){const o=c(e);return!!r(t)&&(o.setItem(t,n),!0)},deleteProperty(e,t){const n=c(e);return!!r(t)&&(n.removeItem(t),!0)}}))},get length(){return u(s(this)).length},key(e){return u(s(this)).map((e=>e.replace(l,"")))[e]},getItem(e){return s(this).getItem(`${l}${e}`)},setItem(e,t){return s(this).setItem(`${l}${e}`,t)},removeItem(e){return s(this).removeItem(`${l}${e}`)},clear(){const e=s(this);u(e).forEach((t=>e.removeItem(t)))}}},Touch:function({toNativeObject:e,windowView:t}){return{get clientX(){const n=e(this),r=t.getBoundingClientRect();return n.clientX-r.x},get clientY(){const n=e(this),r=t.getBoundingClientRect();return n.clientY-r.y},get pageX(){return t.scrollLeft+this.clientX},get pageY(){return t.scrollTop+this.clientY}}}});const se=(e,t=/^(on)[\w]+/)=>Object.keys("string"==typeof e?window[e].prototype:e).filter((e=>t.test(e)));var ce,le={allowInterfaces:{AggregateError:"*",AnalyserNode:"*",Animation:"*",AnimationEffect:"*",AnimationEvent:"*",AnimationPlaybackEvent:"*",AnimationTimeline:"*",atob:"*",Attr:"*",Audio:"*",AudioBuffer:"*",AudioBufferSourceNode:"*",AudioContext:"*",AudioDestinationNode:"*",AudioListener:"*",AudioNode:"*",AudioParam:"*",AudioParamMap:"*",AudioProcessingEvent:"*",AudioScheduledSourceNode:"*",BaseAudioContext:"*",BeforeUnloadEvent:"*",Blob:"*",BlobEvent:"*",blur:"*",btoa:"*",ByteLengthQueuingStrategy:"*",cancelAnimationFrame:"*",CanvasCaptureMediaStreamTrack:"*",CanvasGradient:"*",CanvasPattern:"*",CanvasRenderingContext2D:"*",CDATASection:"*",ChannelMergerNode:"*",ChannelSplitterNode:"*",CharacterData:"*",clearInterval:"*",clearTimeout:"*",Clipboard:"*",ClipboardEvent:"*",ClipboardItem:"*",close:"*",closed:"*",Comment:"*",CompositionEvent:"*",CompressionStream:"*",console:"*",ConstantSourceNode:"*",ConvolverNode:"*",CountQueuingStrategy:"*",createImageBitmap:"*",CSS:"*",CSS2Properties:"*",CSSAnimation:"*",CSSConditionRule:"*",CSSFontFaceRule:"*",CSSGroupingRule:"*",CSSImageValue:"*",CSSImportRule:"*",CSSKeyframeRule:"*",CSSKeyframesRule:"*",CSSKeywordValue:"*",CSSMathInvert:"*",CSSMathMax:"*",CSSMathMin:"*",CSSMathNegate:"*",CSSMathProduct:"*",CSSMathSum:"*",CSSMathValue:"*",CSSMatrixComponent:"*",CSSMediaRule:"*",CSSNamespaceRule:"*",CSSNumericArray:"*",CSSNumericValue:"*",CSSPageRule:"*",CSSPerspective:"*",CSSPositionValue:"*",CSSPropertyRule:"*",CSSRotate:"*",CSSRule:"*",CSSRuleList:"*",CSSScale:"*",CSSSkew:"*",CSSSkewX:"*",CSSSkewY:"*",CSSStyleDeclaration:"*",CSSStyleRule:"*",CSSStyleSheet:"*",CSSStyleValue:"*",CSSSupportsRule:"*",CSSTransformComponent:"*",CSSTransformValue:"*",CSSTransition:"*",CSSTranslate:"*",CSSUnitValue:"*",CSSUnparsedValue:"*",CSSVariableReferenceValue:"*",CustomElementRegistry:"*",customElements:"*",CustomEvent:"*",DataTransfer:"*",DataTransferItem:"*",DataTransferItemList:"*",DelayNode:"*",DeviceMotionEvent:"*",DeviceMotionEventAcceleration:"*",DeviceMotionEventRotationRate:"*",DeviceOrientationEvent:"*",devicePixelRatio:"*",Document:["activeElement","adoptedStyleSheets","adoptNode","body","characterSet","childElementCount","children","contentType","createAttribute","createAttributeNS","createCDATASection","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createNodeIterator","createProcessingInstruction","createTextNode","createTreeWalker","currentScript","defaultView","documentElement","documentURI","domain","firstElementChild","getAnimations","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","head","hidden","importNode","lastElementChild",...se("Document"),"querySelector","querySelectorAll","readyState","styleSheets","title","URL","visibilityState"],DocumentFragment:["append","childElementCount","children","firstElementChild","getElementById","lastElementChild","prepend","querySelector","querySelectorAll","replaceChildren"],DocumentTimeline:"*",DOMError:"*",DOMException:"*",DOMMatrix:"*",DOMMatrixReadOnly:"*",DOMPoint:"*",DOMPointReadOnly:"*",DOMQuad:"*",DOMRect:"*",DOMRectList:"*",DOMRectReadOnly:"*",DOMStringList:"*",DOMStringMap:"*",DOMTokenList:"*",DragEvent:"*",DynamicsCompressorNode:"*",Element:["after","animate","append","attachShadow","attributes","attributeStyleMap","before","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","computedStyleMap","firstElementChild","getAnimations","getAttribute","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","hasAttribute","hasAttributeNS","hasAttributes","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","namespaceURI","nextElementSibling","outerHTML","part","prefix","previousElementSibling","querySelector","querySelectorAll","remove","removeAttribute","removeAttributeNode","removeAttributeNS","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNode","setAttributeNodeNS","setAttributeNS","shadowRoot","tagName","toggleAttribute",...se("Element",/^(aria|on)[\w]+/)],ElementInternals:"*",ErrorEvent:"*",Event:["bubbles","cancelable","currentTarget","defaultPrevented","eventPhase","initEvent","preventDefault","stopImmediatePropagation","stopPropagation","target","timeStamp","type"],EventTarget:["addEventListener","dispatchEvent","removeEventListener"],fetch:"*",focus:"*",FocusEvent:"*",FontFace:"*",FontFaceSetLoadEvent:"*",GainNode:"*",getComputedStyle:"*",HashChangeEvent:"*",HTMLAllCollection:"*",HTMLAnchorElement:"*",HTMLAreaElement:"*",HTMLAudioElement:"*",HTMLQuoteElement:"*",HTMLBodyElement:se("HTMLBodyElement"),HTMLBRElement:"*",HTMLButtonElement:"*",HTMLCanvasElement:"*",HTMLCollection:"*",HTMLTableCaptionElement:"*",HTMLTableColElement:"*",HTMLDataElement:"*",HTMLDataListElement:"*",HTMLDocument:"*",HTMLElement:["accessKey","autofocus","blur","click","dataset","dir","draggable","focus","hidden","innerText","lang","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth",...se("HTMLElement"),"spellcheck","style","tabIndex","title"],HTMLModElement:"*",HTMLDetailsElement:"*",HTMLDialogElement:["close","open","returnValue","show"],HTMLDivElement:"*",HTMLDListElement:"*",HTMLFieldSetElement:"*",HTMLFormElement:"*",HTMLHeadingElement:"*",HTMLHeadElement:"*",HTMLHRElement:"*",HTMLHtmlElement:"*",HTMLImageElement:"*",HTMLInputElement:"*",HTMLLabelElement:"*",HTMLLegendElement:"*",HTMLLIElement:"*",HTMLLinkElement:"*",HTMLMapElement:"*",HTMLMediaElement:"*",HTMLMeterElement:"*",HTMLMenuElement:"*",HTMLOListElement:"*",HTMLOptGroupElement:"*",HTMLOptionElement:"*",HTMLOptionsCollection:"*",HTMLOutputElement:"*",HTMLParagraphElement:"*",HTMLPictureElement:"*",HTMLPreElement:"*",HTMLProgressElement:"*",HTMLScriptElement:"*",HTMLSelectElement:"*",HTMLSlotElement:["name"],HTMLSourceElement:"*",HTMLSpanElement:"*",HTMLStyleElement:"*",HTMLTableElement:"*",HTMLTableSectionElement:"*",HTMLTableCellElement:"*",HTMLTemplateElement:"*",HTMLTextAreaElement:"*",HTMLTimeElement:"*",HTMLTitleElement:"*",HTMLTableRowElement:"*",HTMLTrackElement:"*",HTMLUListElement:"*",HTMLUnknownElement:"*",HTMLVideoElement:"*",WebWidgetPortalDestinations:"*",WebWidgetDependencies:"*",HTMLWebSandboxElement:["contentDocument","contentWindow","csp","evaluate","name","src","text"],HTMLWebWidgetElement:["application","bootstrap","csp","data","importance","inactive","load","loading","mount","name","sandboxed","slot","src","state","status","text","type","unload","unmount","update","NOT_LOADED","LOADING_SOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UPDATING","UNMOUNTING","UNLOADING","LOAD_ERROR","BOOTSTRAPP_ERROR","MOUNT_ERROR","UPDAT_ERROR","UNMOUNT_ERROR","UNLOAD_ERROR"],IIRFilterNode:"*",Image:"*",ImageBitmap:"*",ImageBitmapRenderingContext:"*",ImageCapture:"*",ImageData:"*",InputEvent:"*",Keyboard:"*",KeyboardEvent:"*",KeyboardLayoutMap:"*",KeyframeEffect:"*",localStorage:"*",Location:"*",location:"*",matchMedia:"*",MediaCapabilities:"*",MediaDeviceInfo:"*",MediaDevices:"*",MediaElementAudioSourceNode:"*",MediaError:"*",MediaKeyMessageEvent:"*",MediaKeys:"*",MediaKeySession:"*",MediaKeyStatusMap:"*",MediaKeySystemAccess:"*",MediaList:"*",MediaMetadata:"*",MediaQueryList:"*",MediaQueryListEvent:"*",MediaRecorder:"*",MediaSession:"*",MediaSource:"*",MediaStream:"*",MediaStreamAudioDestinationNode:"*",MediaStreamAudioSourceNode:"*",MediaStreamTrack:"*",MediaStreamTrackEvent:"*",menubar:"*",MessageChannel:"*",MessageEvent:"*",MessagePort:"*",MouseEvent:["altKey","button","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","relatedTarget","shiftKey","x","y"],MutationObserver:"*",MutationRecord:"*",name:"*",NamedNodeMap:"*",NavigationPreloadManager:"*",Navigator:["language","languages","userAgent"],navigator:"*",Node:["appendChild","ATTRIBUTE_NODE","baseURI","CDATA_SECTION_NODE","childNodes","cloneNode","COMMENT_NODE","contains","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","ELEMENT_NODE","ENTITY_NODE","ENTITY_REFERENCE_NODE","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isEqualNode","lastChild","nextSibling","nodeName","nodeType","nodeValue","normalize","NOTATION_NODE","ownerDocument","parentNode","previousSibling","PROCESSING_INSTRUCTION_NODE","removeChild","replaceChild","textContent","TEXT_NODE"],NodeFilter:"*",NodeIterator:"*",NodeList:"*",Notification:"*",OfflineAudioCompletionEvent:"*",OfflineAudioContext:"*",offscreenBuffering:"*",OffscreenCanvas:"*",OffscreenCanvasRenderingContext2D:"*",...(ce=se(window),ce.reduce(((e,t)=>(e[t]="*",e)),{})),OverconstrainedError:"*",PageTransitionEvent:"*",Path2D:"*",PointerEvent:"*",queueMicrotask:"*",RadioNodeList:"*",requestAnimationFrame:"*",requestIdleCallback:"*",ResizeObserver:"*",ResizeObserverEntry:"*",ResizeObserverSize:"*",setInterval:"*",setTimeout:"*",ShadowRoot:["activeElement","adoptedStyleSheets","delegatesFocus","getAnimations","host","innerHTML","mode","styleSheets"],SourceBuffer:"*",SourceBufferList:"*",speechSynthesis:"*",SpeechSynthesisErrorEvent:"*",SpeechSynthesisEvent:"*",SpeechSynthesisUtterance:"*",Storage:["clear","getItem","key","length","removeItem","setItem"],StorageEvent:"*",StorageManager:"*",styleMedia:"*",StylePropertyMap:"*",StylePropertyMapReadOnly:"*",StyleSheet:"*",StyleSheetList:"*",SubmitEvent:"*",Text:["wholeText"],TextDecoder:"*",TextDecoderStream:"*",TextEncoder:"*",TextEncoderStream:"*",TextEvent:"*",TextMetrics:"*",TextTrack:"*",TextTrackCue:"*",TextTrackCueList:"*",TextTrackList:"*",Touch:"*",TouchEvent:"*",TouchList:"*",TrackEvent:"*",TransformStream:"*",TransitionEvent:"*",TreeWalker:"*",TrustedHTML:"*",TrustedScript:"*",TrustedScriptURL:"*",TrustedTypePolicy:"*",TrustedTypePolicyFactory:"*",trustedTypes:"*",UIEvent:["detail"],URL:"*",URLSearchParams:"*",VideoPlaybackQuality:"*",WebGL2RenderingContext:"*",WebGLActiveInfo:"*",WebGLBuffer:"*",WebGLContextEvent:"*",WebGLFramebuffer:"*",WebGLProgram:"*",WebGLQuery:"*",WebGLRenderbuffer:"*",WebGLRenderingContext:"*",WebGLSampler:"*",WebGLShader:"*",WebGLShaderPrecisionFormat:"*",WebGLSync:"*",WebGLTexture:"*",WebGLTransformFeedback:"*",WebGLUniformLocation:"*",WebGLVertexArrayObject:"*",WheelEvent:"*",Window:[],WritableStream:"*",WritableStreamDefaultWriter:"*",XMLHttpRequest:"*",XMLHttpRequestEventTarget:"*",XMLHttpRequestUpload:"*"}},ue=["Array","AudioParamMap","CSSKeyframesRule","CSSNumericArray","CSSRuleList","CSSStyleDeclaration","CSSTransformValue","CSSUnparsedValue","DataTransferItemList","DOMRectList","DOMStringList","DOMTokenList","EventCounts","FileList","FormData","Headers","HTMLAllCollection","HTMLCollection","HTMLFormControlsCollection","HTMLFormElement","HTMLOptionsCollection","HTMLSelectElement","KeyboardLayoutMap","MediaKeyStatusMap","MediaList","MIDIInputMap","MIDIOutputMap","MimeTypeArray","NamedNodeMap","NodeList","Object","Plugin","PluginArray","Promise","RadioNodeList","RTCStatsReport","SourceBufferList","StylePropertyMap","StylePropertyMapReadOnly","StyleSheetList","SVGLengthList","SVGNumberList","SVGPointList","SVGStringList","SVGTransformList","TextTrackCueList","TextTrackList","TouchList","XRAnchorSet","XRInputSourceArray"];const de=le.allowInterfaces;function pe({createVirtualClass:e,currentNativeObject:t,evaluate:n,wrapError:r,global:o,injector:i,toVirtualAny:a,virtualCache:s,langUtils:{defineProperty:c,getOwnPropertyDescriptor:l,getOwnPropertyNames:u,getPrototypeOf:d,inherits:p,keys:m,ownKeys:f},parent:h,SandboxSecurityError:b,symbols:{attributeChangedCallback:y,connectedCallback:g,disconnectedCallback:E,initializedCallback:S,observedAttributes:v},toLiveVirtuaObject:w}){const C=d(Object),T=d(o.Object),N=new Map,O=new Set(["arguments","caller","length","name","prototype"]),A=new Set(["constructor"]),M=e=>!O.has(e),L=e=>!A.has(e);function R(e){return"*"===de||"*"===de[e]?h[e]?(t=h[e],[...u(t).filter(M),...u(t.prototype||{}).filter(L)]):[]:de[e];var t}function P(e){const t=N.get(e);if(t)return t;if(ae[e]){const t=n(ae[e]),o=i.resolve(t)();return f(o).forEach((e=>{const t=l(o,e);m(t).forEach((e=>{const n=t[e];"function"==typeof n&&(t[e]=r(n))})),c(o,e,t)})),N.set(e,o),o}return null}const D=n(((e,t,n)=>function(){return e(this,t(n.get()))}))(p,w,t);function x(e,t,n,r){const o=n&&l(n,r);if(o)c(e,r,o);else{const o=l(t,r);if(o)f(o).forEach((e=>{o[e]=a(o[e])})),c(e,r,o);else{const o=d(t);o&&x(e,o,n,r)}}}function I(t,n){if(s.has(t))return s.get(t);if(t===C)return T;const r=t.name;if(!R(r))throw new b(`toVirtualClass: "${r}" is not in the allowed list`);const o=d(t);o&&!s.get(o)&&I(o);const i=P(r)||{};ue.includes(r)&&(i[S]=D);const a=s.get(o),c=e(t,{[S]:i[S],[g]:i[g],[E]:i[E],[y]:i[y],[v]:i[v]},a);return function(e,t,n){const r=R(e.name),o=P(e.name);u(n).filter(M).filter((e=>r.includes(e))).forEach((n=>{x(e,t,o,n)})),n.prototype&&u(n.prototype).filter(L).filter((e=>r.includes(e))).forEach((n=>{x(e.prototype,t.prototype,o,n)}))}(c,n||t,t),s.set(t,c),c}return function(){return I(...arguments)}}function me({callAndWrapError:e,evaluate:t,langUtils:{defineProperties:n},toNativeAny:r,toVirtualAny:o,virtualCache:i}){const a=t(((e,t,n,r,o)=>{function i(...n){return e((()=>{const e=r(this),i=n.map((e=>r(e))),a=Reflect.apply(t,e,i);return o(a)}))}return n(i,{name:{value:t.name,configurable:!0}}),i}));return function(t){if(i.has(t))return i.get(t);const s=a(e,t,n,r,o);return i.set(t,s),s}}function fe({evaluate:e,global:t,langUtils:{apply:n,isObject:r},toVirtualAny:o}){const i=e(((e,t,n,r,o)=>function(){try{return t(e,this,arguments)}catch(e){if(n(e)&&e instanceof r.Object)throw e;throw o(e)}}));return function(e){return i(e,n,r,t,o)}}function he({parent:e,createCSPValidation:t,csp:n,SandboxSecurityError:r}){const o=t(n);return function(t,n,i){const{valid:a,message:s}=o.validity(t,n);if(!a)if("warn"===i)e.console.error(new r(s));else if("error"===i)throw new r(s);return a}}function be(){let e=null;return{get:()=>e,set(t){e=t}}}function ye(){let e=null;return{get:()=>e,set(t){e=t}}}function ge({browserUtils:{Events:e}}){return new e}function Ee({evaluate:e}){return e((()=>class WebSandboxSecurityError extends TypeError{constructor(){super(...arguments),this.name="WebSandboxSecurityError"}}))()}function Se({createSanitizer:e,isJavaScriptType:t,parent:n,symbols:{scriptType:r}}){const o=["web-sandbox","web-widget"];return e({uponSanitizeElement(e,i){e.tagName&&("script"===i.tagName&&t(e.type)?e.setAttribute("type",r):(n.customElements.get(i.tagName)||e.getAttribute("is")&&n.customElements.get(e.getAttribute("is")))&&(o.includes(i.tagName)||e.parentNode.removeChild()))}})}function ve({windowView:e}){const t=`${e.localName}.`;return{prefix:t,scriptType:`${t}script`,disabled:`${t}disabled`,elementDefined:`${t}defined`,initializedCallback:Symbol("initializedCallback"),connectedCallback:Symbol("connectedCallback"),disconnectedCallback:Symbol("disconnectedCallback"),attributeChangedCallback:Symbol("attributeChangedCallback"),observedAttributes:Symbol("observedAttributes"),statics:Symbol("statics")}}pe.cacheResult=!0,me.cacheResult=!0,fe.cacheResult=!0,he.cacheResult=!0,be.cacheResult=!0,ye.cacheResult=!0,ge.cacheResult=!0,Ee.cacheResult=!0,Se.cacheResult=!0,ve.cacheResult=!0;var we=Object.freeze({__proto__:null,bindObject:function({nativeCache:e,virtualCache:t},n,r){e.set(n,r),t.set(r,n)},callAndWrapError:function({global:e,langUtils:{apply:t,isObject:n},toVirtualAny:r},o,i,a=[]){try{return t(o,i,a)}catch(t){if(n(t)&&t instanceof e.Object)throw t;throw r(t)}},createVirtualClass:oe,toLiveVirtuaObject:function({toNativeAny:e,toVirtualAny:t,callAndWrapError:n},r){return new Proxy(r,["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"].reduce(((r,o)=>(r[o]=(...r)=>{const i=r.map((t=>e(t))),a=n(Reflect[o],Reflect,i);return t(a)},r)),{}))},toNativeAny:function({langUtils:{isObject:e,isFunction:t},toNativeObject:n,toNativeFunction:r},o){return e(o)?n(o):t(o)?r(o):o},toNativeFunction:ie,toNativeObject:function({nativeCache:e},t){const n=e.get(t);return n||t},toVirtualAny:function({langUtils:{isObject:e,isFunction:t},toVirtualObject:n,toVirtualFunction:r},o){return e(o)?n(o):t(o)?r(o):o},toVirtualClass:pe,toVirtualFunction:me,toVirtualObject:function({bindObject:e,browserUtils:{queueMicrotask:t},currentNativeObject:n,documentView:r,global:o,langUtils:{construct:i,toString:a},parent:s,SandboxSecurityError:c,toVirtualClass:l,virtualCache:u},d){if(u.has(d))return u.get(d);if(d instanceof o.Object)return d;if(d===s)return o;if(d===r)return o.document;const p=d.constructor,m=p&&l(p);if(!m||d instanceof s.Node&&d.isConnected&&!function(e,t){if(e.contains(t))return!0;if(e.ownerDocument.contains(t))return!1;let n=t;do{if(n=n.getRootNode().host,n===e.host)return!0}while(n);return!1}(r,d))throw t((()=>{s.console.error("[DEBUG] SandboxSecurityError:","toVirtualObject(",d,")")})),new c(`Forbidden: ${a(d)}`);n.set(d);const f=i(m,[]);return n.set(null),e(f,d),f},wrapError:fe,cspValidation:he,cssStyleSheetFilter:function({cssStyleSheetFilter:e,documentView:t,parent:n,symbols:{elementDefined:r}},o){const i=o.cssRules;let a=i.length-1;for(;a>=0;){const s=i[a];switch(!0){case s instanceof n.CSSImportRule||s instanceof n.CSSMediaRule:o.deleteRule(a);break;case s instanceof n.CSSSupportsRule:e(s);break;case s instanceof n.CSSStyleRule:if(s.selectorText.includes(":host")&&t.contains(o.ownerNode)){const e=s.selectorText.split(",").filter((e=>!e.includes(":host"))).join(",");if(0!==e.length){const t=s.cssText.replace(/[^{]*/,e);o.insertRule(t,a+1)}o.deleteRule(a)}else if(s.selectorText.includes(":defined")){const e=s.cssText.replace(":defined",`[${r}]`.replace(".","\\."));o.insertRule(e,a)}}a--}},currentNativeObject:be,currentScript:ye,events:ge,SandboxSecurityError:Ee,sanitizer:Se,symbols:ve,toVirtualNodeCreater:function({events:e,langUtils:{from:t},parent:n,toNativeAny:r,toNativeObject:o,toVirtualAny:i},a,s,c){return function(){const l=n.Node.DOCUMENT_FRAGMENT_NODE;let u;const d=o(this),p=t(arguments).map((e=>r(e))),m=d.isConnected;m&&(u={newNodes:s(p,d).map((e=>e.nodeType===l?[...e.childNodes]:e)).flat(1),oldNodes:c(p,d)});const f=d[a](...p);return m&&e.dispatch("mutation",u),i(f)}}});let Ce;const Te="function"==typeof window.queueMicrotask?window.queueMicrotask:e=>(Ce||(Ce=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)));var Ne=Object.freeze({__proto__:null,queueMicrotask:Te,Events:class Events{constructor(){this.eventTarget=new EventTarget}add(e,t){this.eventTarget.addEventListener(e,(({detail:e})=>t(e)))}dispatch(e,t){this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t}))}},scriptSourceLoader:function(e,t={}){return fetch(e,{credentials:"same-origin",...t}).then((t=>{if(!t.ok)throw Error([t.status,t.statusText,e].join(", "));const n=/(\/\/# sourceURL=)((https?:\/\/)?([\w-])+\.{1}([a-zA-Z]{2,63})([/\w-]*)*\/?\??([^#\n\r]*)?)/,r=t.headers.get("content-type");if(!r||!/^(text|application)\/(x-)?javascript(;|$)/.test(r))throw Error(r);return t.text().then((t=>(n.test(t)?t=t.replace(n,((t,n,r)=>`${n}${URL(r,e).href}`)):t+=`\n//# sourceURL=${e}`,t)))}))}});let Oe;const Ae=new WeakMap;function Me(e){function t(){try{const{isFunction:t,isObject:n,parent:r,toVirtualAny:o,toVirtualClass:i}=Ae.get(this);let a;const s=r[e];return t(s)?a=i(s):n(s)&&(a=o(s)),Reflect.defineProperty(this,e,{value:a,writable:!0,enumerable:!1,configurable:!0}),a}catch(e){return Te((()=>{throw e})),null}}return Reflect.setPrototypeOf(t,null),t}var Le=Object.freeze({__proto__:null,WindowProperties:function({animationFrameList:e,cspValidation:t,debug:n,documentView:r,global:o,id:i,intervalList:a,langUtils:{defineProperties:s,entries:c,has:l,setPrototypeOf:u},parent:d,SandboxSecurityError:p,timeoutList:m,toNativeObject:f,toNativeFunction:h,toVirtualFunction:b,toVirtualObject:y}){let g;const E=y(r),S=d.document,v=d.location,w=d.URL,C=(e,n)=>{const r=!["href","assign","replace"].includes(e),o=new w(S.baseURI);if(r?l(o,e)&&(o[e]=n):o.href=(e=>new w(e,S.baseURI))(n).href,["javascript:","blob:","data:","filesystem:"].includes(o.protocol))throw new p(`Forbidden: "${o.protocol}"`);t("navigate-to",o.href,"error"),"reload"===e?v[e](n):["assign","replace"].includes(e)?v[e](o.href):v.href=o.href};return{console:c(d.console).reduce(((e,[t,r])=>(n?(e[t]=r,u(r,null)):e[t]=b(r),e)),{}),get customElements(){return y(d.customElements)},get localStorage(){return y(d.localStorage)},name:i,get navigator(){return y(d.navigator)},get self(){return o},get window(){return o},get document(){return E},get location(){return g||(g=s(y(v),{...["hash","host","hostname","href","origin","password","pathname","port","protocol","search","username"].reduce(((e,t)=>(e[t]={enumerable:!0,get:()=>v[t],set(e){C(t,e)}},e)),{}),...["assign","reload","replace"].reduce(((e,t)=>(e[t]={enumerable:!0,value(e){C(t,e)}},e)),{}),toString:{enumerable:!0,value(){return this.href}}}),g)},set location(e){this.location.href=e},close(){if(!o.closed){const{dispatchEvent:t,clearTimeout:n,clearInterval:r,cancelAnimationFrame:i,document:s,Event:c}=o;t(new c("beforeunload")),t(new c("pagehide")),t(new c("unload")),m.forEach((e=>n(e))),a.forEach((e=>r(e))),e.forEach((e=>i(e))),s.removeChild(s.documentElement),o.closed=!0}},getComputedStyle(e,t){const n=f(e),r=d.getComputedStyle(n,t);return y(r)},requestAnimationFrame:(t,...n)=>e.push(d.requestAnimationFrame(h(t),...n)),cancelAnimationFrame(t){const n=e.indexOf(t);-1!==n&&(e.splice(n,1),d.cancelAnimationFrame(t))}}},WindowOrWorkerGlobalScope:function({intervalList:e,langUtils:{isString:t},parent:n,SandboxSecurityError:r,timeoutList:o,toNativeFunction:i}){return{setTimeout(e,...a){if(t(e))throw new r("The first parameter must be a function");return o.push(n.setTimeout(i(e),...a))},clearTimeout(e){const t=o.indexOf(e);-1!==t&&(o.splice(t,1),n.clearTimeout(e))},setInterval(o,...a){if(t(o))throw new r("The first parameter must be a function");return e.push(n.setInterval(i(o),...a))},clearInterval(t){const r=e.indexOf(t);-1!==r&&(e.splice(r,1),n.clearInterval(t))}}}});var Re=Object.freeze({__proto__:null,installBOMInterfaces:function({global:e,langUtils:{defineProperties:t,defineProperty:n,getOwnPropertyNames:r,hasOwnProperty:o,isFunction:i,isObject:a},parent:s,toVirtualAny:c,toVirtualClass:l}){if(!Oe){const t=le.allowInterfaces,i=r("*"===t?s:t);Oe=i.filter((t=>!o(e,t))).reduce(((t,r)=>(t[r]={enumerable:!1,configurable:!0,get:Me(r),set(t){n(e,r,{value:t,writable:!0,enumerable:!1,configurable:!0})}},t)),{})}Ae.set(e,{isFunction:i,isObject:a,parent:s,toVirtualAny:c,toVirtualClass:l}),t(e,Oe)},installContainLayout:function({parent:e,symbols:{prefix:t},windowView:n}){const r=`${t}style`;if(!e.document.getElementById(r)){const t=e.document.createElement("style"),o="contain"in n.style?"contain: layout":"transform: scale(1)";t.textContent=`${n.localName} { ${o}; overflow: hidden; }`,t.id=r,e.document.head.appendChild(t)}},installHooks:function({cspValidation:e,events:t,global:n,symbols:r,toVirtualObject:o,parent:i,langUtils:{isString:a}}){function s(t){e("navigate-to",t.target.href,"warn")||t.preventDefault()}function c(t){let n=t.target.action;const{submitter:r}=t;if(r){r.getAttribute("formaction")&&(n=r.formAction)}e("form-action",n,"warn")&&e("navigate-to",n,"warn")||t.preventDefault()}function l(e){if(a(e))return;const t=o(e),i=e.localName,u=n.customElements.get(1===t.nodeType&&t.getAttribute("is")||t.localName);t[r.connectedCallback]?t[r.connectedCallback]():!u||t instanceof u?u&&t.connectedCallback&&t.connectedCallback():n.customElements.upgrade(t),"a"===i?e.addEventListener("click",s,!0):"form"===i&&e.addEventListener("submit",c,!0),e.childNodes.forEach(l)}function u(e){const t=o(e),i=e.localName;t[r.disconnectedCallback]?t[r.disconnectedCallback]():n.customElements.get(t.localName)&&t.disconnectedCallback&&t.disconnectedCallback(),"a"===i?e.removeEventListener("click",s):"form"===i&&e.removeEventListener("submit",c),e.childNodes.forEach(u)}i.addEventListener("hashchange",(e=>{const t=o(new e.constructor(e.type,{newUrl:e.newURL,oldURL:e.oldURL}));n.dispatchEvent(t)})),t.add("mutation",(({newNodes:e,oldNodes:t})=>{try{t.forEach(u),e.forEach(l)}catch(e){i.console.error(e)}}));const d=i.document,p=i.URL,m=e=>new p(e,d.baseURI),f=n.HTMLAnchorElement.prototype.click,h=n.HTMLFormElement.prototype.submit,b=n.XMLHttpRequest.prototype.open,y=n.fetch;n.HTMLAnchorElement.prototype.click=function(){return e("navigate-to",this.href,"error"),f.apply(this,arguments)},n.HTMLFormElement.prototype.submit=function(){return e("navigate-to",this.action,"error"),e("form-action",this.action,"error"),h.apply(this,arguments)},n.XMLHttpRequest.prototype.open=function(){const t=arguments[1],n=m(a(t)?t:t.url);return e("connect-src",n.href,"error"),b.apply(this,arguments)},n.fetch=function(){const t=arguments[0],n=m(a(t)?t:t.url);return e("connect-src",n.href,"error"),y.apply(this,arguments)}},installDefaultNodes:function({documentView:e,parent:t,title:n}){const r=t.document,o=r.createElement("html"),i=r.createElement("head"),a=r.createElement("title"),s=r.createElement("body");a.textContent=n,i.appendChild(a),o.appendChild(i),o.appendChild(s),e.appendChild(o)},installEsTraps:function({virtualCache:e,createVirtualClass:t,currentNativeObject:n,parent:r,symbols:{initializedCallback:o},toLiveVirtuaObject:i,langUtils:{inherits:a},evaluate:s}){return s(((e,t,n,r,o,i,a)=>["Array","Error","EvalError","Object","Promise","RangeError","ReferenceError","SyntaxError","TypeError","URIError"].map((s=>{const c=r[s],l=t(c,{[o](){return a(this,i(n.get()))}});return e.set(c,l),l}))))(e,t,n,r,o,i,a)},installView:function({bindObject:e,currentNativeObject:t,documentView:n,langUtils:{construct:r,setPrototypeOf:o,create:i},parent:a,toVirtualClass:s,windowView:c,global:l}){const u=s(a.Window,c.constructor),d=s(a.Document,n.constructor),p=s(a.HTMLDocument),[m,f]=[[c,u,l],[n,p]].map((([n,o,i])=>(t.set(n),i=i||r(o,[]),t.set(null),e(i,n),i)));return o(l,i(u.prototype)),{Window:u,Document:d,window:m,document:f}},installWindowProperties:function({evaluate:e,global:t,injector:n,langUtils:{defineProperty:r,getOwnPropertyDescriptor:o,keys:i,mixin:a,ownKeys:s},wrapError:c}){i(Le).forEach((l=>{const u=e(Le[l]),d=n.resolve(u)();s(d).forEach((e=>{const t=o(d,e);i(t).forEach((e=>{const n=t[e];"function"==typeof n&&(t[e]=c(n))})),r(d,e,t)})),a(t,d)}))}});const Pe=(e,t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{});var De={...Pe(Object,["assign","create","defineProperties","defineProperty","entries","freeze","fromEntries","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","is","isExtensible","isFrozen","isSealed","keys","preventExtensions","seal","setPrototypeOf","values"]),...Pe(Reflect,["apply","construct","deleteProperty","get","has","ownKeys","set"]),from:Array.from,isArray:e=>Array.isArray(e),isBoolean:e=>"boolean"==typeof e,isNull:e=>null===e,isNumber:e=>"number"==typeof e,isString:e=>"string"==typeof e,isObject:e=>"object"==typeof e&&null!==e,isFunction:e=>"function"==typeof e,hasOwnProperty:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),toString:e=>Object.prototype.toString.call(e),inherits(e,t){const{has:n,get:r,ownKeys:o,set:i,deleteProperty:a,getOwnPropertyDescriptor:s}=Reflect;return new Proxy(e,{get(e,o,i){const a=n(e,o)?[e,o,i]:[t,o];return r(...a)},has:(e,r)=>n(e,r)||n(t,r),ownKeys:e=>new Set(...o(e),...o(t)),set(e,r,o,a){const s=n(e,r)?[e,r,o,a]:[t,r,o];return i(...s)},deleteProperty:(e,r)=>a(n(e,r)?e:t,r),getOwnPropertyDescriptor:(e,r)=>s(n(e,r)?e:t,r)})},mixin(e,t){const{defineProperty:n,getOwnPropertyDescriptor:r,ownKeys:o}=Reflect;o(t).forEach((o=>{const i=r(t,o);n(e,o,i)}))}};const xe=e=>e.replace(/^\/|\/$/g,"").split("/");const Ie=["connect-src","script-src","style-src"];class CSPValidation{constructor(e){this.policy={..."string"==typeof e?ne(e):e}}validity(e,t){let n=!0,r="",o=this.policy[e];return!o&&Ie.includes(e)&&(e="default-src",o=this.policy[e]||["*"]),o?(n=o.length&&o.some((e=>function(e,t,n=document.location){e=e.toLowerCase(),t=t.toLowerCase();const r=new URL(t),o=/^(?:(?<scheme>[a-z][a-z0-9+.-]*):\/\/)?(?<host>\[[0-9A-F:.]{2,}\]|(?:[^'\/?#:]|%[0-9A-F]{2})+)(?::(?<port>[^\/?]*))?(?<path>[^?#]*)?$/i;if("*"===e)return!["blob:","data:","filesystem:"].includes(r.protocol);if(e.match(/^[a-z][a-z0-9+.-]*:$/i))return r.protocol===e;if(e.match(o)){const{scheme:t,host:i,port:a,path:s}=e.match(o).groups;if(!r.hostname)return!1;const c=r.protocol.replace(":",""),l=r.hostname,u=r.port,d=r.pathname,p=xe(d);if(t&&c!==t)return!1;if(!t){const e=n.protocol.replace(":","");if("http"===e&&"http"!==c&&"https"!==c||"http"!==e&&c!==e)return!1}if(i.startsWith("*")){if(!l.endsWith(i.slice(1)))return!1}else if(l!==i)return!1;const m=/^\[.*\]$/;if(/^[\d.]+$/.test(i)&&"127.0.0.1"!==i||m.test(i))return!1;if(a){if("*"!==a&&u!==a)return!1}else if(!["",{ftp:21,http:80,https:443,ws:80,wss:443}[c]].includes(u))return!1;if(s){const e=!s.endsWith("/"),t=xe(s);if(t.length>p.length)return!1;for(let e of t){if(e=decodeURIComponent(e),decodeURIComponent(p[0])!==e)return!1;p.shift()}if(e&&p.length>0)return!1}return!0}if("'self'"===e){const{protocol:e,hostname:t,port:o}=n;return r.protocol===e&&r.hostname===t&&r.port===o}return!1}(e,t))),n||(r=`Refused: ${JSON.stringify(t)}: Because it violates the following Content Security Policy directive: "${e} ${o.join(" ")}"`),{valid:n,message:r}):{valid:n,message:r}}}const je=Object.seal(/^data-[\-\w.\u00B7-\uFFFF]/),ke=Object.seal(/^aria-[\-\w]+$/),He=Object.seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ve=Object.seal(/^(?:\w+script|data):/i),Ue=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),{Node:Fe,NodeFilter:_e,Text:$e,Comment:We,NamedNodeMap:Be,DocumentFragment:ze,document:Ge}=window,qe=Symbol("executeHook"),Ke=Symbol("sanitizeElements"),Xe=Symbol("sanitizeAttributes"),Ye=Symbol("sanitizeShadowDOM"),Qe=Symbol("sanitizeString"),Je=["base","embed","iframe","meta","noscript","object","param","frame","frameset","noframes"],Ze=["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"],et=["audio","video","img","source","image","track"],tt=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"],nt=Ge.createElement("form"),rt=e=>{try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=""}catch(t){e.remove()}}},ot=function(e,t){if(t.removeAttribute(e),"is"===e)try{t.setAttribute(e,"")}catch(e){}},it=e=>(e.ownerDocument||e).createNodeIterator(e,_e.SHOW_ELEMENT|_e.SHOW_COMMENT|_e.SHOW_TEXT,(()=>_e.FILTER_ACCEPT),!1),at=e=>"object"==typeof Fe?e instanceof Fe:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;class Sanitizer{constructor(e={}){this.config=e}[qe](e,t,n){const r=this.config[e];r&&r.call(this,t,n,this.config)}[Ke](e){const{allowElements:t,dropElements:n}=this.config;if(this[qe]("beforeSanitizeElements",e,null),!((r=e)instanceof $e||r instanceof We||"string"==typeof r.nodeName&&"string"==typeof r.textContent&&"function"==typeof r.removeChild&&r.attributes instanceof Be&&"function"==typeof r.removeAttribute&&"function"==typeof r.setAttribute&&"string"==typeof r.namespaceURI&&"function"==typeof r.insertBefore))return rt(e),!0;var r;if(e.nodeName.match(/[\u0080-\uFFFF]/))return rt(e),!0;const o=e.nodeName.toLowerCase();if(this[qe]("uponSanitizeElement",e,{tagName:o,allowElements:t}),"script"===o&&!e.type)return rt(e),!0;if(("svg"===o||"math"===o)&&0!==e.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length)return rt(e),!0;if(!at(e.firstElementChild)&&(!at(e.content)||!at(e.content.firstElementChild))&&/<[/\w]/g.test(e.innerHTML)&&/<[/\w]/g.test(e.textContent))return rt(e),!0;if(!this.isValidElement(o)){if(!Je.includes(o)&&n&&!n.includes(o)&&!Ze.includes(o)){const t=e.parentNode,n=e.childNodes;for(let r=n.length-1;r>=0;--r)t.insertBefore(n[r].cloneNode(!0),e.nextSibling)}return rt(e),!0}return"noscript"!==o&&"noembed"!==o||!/<\/no(script|embed)/i.test(e.innerHTML)?(this[qe]("afterSanitizeElements",e,null),!1):(rt(e),!0)}isValidAttribute(e,t,n){const{allowAttributes:r,dropAttributes:o}=this.config,i=e.toLowerCase(),a=t.toLowerCase();if(0===a.indexOf("on")||"script"===i&&"type"===a&&re(n))return!1;if(("id"===a||"name"===a)&&(n in Ge||n in nt))return!1;if(je.test(a));else if(ke.test(a));else{if(o&&o.includes(a)||r&&r.length&&!r.includes(a))return!1;if(tt.includes(a));else if(He.test(n.replace(Ue,"")));else if("src"!==a&&"xlink:href"!==a&&"href"!==a||"script"===i||0!==n.indexOf("data:")||!et.includes(i))if(Ve.test(n.replace(Ue,""))){if(n)return!1}else;else;}return!0}isValidElement(e){const{allowElements:t,blockElements:n,dropElements:r}=this.config,o=e.toLowerCase();return!Je.includes(o)&&!(r&&r.includes(o)||n&&n.includes(o)||t&&t.length&&!t.includes(o))}[Xe](e){const{allowAttributes:t}=this.config,n=e.nodeName;let r,o,i,a;this[qe]("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(!s)return;const c={name:"",value:"",keep:!0,allowAttributes:t};for(a=s.length;a--;){r=s[a];const{name:t}=r;o=r.value.trim(),i=t,c.name=i,c.value=o,c.keep=void 0,this[qe]("uponSanitizeAttribute",e,c),o=c.value,c.keep||(this.isValidAttribute(n,i,o)||ot(t,e))}this[qe]("afterSanitizeAttributes",e,null)}[Ye](e){let t;const n=it(e);for(this[qe]("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)this[qe]("uponSanitizeShadowNode",t,null),this[Ke](t)||(t.content instanceof ze&&this[Ye](t.content),this[Xe](t));this[qe]("afterSanitizeShadowDOM",e,null)}[Qe](e,t){const n=(e=>{const t=e.match(/^[\r\n\t ]+/),n=t&&t[0],r=Ge.implementation.createHTMLDocument(""),{body:o}=r;return o.innerHTML=e,e&&n&&r.body.insertBefore(Ge.createTextNode(n),r.body.childNodes[0]||null),o})(e=`${e}`);if(!n)return t?Ge.createDocumentFragment():"";const r=it(n);let o;for(;o=r.nextNode();)this[Ke](o)||(o.content instanceof ze&&this[Ye](o.content),this[Xe](o));if(t){const e=n.ownerDocument.createDocumentFragment();if(n)for(;n.firstChild;)e.appendChild(n.firstChild);return e}return n.innerHTML}sanitize(e){return this[Qe](e,!0)}sanitizeToString(e){return this[Qe](e)}}function st(){return De}function ct(){return Ne}st.cacheResult=!0,ct.cacheResult=!0;var lt={...we,...ae,...Re,langUtils:st,browserUtils:ct,createCSPValidation:(e,...t)=>new CSPValidation(...t),createSanitizer:(e,...t)=>new Sanitizer(...t),isJavaScriptType:(e,...t)=>re(...t)};let ut=0;const dt=Symbol("bridge"),pt=new WeakMap;exports.WebSandbox=class WebSandbox{constructor(e,t={}){if(!e.isConnected)throw new Error("Elements must be inserted into the DOM");const n={csp:"default-src 'none'",...t,parent:e.ownerDocument.defaultView,windowView:e,documentView:e.attachShadow({mode:"closed"}),id:e.id||`#${ut}`,title:e.title||e.name};n.csp=ne(n.csp);const r=function(e){let t=e;do{if(t=t.getRootNode().host,t&&pt.has(t))return t}while(t);return null}(e);if(r){const e=pt.get(r),t=e[dt].id,o=e.debug,i=e[dt].csp;n.debug=o,n.id=`${t}.${n.id}`,Object.keys(n.csp).forEach((e=>{i[e]?n.csp[e].forEach(((t,r)=>{i[e].includes(t)||n.csp[e].splice(r,1)})):delete n.csp[e]}))}(function({csp:e,debug:t,documentView:n,id:r,parent:o,title:i,windowView:a}){const s=te(),c=new Map,l=s.global,u=new Injector,d=new WeakMap,p=new WeakMap,m={animationFrameList:[],csp:e,customElements:c,debug:t,documentView:n,evaluate:(e,t)=>s.evaluate("function"==typeof e?`(${e})`:e,t),global:l,id:r,injector:u,intervalList:[],nativeCache:d,parent:o,timeoutList:[],title:i,virtualCache:p,windowView:a};Object.keys(m).forEach((e=>{u.register(e,m[e])}));const f=Object.keys(lt),h=e=>{const t=lt[e],n=t.cacheResult,r=u.resolve(t),o=n?r():r,i=f.indexOf(e);return u.register(e,o),f.splice(i,1),o};for(u.fallback=function(e){if(!Object.prototype.hasOwnProperty.call(lt,e))throw new Error(`Injector: Can't resolve ${e}`);return h(e)};f.length;){const e=f[0];h(e)}return u})(n).resolve((({browserUtils:{scriptSourceLoader:e},csp:t,debug:n,evaluate:r,global:o,id:i,installBOMInterfaces:a,installContainLayout:s,installHooks:c,installDefaultNodes:l,installEsTraps:u,installView:d,installWindowProperties:p,toNativeAny:m,toVirtualAny:f})=>{d(),a(),p(),u(),l(),s(),c(),this[dt]={csp:t,debug:n,evaluate:r,global:o,id:i,scriptSourceLoader:e,toNativeAny:m,toVirtualAny:f}}))(),ut++,pt.set(e,this)}get global(){return this[dt].global}get evaluate(){return this[dt].evaluate}toNative(e){return this[dt].toNativeAny(e)}toVirtual(e){return this[dt].toVirtualAny(e)}unload(){this.global.close()}importScript(e,t){return this[dt].scriptSourceLoader(e).then((e=>this.evaluate(e,t)))}};
//# sourceMappingURL=web-sandbox-core.cjs.js.map
