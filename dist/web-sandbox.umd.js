!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).WebSandbox={})}(this,(function(e){"use strict";function t(e,t){const n=`please report internal shim error: ${e}`;throw console.error(n),t&&(console.error(`${t}`),console.error(`${t.stack}`)),n}function n(e,n){e||t(n)}function r(e){let t=`'use strict'; (${e})`;return t=t.replace(/\(0,\s*_[0-9a-fA-F]{3}\u200D\.e\)/g,"(0, eval)"),t=t.replace(/_[0-9a-fA-F]{3}\u200D\.g\./g,""),t=t.replace(/cov_[^+]+\+\+[;,]/g,""),t}function o(e,t){const{callAndWrapError:n}=e,{initRootRealm:r,initCompartment:o,getRealmGlobal:i,realmEvaluate:a}=t,{create:s,defineProperties:c}=Object;class Realm{constructor(){throw new TypeError("Realm is not a constructor")}static makeRootRealm(t={}){const o=s(Realm.prototype);return n(r,[e,o,t]),o}static makeCompartment(t={}){const r=s(Realm.prototype);return n(o,[e,r,t]),r}get global(){return n(i,[this])}evaluate(e,t,r={}){return n(a,[this,e,t,r])}}return c(Realm,{toString:{value:()=>"function Realm() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),c(Realm.prototype,{toString:{value:()=>"[object Realm]",writable:!1,enumerable:!1,configurable:!0}}),Realm}const i=r(o);const a=r((function(){const{getPrototypeOf:e}=Object,{apply:t}=Reflect,n=e=>(n,...r)=>t(e,n,r),r=n(Map.prototype.get),o=n(Set.prototype.has),i=new Map([["EvalError",EvalError],["RangeError",RangeError],["ReferenceError",ReferenceError],["SyntaxError",SyntaxError],["TypeError",TypeError],["URIError",URIError]]),a=new Set([EvalError.prototype,RangeError.prototype,ReferenceError.prototype,SyntaxError.prototype,TypeError.prototype,URIError.prototype,Error.prototype]);return function(n,s){try{return t(n,void 0,s)}catch(t){if(Object(t)!==t)throw t;if(o(a,e(t)))throw t;let n,s,c;try{n=`${t.name}`,s=`${t.message}`,c=`${t.stack||s}`}catch(e){throw new Error("unknown error")}const l=r(i,n)||Error;try{throw new l(s)}catch(e){throw e.stack=c,e}}}})),{assign:s,create:c,freeze:l,defineProperties:u,getOwnPropertyDescriptor:d,getOwnPropertyDescriptors:p,getOwnPropertyNames:m,getPrototypeOf:f,setPrototypeOf:h}=Object,{apply:b,ownKeys:g}=Reflect,y=e=>(t,...n)=>b(e,t,n),E=y(Object.prototype.hasOwnProperty),S=y(Array.prototype.filter),v=y(Array.prototype.pop),w=y(Array.prototype.join),C=y(Array.prototype.concat),T=y(RegExp.prototype.test),N=y(String.prototype.includes),O=["Infinity","NaN","undefined"],A=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Array","ArrayBuffer","Boolean","DataView","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Object","RangeError","ReferenceError","Set","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","JSON","Math","Reflect","escape","unescape"],M=["Date","Error","Promise","Proxy","RegExp","Intl"];function L(){const{defineProperty:e,defineProperties:t,getOwnPropertyDescriptor:n,getPrototypeOf:r,prototype:o}=Object;try{(0,o.__lookupGetter__)("x")}catch(e){return}function i(e){if(null==e)throw new TypeError("can't convert undefined or null to object");return Object(e)}function a(e){return"symbol"==typeof e?e:`${e}`}function s(e,t){if("function"!=typeof e)throw TypeError(`invalid ${t} usage`);return e}t(o,{__defineGetter__:{value:function(t,n){const r=i(this);e(r,t,{get:s(n,"getter"),enumerable:!0,configurable:!0})}},__defineSetter__:{value:function(t,n){const r=i(this);e(r,t,{set:s(n,"setter"),enumerable:!0,configurable:!0})}},__lookupGetter__:{value:function(e){let t,o=i(this);for(e=a(e);o&&!(t=n(o,e));)o=r(o);return t&&t.get}},__lookupSetter__:{value:function(e){let t,o=i(this);for(e=a(e);o&&!(t=n(o,e));)o=r(o);return t&&t.set}}})}function R(){const{defineProperties:e,getPrototypeOf:t,setPrototypeOf:n}=Object;function r(r,o){let i;try{i=(0,eval)(o)}catch(e){if(e instanceof SyntaxError)return;throw e}const a=t(i),s=function(){throw new TypeError("Not available")};e(s,{name:{value:r}}),e(a,{constructor:{value:s}}),e(s,{prototype:{value:a}}),s!==Function.prototype.constructor&&n(s,Function.prototype.constructor)}r("Function","(function(){})"),r("GeneratorFunction","(function*(){})"),r("AsyncFunction","(async function(){})"),r("AsyncGeneratorFunction","(async function*(){})")}const x="'use strict'; this";const P=()=>{const e=function(){if("undefined"==typeof document)return;const e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e.contentWindow.eval(x)}(),t=function(){if(!new Function("try {return this===global}catch(e){return false}")())return;return require("vm").runInNewContext("(0, eval)(\"'use strict'; this\")")}();if(!e&&!t||e&&t)throw new Error("unexpected platform, unable to create Realm");return e||t};function D(e,t=[],r=!1){const o=function(e,t=!1){const r={};function o(t,o,i,a){for(const s of t){const t=d(e,s);t&&(n("value"in t,`unexpected accessor on global property: ${s}`),r[s]={value:t.value,writable:o,enumerable:i,configurable:a})}}return t?(o(O,!0,!1,!0),o(A,!0,!1,!0)):(o(O,!1,!1,!1),o(A,!1,!1,!1)),o(M,!0,!1,!0),r}(e,r),i=e.eval,s=e.Function,c=i(a)();return l({unsafeGlobal:e,sharedGlobalDescs:o,unsafeEval:i,unsafeFunction:s,callAndWrapError:c,allShims:t})}const I=r(L),k=r(R);const H=/^[a-zA-Z_$][\w$]*$/,j=new Set(["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"]);function U(e,t={}){const n=m(e);return S(n,(n=>{if(n in t)return!1;if("eval"===n||j.has(n)||!T(H,n))return!1;const r=d(e,n);return!1===r.configurable&&!1===r.writable&&E(r,"value")}))}const V=r((function(e,t,n={},r=!1){const{unsafeGlobal:o,unsafeEval:i}=e,{freeze:a,getOwnPropertyDescriptor:s}=Object,{get:c,set:l}=Reflect;return{__proto__:new Proxy(a({}),{get(e,t){throw new TypeError(`unexpected scope handler trap called: ${String(t)}`)}}),useUnsafeEvaluator:!1,get(e,r){if("symbol"!=typeof r)return"eval"===r&&!0===this.useUnsafeEvaluator?(this.useUnsafeEvaluator=!1,i):r in n?c(n,r,t):c(t,r)},set(e,r,o){if(r in n){return"value"in s(n,r)?l(n,r,o):l(n,r,o,t)}return l(t,r,o)},has:(e,i)=>!!r||("eval"===i||i in n||i in t||i in o),getPrototypeOf:()=>null}}));const _=r((function(e,t){const{callAndWrapError:n}=e,{defineProperties:r}=Object,o={eval(){return n(t,arguments)}}.eval;return r(o,{toString:{value:()=>"function eval() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),o}));const F=r((function(e,t){const{callAndWrapError:n,unsafeFunction:r}=e,{defineProperties:o}=Object,i=function(){return n(t,arguments)};return o(i,{prototype:{value:r.prototype},toString:{value:()=>"function Function() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),i}));const W=r((function(e,t){const{create:n,getOwnPropertyDescriptors:r}=Object,{apply:o}=Reflect;var i;return e={src:`${(e=(i=Array.prototype.reduce,(e,...t)=>o(i,e,t))(t,((e,t)=>t.rewrite?t.rewrite(e):e),e={src:`${e.src}`,endowments:n(null,r(e.endowments))})).src}`,endowments:n(null,r(e.endowments))}})),$=new RegExp("(?:\x3c!--|--\x3e)");const B=/\bimport\s*(?:\(|\/[/*])/;const z=/\beval\s*(?:\(|\/[/*])/;function G(e){!function(e){const t=e.search($);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible html comment syntax rejected around line ${n}`)}}(e),function(e){const t=e.search(B);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible import expression rejected around line ${n}`)}}(e),function(e){const t=e.search(z);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible direct eval expression rejected around line ${n}`)}}(e)}const K={rewrite:e=>(G(e.src),e)};function q(e,t){const{unsafeFunction:n}=e;return n(`\n    with (arguments[0]) {\n      ${function(e){return 0===e.length?"":`const {${w(e,",")}} = this;`}(t)}\n      return function() {\n        'use strict';\n        return eval(arguments[0]);\n      };\n    }\n  `)}const X=new WeakMap;function Y(e){return n(Object(e)===e,"bad object, not a Realm instance"),n(X.has(e),"Realm instance has no record"),X.get(e)}function Q(e,t){n(Object(e)===e,"bad object, not a Realm instance"),n(!X.has(e),"Realm instance already has a record"),X.set(e,t)}function J(e,r,o){const{sharedGlobalDescs:i,unsafeGlobal:a}=e,s=c(a.Object.prototype,i),d=function(e,n,r,o){const{unsafeEval:i}=e,a=i(W);return function(s={},c={}){const l=c.transforms||[],u=C(l,r||[],[K]);return function(r){let c={src:r,endowments:s};c=a(c,u);const l=U(n,c.endowments),d=U(c.endowments),p=C(l,d),m=q(e,p),f=i(V)(e,n,c.endowments,o),h=Proxy.revocable({},f),g=h.proxy,y=b(m,n,[g]);let E;f.useUnsafeEvaluator=!0;try{return b(y,n,[c.src])}catch(e){throw E=e,e}finally{f.useUnsafeEvaluator&&(h.revoke(),t("handler did not revoke useUnsafeEvaluator",E))}}}}(e,s,r,o),p=d(),m=function(e,t){const{unsafeEval:r,unsafeFunction:o}=e,i=r(_)(e,t);return n(f(i).constructor!==Function,"hide Function"),n(f(i).constructor!==o,"hide unsafeFunction"),i}(e,p),h=function(e,t){const{unsafeGlobal:r,unsafeEval:o,unsafeFunction:i}=e,a=o(F)(e,(function(...e){const n=`${v(e)||""}`;let o=`${w(e,",")}`;if(!T(/^[\w\s,]*$/,o))throw new SyntaxError("shim limitation: Function arg must be simple ASCII identifiers, possibly separated by commas: no default values, pattern matches, or non-ASCII parameter names");if(new i(n),N(o,")"))throw new r.SyntaxError("shim limitation: Function arg string contains parenthesis");return o.length>0&&(o+="\n/*``*/"),t(`(function(${o}){\n${n}\n})`)}));return n(f(a).constructor!==Function,"hide Function"),n(f(a).constructor!==i,"hide unsafeFunction"),a}(e,p),g=function(e){return(t,n,r={})=>e(n,r)(t)}(d);!function(e,t,n){u(e,{eval:{value:t,writable:!0,configurable:!0},Function:{value:n,writable:!0,configurable:!0}})}(s,m,h);return l({safeGlobal:s,safeEval:m,safeEvalWhichTakesEndowments:g,safeFunction:h})}const Z={initRootRealm:function(e,t,n){const{shims:r,transforms:o,sloppyGlobals:a,configurableGlobals:s}=n,c=C(e.allShims,r),l=function(e,t=!1){const n=D(P(),e,t),{unsafeEval:r}=n;return r(I)(),r(k)(),n}(c,s),{unsafeEval:u}=l,d=u(i)(l,Z);l.sharedGlobalDescs.Realm={value:d,writable:!0,configurable:!0};const p=J(l,o,a),{safeEvalWhichTakesEndowments:m}=p;for(const e of c)m(e);Q(t,p)},initCompartment:function(e,t,n={}){const{transforms:r,sloppyGlobals:o}=n;Q(t,J(e,r,o))},getRealmGlobal:function(e){const{safeGlobal:t}=Y(e);return t},realmEvaluate:function(e,t,n={},r={}){const{safeEvalWhichTakesEndowments:o}=Y(e);return o(t,n,r)}},ee=o(function(){const e=(0,eval)(x);return L(),R(),D(e)}(),Z);function te({rootRealm:e,compartment:t}){const{seal:n}=Object,{defineProperty:r,getOwnPropertyDescriptor:o,ownKeys:i}=Reflect,a=(e,t)=>{const n=o(e,t);if(n&&n.configurable){if(n.hasOwnProperty("value")){const o=n.value;delete n.value,delete n.writable,n.get=()=>o,n.set=function(n){if(this===e)throw TypeError(`Cannot assign to read only property '${t}' of object '#<${e}>'`);r(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}}n.configurable=!1,r(e,t,n)}};delete t.global.Realm,i(e.global).map((t=>e.global[t])).filter((e=>e&&"object"==typeof e||"function"==typeof e)).forEach((e=>{i(e).forEach((t=>{a(e,t)})),n(e),e.prototype&&(i(e.prototype).forEach((t=>{a(e.prototype,t)})),n(e.prototype))}))}let ne;function re(){if(!ne){ne=ee.makeRootRealm();const e=window.document.body.lastChild;if("IFRAME"===e.nodeName&&e.contentWindow&&ne.global instanceof e.contentWindow.Object){const t=e.contentDocument;t.removeChild(t.documentElement),Object.defineProperties(e,{contentWindow:{},contentDocument:{}})}}const e=ne.global.Realm.makeCompartment(),t=e.evaluate;return e.evaluate=function(e,...n){return e=e.replace(/\.import\(/g,"['import']("),t.call(this,e,...n)},ne.evaluate(`(${te.toString()})`)({rootRealm:ne,compartment:e}),e}function oe(e){return e.split(";").reduce(((e,t)=>{const[n,...r]=t.trim().split(/\s+/g);return n&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=r.includes("'none'")?[]:r),e}),{})}class Injector{constructor(){this.dependencies=new Map}register(e,t){this.dependencies.set(e,t)}fallback(e){throw new Error(`Injector: Can't resolve ${e}`)}resolve(e,t=null){const n=this,r=new Proxy(Object.create(null),{get(e,t){if("string"==typeof t)return n.dependencies.has(t)?n.dependencies.get(t):n.fallback(t)}});return function(){return e.apply(t,[r,...arguments])}}}const ie=e=>{if("string"==typeof e&&["","module","application/javascript","application/ecmascript","text/javascript","text/ecmascript"].includes(e.trim().toLowerCase()))return!0;let t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE;if(t||(t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE=new Map),t.has(e))return t.get(e);t.set(e,!1);const n=document.createElement("script");n.setAttribute("type",e),n.textContent=`WEBSANDBOX_PREVENT_SCRIPT_TYPE.set(${JSON.stringify(e)}, true)`,document.head.appendChild(n);const r=t.get(e);return document.head.removeChild(n),r};function ae({catchNextError:e,parent:t,createCSPValidation:n,csp:r,SandboxSecurityError:o}){const i=n(r);return function(n,r,a){const{valid:s,message:c}=e(i).validity(n,r);if(!s)if("warn"===a)t.console.error(new o(c));else if("error"===a)throw new o(c);return s}}function se(){let e=null;return{get:()=>e,set(t){e=t}}}function ce({catchNextError:e,createSanitizer:t,isJavaScriptType:n,parent:r,symbols:{scriptType:o}}){const i=["web-sandbox","web-widget"];return e(t({uponSanitizeElement(e,t){e.tagName&&("script"===t.tagName&&n(e.type)?e.setAttribute("type",o):(r.customElements.get(t.tagName)||e.getAttribute("is")&&r.customElements.get(e.getAttribute("is")))&&(i.includes(t.tagName)||e.parentNode.removeChild()))}}))}function le({bindObject:e,callAndWrapError:t,currentNativeObject:n,evaluate:r,global:o,parent:i,symbols:{initializeCallback:a},toNativeAny:s,toVirtualAny:c,langUtils:{setPrototypeOf:l,defineProperties:u,from:d,getOwnPropertyDescriptor:p,isObject:m,ownKeys:f,construct:h,create:b}}){const g=r(((e,t,n,r,o,i,a,s,c,l,u,d,p,m,f,h,b,g,y)=>{const E=d.name,S=s(f,l),v=S&&S.value;function w(){return t((()=>{let t=this,r=o.get();if(r)e(t,r),y&&n(y,arguments,w);else{const o=a(arguments).map((e=>b(e)));if(void 0===new.target){const e=this?this===c||this.window===c?m:b(this):void 0;return r=d.apply(e,o),g(r)}r=n(d,o),u(r)&&e(t,r)}return v&&(o.set(r),t=v.call(t,...arguments)),t}))}if(d.prototype){const e={constructor:{configurable:!0,value:w,writable:!0},[Symbol.toStringTag]:{configurable:!0,value:d.prototype&&d.prototype[Symbol.toStringTag]||E},...p(f).reduce(((e,t)=>{const n=s(f,t);return e[t]=n,e}),{})};y?(h(w,y),w.prototype=r(y.prototype,e)):i(w.prototype,e),i(w,{prototype:{configurable:!1,enumerable:!1,writable:!1}})}else w.prototype=void 0;return i(w,{name:{value:E,configurable:!0}}),w}));return function(r,y={},E){return g(e,t,h,b,n,u,d,p,o,a,m,r,f,i,y,l,s,c,E)}}function ue({langUtils:{defineProperty:e},nativeCache:t,toNativeAny:n,toVirtualAny:r}){const o=t=>{function o(...e){const o=r(this),i=e.map((e=>r(e))),a=Reflect.apply(t,o,i);return n(a)}return e(o,"name",{value:t.name,configurable:!0}),o};return function(e){if(t.has(e))return t.get(e);const n=o(e);return t.set(e,n),n}}ae.cacheResult=!0,se.cacheResult=!0,ce.cacheResult=!0,le.cacheResult=!0,ue.cacheResult=!0;var de=Object.freeze({__proto__:null,CSSStyleSheet:function({catchNextError:e,documentView:t,toNativeObject:n}){const r=e(t);return{insertRule(t,o){const i=e(n(this));return t.includes(":host")&&r.contains(i.ownerNode)||i.insertRule(t,o),o},addRule(t,o,i){const a=e(n(this));return t.includes(":host")&&r.contains(a.ownerNode)||a.addRule(t,o,i),-1}}},CustomElementRegistry:function({bindObject:e,catchNextError:t,currentNativeObject:n,customElements:r,global:o,langUtils:{create:i,construct:a,setPrototypeOf:s,inherits:c,isArray:l},symbols:{elementDefined:u},toNativeObject:d}){const p=new Map;return{define(e,t,n={}){if(r.has(e))throw new TypeError(`customElements: The "${e}" has been registered`);if(!e.includes("-"))throw new TypeError("Illegal constructor");const i=t.observedAttributes;if(r.set(e,{constructor:t,observedAttributes:l(i)?[...i]:[],options:n}),p.has(e)){let t;for(;t=p.get(e).shift();)t()}o.document.querySelectorAll(n.extends?`${n.extends}[is="${e}"]`:e).forEach((e=>{this.upgrade(e)}))},get(e){const t=r.get(e);return t?t.constructor:void 0},upgrade(o){const l=o.getAttribute("is")||o.localName,p=r.get(l);if(!p||o instanceof p.constructor)return;const m=d(o);n.set(m);const f=a(p.constructor,[]);if(n.set(null),s(o,c(f,i(p.constructor.prototype))),t(m).setAttribute(u,""),e(o,m),p.observedAttributes.length&&o.attributeChangedCallback)for(const e of p.observedAttributes){const t=o.getAttribute(e);t&&o.attributeChangedCallback(e,null,t)}t(m).isConnected&&o.connectedCallback&&o.connectedCallback()},whenDefined:e=>r.get(e)?Promise.resolve():new Promise((t=>{p.has(e)||p.set(e,[]),p.get(e).push(t)}))}},Document:function({catchNextError:e,currentScript:t,global:n,langUtils:{defineProperty:r,from:o,keys:i},parent:a,SandboxSecurityError:s,sanitizer:c,toNativeAny:l,toVirtualAny:u}){const d=new WeakMap,p=e(a.document),m=e=>function(){const t=o(arguments).map((e=>l(e))),n=p[e](...t),r=u(n);return r},f=e=>function(...t){const r={createElement:{name:t[0],options:t[1]},createElementNS:{ns:t[0],name:t[1],options:t[2]}}[e];if(!c.isValidElement(r.name))throw new s(`Forbidden: tag <${r.name} />`);const o=p[e](...t);if(r.options){if(!c.isValidElement(r.options.is))throw new s(`Forbidden: tag <${r.name} is="${r.options.is}" />`);o.setAttribute("is",r.options.is)}const i=u(o);return n.customElements.upgrade(i),i},h={adoptNode:m("adoptNode"),get body(){return this.querySelector("body")},get characterSet(){return p.characterSet},get contentType(){return p.contentType},createAttribute:m("createAttribute"),createAttributeNS:m("createAttributeNS"),createCDATASection:m("createCDATASection"),createComment:m("createComment"),createDocumentFragment:m("createDocumentFragment"),createElement:f("createElement"),createElementNS:f("createElementNS"),createEvent:m("createEvent"),createNodeIterator:m("createNodeIterator"),createProcessingInstruction:m("createProcessingInstruction"),createTextNode:m("createTextNode"),createTreeWalker:m("createTreeWalker"),get currentScript(){return t.get()},get defaultView(){return n},get documentElement(){return this.querySelector("html")},get documentURI(){return p.documentURI},get domain(){return p.domain},get head(){return this.querySelector("head")},get hidden(){return p.hidden},importNode:m("importNode"),get readyState(){return p.readyState},get title(){return this.querySelector("title").textContent},set title(e){this.querySelector("title").textContent=e},get URL(){return p.URL},get visibilityState(){return p.visibilityState}};return i(a.Document.prototype).filter((e=>/^on[\w\W]+$/.test(e))).forEach((e=>{r(h,e,{enumerable:!0,configurable:!0,get(){const t=d.get(this);return t&&t[e]||null},set(t){const n=e.replace("on",""),r=this[e];d.has(this)||d.set(this,{}),r&&this.removeEventListener(n,r),this.addEventListener(n,t),d.get(this)[e]=t}})})),h},Element:function({callAndWrapError:e,catchNextError:t,customElements:n,events:r,langUtils:{from:o},symbols:{prefix:i},SandboxSecurityError:a,sanitizer:s,toNativeAny:c,toNativeObject:l,toVirtualAny:u,toVirtualNodeCreater:d,toVirtualObject:p,windowView:m}){const f=t(m),h=(e,n)=>t(l(e))[n],b=(e,r)=>function(){const[d,p]=r(arguments),m=o(arguments).map((e=>c(e))),f=t(l(this)),h=f.getAttribute(d),b=f.nodeName;if(!s.isValidAttribute(b,d,p)||0===d.indexOf(i)||0===p.indexOf(i)||h&&0===h.indexOf(i))throw new a(`Forbidden: attribute [${d}=${JSON.stringify(p)}]`);const g=f[e](...m),y=f.getAttribute("is")||f.localName,E=f.getAttribute(d);return n.get(y)&&n.get(y).observedAttributes.includes(d)&&this.attributeChangedCallback&&(null!==h||null!==E)&&this.attributeChangedCallback(d,h,E),u(g)},g=e=>{const t=f.getBoundingClientRect();return e.x-=t.x,e.y-=t.y,e},y=(e,t)=>{r.dispatch("mutation",{addedNodes:e,removedNodes:t})};return{get className(){return h(this,"className")},set className(e){this.setAttribute("class",e)},set innerHTML(t){e((()=>{const e=l(this),n=e.isConnected,r=s.sanitize(t),i=o(e.childNodes),a=o(r.childNodes);for(;e.firstChild;)e.removeChild(e.firstChild);"template"===e.nodeName.toLowerCase()?e.content.appendChild(r):e.appendChild(r),n&&y(a,i)}))},get innerHTML(){return h(this,"innerHTML")},set outerHTML(t){e((()=>{const e=l(this),n=e.isConnected,r=s.sanitize(t),i=[e],a=o(r.childNodes);e.parentNode.replaceChild(r,e),n&&y(a,i)}))},get outerHTML(){return h(this,"outerHTML")},insertAdjacentHTML(t,n){e((()=>{const e=l(this),r=e.isConnected,i=s.sanitize(n),a=o(i.childNodes);switch(t.toLowerCase()){case"beforebegin":e.parentNode.insertBefore(i,e);break;case"afterbegin":e.insertBefore(i,e.firstChild);break;case"beforeend":e.appendChild(i);break;case"afterend":e.parentNode.insertBefore(i,e.nextElementSibling);break;default:throw new TypeError(`invalid parameter '${t}'`)}r&&y(a,[])}))},insertAdjacentElement:d("insertAdjacentElement",(e=>[e[1]]),(e=>e[1].isConnected?[e[1]]:[])),before:d("before",(e=>e),(e=>e.filter((e=>e.isConnected)))),append:d("append",(e=>e),(e=>e.filter((e=>e.isConnected)))),after:d("after",(e=>e),(e=>e.filter((e=>e.isConnected)))),remove:d("remove",(()=>[]),((e,t)=>t.isConnected?[t]:[])),getBoundingClientRect(){const e=t(l(this)).getBoundingClientRect();return p(g(e))},getClientRects(){const e=t(l(this)).getClientRects();for(let t=0;t<e.length;t++)g(e[t]);return p(e)},removeAttribute:b("removeAttribute",(e=>[e[0],""])),removeAttributeNS:b("removeAttributeNS",(e=>[e[1],""])),removeAttributeNode:b("removeAttributeNode",(e=>[e[0].name,""])),setAttribute:b("setAttribute",(e=>e)),setAttributeNS:b("setAttributeNS",(e=>[e[1],e[2]])),setAttributeNode:b("setAttributeNode",(e=>[e[0].name,e[0].value])),setAttributeNodeNS:b("setAttributeNodeNS",(e=>[e[0].name,e[0].value])),toggleAttribute:b("toggleAttribute",(e=>[e[0],""]))}},Event:function({catchNextError:e,documentView:t,global:n,parent:r,toNativeObject:o,toVirtualObject:i}){const a=e(t);return{composedPath(){return e(o(this)).composedPath().filter((e=>e===r||e instanceof r.Node&&a.contains(e))).map((e=>e===r?n:i(e)))}}},FocusEvent:function({global:e,toNativeObject:t,toVirtualAny:n}){return{get relatedTarget(){const r=t(this).relatedTarget;return r instanceof e.Object?n(r):null}}},HTMLAnchorElement:function({catchNextError:e,cspValidation:t,toNativeObject:n}){return{click(){t("navigate-to",this.href,"error")&&e(n(this)).click()}}},HTMLFormElement:function({catchNextError:e,cspValidation:t,toNativeObject:n}){return{submit(){t("form-action",this.action,"error")&&t("navigate-to",this.action,"error")&&e(n(this)).submit()}}},HTMLLinkElement:function({catchNextError:e,cspValidation:t,cssStyleSheetFilter:n,global:r,parent:o,symbols:{connectedCallback:i,disabled:a},toNativeObject:s}){return{[i](){const i=e(s(this));i.href&&!t("style-src",i.href,"warn")&&i.setAttribute("type",a);const c=()=>{(()=>{try{return!!i.sheet.cssRules}catch(e){return!1}})()?n(i.sheet):(i.setAttribute("type",a),o.console.error(`Access to stylesheet at '${i.href}' from origin '${r.location.origin}' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.`))};i.addEventListener("load",c),i.addEventListener("error",c)}}},HTMLScriptElement:function({browserUtils:{scriptSourceLoader:e,queueMicrotask:t},catchNextError:n,cspValidation:r,currentNativeObject:o,currentScript:i,evaluate:a,global:s,langUtils:{isNull:c},parent:l,SandboxSecurityError:u,sanitizer:d,symbols:{scriptType:p,initializeCallback:m,connectedCallback:f},toNativeObject:h}){const b=n(l.URL),g=p,y=e=>n(h(e)),E=(e,n=null,r={})=>{i.set(n);try{a(e,r)}catch(e){t((()=>{throw e}))}i.set(null)};return{[m](){return n(o.get()).setAttribute("type",g),this},get src(){const e=y(this).getAttribute("src");return c(e)?"":new b(e,this.baseURI).href},set src(e){const t=y(this);((e,t,n)=>{if(!d.isValidAttribute(e.nodeName,t,n))throw new u(`Forbidden: attribute [${t}=${JSON.stringify(n)}]`)})(t,"src",e),t.setAttribute("src",e)},get type(){const e=y(this).getAttribute("type");return c(e)?"":e},set type(e){y(this).setAttribute("type",e)},[f](){y(this).getAttribute("type")===g&&(this.src?r("script-src",this.src,"warn")&&e(this.src).then((e=>{E(e,this),this.dispatchEvent(new s.Event("load"))}),(()=>{this.dispatchEvent(new s.Event("error"))})):this.textContent&&E(this.textContent,this))}}},HTMLStyleElement:function({catchNextError:e,toNativeObject:t,symbols:{connectedCallback:n},cssStyleSheetFilter:r}){return{[n](){const n=e(t(this)).sheet;r(n)}}},MouseEvent:function({catchNextError:e,parent:t,toNativeObject:n,windowView:r}){const o=e(r),i=e=>e.view!==t;return{get clientX(){const t=e(n(this));if(!i(t)){const e=o.getBoundingClientRect();return t.clientX-e.x}return t.clientX},get clientY(){const t=e(n(this));if(!i(t)){const e=o.getBoundingClientRect();return t.clientY-e.y}return t.clientY},get x(){return this.clientX},get y(){return this.clientY},get pageX(){return o.scrollLeft+this.clientX},get pageY(){return o.scrollTop+this.clientY}}},Node:function({catchNextError:e,global:t,parent:n,toNativeObject:r,toVirtualNodeCreater:o}){const i=n.document,a=(t,n)=>e(t)[n];return{get ownerDocument(){const e=t.document;return e===this?null:e},get nodeName(){const e=t.document===this?i:r(this);return a(e,"nodeName")},get nodeType(){const e=t.document===this?i:r(this);return a(e,"nodeType")},appendChild:o("appendChild",(e=>[e[0]]),(e=>e[0].isConnected?[e[0]]:[])),insertBefore:o("insertBefore",(e=>[e[0]]),(e=>e[0].isConnected?[e[0]]:[])),replaceChild:o("replaceChild",(e=>[e[0]]),(e=>[e[1]])),removeChild:o("removeChild",(()=>[]),(e=>[e[0]]))}},ShadowRoot:function({callAndWrapError:e,events:t,toNativeObject:n,sanitizer:r,langUtils:{from:o}}){return{get innerHTML(){return e((()=>n(this).innerHTML))},set innerHTML(i){e((()=>{const e=n(this),a=r.sanitize(i),s=e.isConnected,c=o(e.childNodes),l=o(a.childNodes);for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(a),s&&t.dispatch("mutation",{addedNodes:l,removedNodes:c})}))}}},Storage:function({callAndWrapError:e,catchNextError:t,currentNativeObject:n,id:r,langUtils:{inherits:o,isString:i,keys:a},symbols:{prefix:s,initializeCallback:c},toNativeObject:l,toVirtualObject:u}){const d=`${s}${r}.`,p=e=>t(l(e)),m=e=>a(e).filter((e=>0===e.indexOf(d)));return{[c](){return e((()=>o(this,new Proxy(n.get(),{get(e,t){const n=u(e);return i(t)?n.getItem(t):void 0},set(e,t,n){const r=u(e);return!!i(t)&&(r.setItem(t,n),!0)},deleteProperty(e,t){const n=u(e);return!!i(t)&&(n.removeItem(t),!0)}}))))},get length(){return e((()=>m(l(this)).length))},key(t){return e((()=>m(l(this)).map((e=>e.replace(d,"")))[t]))},getItem(e){return p(this).getItem(`${d}${e}`)},setItem(e,t){return p(this).setItem(`${d}${e}`,t)},removeItem(e){return p(this).removeItem(`${d}${e}`)},clear(){const t=p(this);e((()=>m(t).forEach((e=>t.removeItem(e)))))}}},Touch:function({catchNextError:e,toNativeObject:t,windowView:n}){const r=e(n);return{get clientX(){const n=e(t(this)),o=r.getBoundingClientRect();return n.clientX-o.x},get clientY(){const n=e(t(this)),o=r.getBoundingClientRect();return n.clientY-o.y},get pageX(){return r.scrollLeft+this.clientX},get pageY(){return r.scrollTop+this.clientY}}},XMLHttpRequest:function({callAndWrapError:e,cspValidation:t,parent:n,toNativeObject:r}){return{open(){return e((()=>{const e=new n.URL(arguments[1],n.document.baseURI);t("connect-src",e.href,"error")&&r(this).open(...arguments)}))}}}});const pe=(e,t=/^(on)[\w]+/)=>Object.keys("string"==typeof e?window[e].prototype:e).filter((e=>t.test(e)));var me,fe={allowInterfaces:{AggregateError:"*",AnalyserNode:"*",Animation:"*",AnimationEffect:"*",AnimationEvent:"*",AnimationPlaybackEvent:"*",AnimationTimeline:"*",atob:"*",Attr:"*",Audio:"*",AudioBuffer:"*",AudioBufferSourceNode:"*",AudioContext:"*",AudioDestinationNode:"*",AudioListener:"*",AudioNode:"*",AudioParam:"*",AudioParamMap:"*",AudioProcessingEvent:"*",AudioScheduledSourceNode:"*",BaseAudioContext:"*",BeforeUnloadEvent:"*",Blob:"*",BlobEvent:"*",blur:"*",btoa:"*",ByteLengthQueuingStrategy:"*",cancelAnimationFrame:"*",CanvasCaptureMediaStreamTrack:"*",CanvasGradient:"*",CanvasPattern:"*",CanvasRenderingContext2D:"*",CDATASection:"*",ChannelMergerNode:"*",ChannelSplitterNode:"*",CharacterData:"*",clearInterval:"*",clearTimeout:"*",Clipboard:"*",ClipboardEvent:"*",ClipboardItem:"*",close:"*",closed:"*",Comment:"*",CompositionEvent:"*",CompressionStream:"*",console:"*",ConstantSourceNode:"*",ConvolverNode:"*",CountQueuingStrategy:"*",createImageBitmap:"*",CSS:"*",CSS2Properties:"*",CSSAnimation:"*",CSSConditionRule:"*",CSSFontFaceRule:"*",CSSGroupingRule:"*",CSSImageValue:"*",CSSImportRule:"*",CSSKeyframeRule:"*",CSSKeyframesRule:"*",CSSKeywordValue:"*",CSSMathInvert:"*",CSSMathMax:"*",CSSMathMin:"*",CSSMathNegate:"*",CSSMathProduct:"*",CSSMathSum:"*",CSSMathValue:"*",CSSMatrixComponent:"*",CSSMediaRule:"*",CSSNamespaceRule:"*",CSSNumericArray:"*",CSSNumericValue:"*",CSSPageRule:"*",CSSPerspective:"*",CSSPositionValue:"*",CSSPropertyRule:"*",CSSRotate:"*",CSSRule:"*",CSSRuleList:"*",CSSScale:"*",CSSSkew:"*",CSSSkewX:"*",CSSSkewY:"*",CSSStyleDeclaration:"*",CSSStyleRule:"*",CSSStyleSheet:"*",CSSStyleValue:"*",CSSSupportsRule:"*",CSSTransformComponent:"*",CSSTransformValue:"*",CSSTransition:"*",CSSTranslate:"*",CSSUnitValue:"*",CSSUnparsedValue:"*",CSSVariableReferenceValue:"*",CustomElementRegistry:"*",customElements:"*",CustomEvent:"*",DataTransfer:"*",DataTransferItem:"*",DataTransferItemList:"*",DelayNode:"*",DeviceMotionEvent:"*",DeviceMotionEventAcceleration:"*",DeviceMotionEventRotationRate:"*",DeviceOrientationEvent:"*",devicePixelRatio:"*",Document:["activeElement","adoptNode","body","characterSet","childElementCount","children","contentType","createAttribute","createAttributeNS","createCDATASection","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createNodeIterator","createProcessingInstruction","createTextNode","createTreeWalker","defaultView","documentElement","documentURI","domain","firstElementChild","getAnimations","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","head","hidden","importNode","lastElementChild",...pe("Document"),"querySelector","querySelectorAll","readyState","styleSheets","title","URL","visibilityState"],DocumentFragment:["append","childElementCount","children","firstElementChild","getElementById","lastElementChild","prepend","querySelector","querySelectorAll","replaceChildren"],DocumentTimeline:"*",DOMError:"*",DOMException:"*",DOMMatrix:"*",DOMMatrixReadOnly:"*",DOMPoint:"*",DOMPointReadOnly:"*",DOMQuad:"*",DOMRect:"*",DOMRectList:"*",DOMRectReadOnly:"*",DOMStringList:"*",DOMStringMap:"*",DOMTokenList:"*",DragEvent:"*",DynamicsCompressorNode:"*",Element:["after","animate","append","attachShadow","attributes","attributeStyleMap","before","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","computedStyleMap","firstElementChild","getAnimations","getAttribute","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","hasAttribute","hasAttributeNS","hasAttributes","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","namespaceURI","nextElementSibling","outerHTML","part","prefix","previousElementSibling","querySelector","querySelectorAll","remove","removeAttribute","removeAttributeNode","removeAttributeNS","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNode","setAttributeNodeNS","setAttributeNS","shadowRoot","tagName","toggleAttribute",...pe("Element",/^(aria|on)[\w]+/)],ElementInternals:"*",ErrorEvent:"*",Event:["bubbles","cancelable","currentTarget","defaultPrevented","eventPhase","initEvent","preventDefault","stopImmediatePropagation","stopPropagation","target","timeStamp","type"],EventTarget:["addEventListener","dispatchEvent","removeEventListener"],fetch:"*",focus:"*",FocusEvent:"*",FontFace:"*",FontFaceSetLoadEvent:"*",GainNode:"*",getComputedStyle:"*",HashChangeEvent:"*",HTMLAllCollection:"*",HTMLAnchorElement:"*",HTMLAreaElement:"*",HTMLAudioElement:"*",HTMLQuoteElement:"*",HTMLBodyElement:pe("HTMLBodyElement"),HTMLBRElement:"*",HTMLButtonElement:"*",HTMLCanvasElement:"*",HTMLCollection:"*",HTMLTableCaptionElement:"*",HTMLTableColElement:"*",HTMLDataElement:"*",HTMLDataListElement:"*",HTMLDocument:"*",HTMLElement:["accessKey","autofocus","blur","click","dataset","dir","draggable","focus","hidden","innerText","lang","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth",...pe("HTMLElement"),"spellcheck","style","tabIndex","title"],HTMLModElement:"*",HTMLDetailsElement:"*",HTMLDialogElement:["close","open","returnValue","show"],HTMLDivElement:"*",HTMLDListElement:"*",HTMLFieldSetElement:"*",HTMLFormElement:"*",HTMLHeadingElement:"*",HTMLHeadElement:"*",HTMLHRElement:"*",HTMLHtmlElement:"*",HTMLImageElement:"*",HTMLInputElement:"*",HTMLLabelElement:"*",HTMLLegendElement:"*",HTMLLIElement:"*",HTMLLinkElement:"*",HTMLMapElement:"*",HTMLMediaElement:"*",HTMLMeterElement:"*",HTMLMenuElement:"*",HTMLOListElement:"*",HTMLOptGroupElement:"*",HTMLOptionElement:"*",HTMLOptionsCollection:"*",HTMLOutputElement:"*",HTMLParagraphElement:"*",HTMLPictureElement:"*",HTMLPreElement:"*",HTMLProgressElement:"*",HTMLScriptElement:"*",HTMLSelectElement:"*",HTMLSlotElement:["name"],HTMLSourceElement:"*",HTMLSpanElement:"*",HTMLStyleElement:"*",HTMLTableElement:"*",HTMLTableSectionElement:"*",HTMLTableCellElement:"*",HTMLTemplateElement:"*",HTMLTextAreaElement:"*",HTMLTimeElement:"*",HTMLTitleElement:"*",HTMLTableRowElement:"*",HTMLTrackElement:"*",HTMLUListElement:"*",HTMLUnknownElement:"*",HTMLVideoElement:"*",WebWidgetPortalRegistry:"*",HTMLWebSandboxBaseInterface:"*",HTMLWebSandboxElement:["contentDocument","contentWindow","csp","evaluate","name","src","text"],HTMLLifecycleExtension:"*",HTMLWebWidgetElement:["application","bootstrap","csp","inactive","load","loading","mount","name","portals","sandboxed","slot","src","status","text","unload","unmount","update","NOT_LOADED","LOADING_SOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UPDATING","UNMOUNTING","UNLOADING","LOAD_ERROR","BOOTSTRAPP_ERROR","MOUNT_ERROR","UPDAT_ERROR","UNMOUNT_ERROR","UNLOAD_ERROR","SKIP_BECAUSE_BROKEN"],IIRFilterNode:"*",Image:"*",ImageBitmap:"*",ImageBitmapRenderingContext:"*",ImageCapture:"*",ImageData:"*",InputEvent:"*",Keyboard:"*",KeyboardEvent:"*",KeyboardLayoutMap:"*",KeyframeEffect:"*",localStorage:"*",Location:"*",location:"*",matchMedia:"*",MediaCapabilities:"*",MediaDeviceInfo:"*",MediaDevices:"*",MediaElementAudioSourceNode:"*",MediaError:"*",MediaKeyMessageEvent:"*",MediaKeys:"*",MediaKeySession:"*",MediaKeyStatusMap:"*",MediaKeySystemAccess:"*",MediaList:"*",MediaMetadata:"*",MediaQueryList:"*",MediaQueryListEvent:"*",MediaRecorder:"*",MediaSession:"*",MediaSource:"*",MediaStream:"*",MediaStreamAudioDestinationNode:"*",MediaStreamAudioSourceNode:"*",MediaStreamTrack:"*",MediaStreamTrackEvent:"*",menubar:"*",MessageChannel:"*",MessageEvent:"*",MessagePort:"*",MouseEvent:["altKey","button","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","relatedTarget","shiftKey","x","y"],MutationObserver:"*",MutationRecord:"*",name:"*",NamedNodeMap:"*",NavigationPreloadManager:"*",Navigator:["language","languages","userAgent"],navigator:"*",Node:["appendChild","ATTRIBUTE_NODE","baseURI","CDATA_SECTION_NODE","childNodes","cloneNode","COMMENT_NODE","contains","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","ELEMENT_NODE","ENTITY_NODE","ENTITY_REFERENCE_NODE","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isEqualNode","lastChild","nextSibling","nodeName","nodeType","nodeValue","normalize","NOTATION_NODE","ownerDocument","parentNode","previousSibling","PROCESSING_INSTRUCTION_NODE","removeChild","replaceChild","textContent","TEXT_NODE"],NodeFilter:"*",NodeIterator:"*",NodeList:"*",Notification:"*",OfflineAudioCompletionEvent:"*",OfflineAudioContext:"*",offscreenBuffering:"*",OffscreenCanvas:"*",OffscreenCanvasRenderingContext2D:"*",...(me=pe(window),me.reduce(((e,t)=>(e[t]="*",e)),{})),OverconstrainedError:"*",PageTransitionEvent:"*",Path2D:"*",queueMicrotask:"*",RadioNodeList:"*",requestAnimationFrame:"*",requestIdleCallback:"*",ResizeObserver:"*",ResizeObserverEntry:"*",ResizeObserverSize:"*",setInterval:"*",setTimeout:"*",ShadowRoot:["activeElement","delegatesFocus","getAnimations","host","innerHTML","mode","styleSheets"],SourceBuffer:"*",SourceBufferList:"*",speechSynthesis:"*",SpeechSynthesisErrorEvent:"*",SpeechSynthesisEvent:"*",SpeechSynthesisUtterance:"*",Storage:["clear","getItem","key","length","removeItem","setItem"],StorageEvent:"*",StorageManager:"*",styleMedia:"*",StylePropertyMap:"*",StylePropertyMapReadOnly:"*",StyleSheet:"*",StyleSheetList:"*",SubmitEvent:"*",Text:["wholeText"],TextDecoder:"*",TextDecoderStream:"*",TextEncoder:"*",TextEncoderStream:"*",TextEvent:"*",TextMetrics:"*",TextTrack:"*",TextTrackCue:"*",TextTrackCueList:"*",TextTrackList:"*",Touch:"*",TouchEvent:"*",TouchList:"*",TrackEvent:"*",TransformStream:"*",TransitionEvent:"*",TreeWalker:"*",TrustedHTML:"*",TrustedScript:"*",TrustedScriptURL:"*",TrustedTypePolicy:"*",TrustedTypePolicyFactory:"*",trustedTypes:"*",UIEvent:["detail"],URL:"*",URLSearchParams:"*",VideoPlaybackQuality:"*",WebGL2RenderingContext:"*",WebGLActiveInfo:"*",WebGLBuffer:"*",WebGLContextEvent:"*",WebGLFramebuffer:"*",WebGLProgram:"*",WebGLQuery:"*",WebGLRenderbuffer:"*",WebGLRenderingContext:"*",WebGLSampler:"*",WebGLShader:"*",WebGLShaderPrecisionFormat:"*",WebGLSync:"*",WebGLTexture:"*",WebGLTransformFeedback:"*",WebGLUniformLocation:"*",WebGLVertexArrayObject:"*",WheelEvent:"*",Window:[],WritableStream:"*",WritableStreamDefaultWriter:"*",XMLHttpRequest:"*",XMLHttpRequestEventTarget:"*",XMLHttpRequestUpload:"*"}},he=["Array","AudioParamMap","CSSKeyframesRule","CSSNumericArray","CSSRuleList","CSSStyleDeclaration","CSSTransformValue","CSSUnparsedValue","DataTransferItemList","DOMRectList","DOMStringList","DOMTokenList","EventCounts","FileList","FormData","Headers","HTMLAllCollection","HTMLCollection","HTMLFormControlsCollection","HTMLFormElement","HTMLOptionsCollection","HTMLSelectElement","KeyboardLayoutMap","MediaKeyStatusMap","MediaList","MIDIInputMap","MIDIOutputMap","MimeTypeArray","NamedNodeMap","NodeList","Object","Plugin","PluginArray","Promise","RadioNodeList","RTCStatsReport","SourceBufferList","StylePropertyMap","StylePropertyMapReadOnly","StyleSheetList","SVGLengthList","SVGNumberList","SVGPointList","SVGStringList","SVGTransformList","TextTrackCueList","TextTrackList","TouchList","XRAnchorSet","XRInputSourceArray"];function be({createVirtualClass:e,currentNativeObject:t,evaluate:n,global:r,injector:o,toVirtualAny:i,virtualCache:a,langUtils:{defineProperty:s,getOwnPropertyDescriptor:c,getOwnPropertyNames:l,getPrototypeOf:u,hasOwnProperty:d,inherits:p,isFunction:m,ownKeys:f},parent:h,SandboxSecurityError:b,symbols:{initializeCallback:g},toLiveVirtuaObject:y}){const E=u(Object),S=u(r.Object),v=new Map,w=fe.allowInterfaces,C=new Set(["arguments","caller","length","name","prototype"]),T=new Set(["constructor"]),N=e=>{return"*"===w[e]?(t=h[e],[...l(t).filter((e=>!C.has(e))),...l(t.prototype||{}).filter((e=>!T.has(e)))]):w[e];var t};const O=n(((e,t,n)=>function(){return e(this,t(n.get()))}))(p,y,t);function A(t,r){if(a.has(t))return a.get(t);if(t===E)return S;const l=t.name;if(!w[l])throw new b(`toVirtualClass: "${l}" is not in the allowed list`);const p=u(t);p&&!a.get(p)&&A(p);const h=function(e){const t=v.get(e);if(t)return t;if(de[e]){const t=n(de[e]),r=o.resolve(t)();return v.set(e,r),r}return{}}(l);he.includes(l)&&(h[g]=O);const y=a.get(p),C=e(t,h,y);return function(e,t,n){const r=(e,t)=>{const n=c(e,t);if(!n){const n=u(e);return n?r(n,t):void 0}return n},o=(e,t,n)=>{if(!d(e,n)){const o=r(t,n);o&&(f(o).forEach((e=>{o[e]=i(o[e])})),s(e,n,o))}};n.forEach((n=>{o(e,t,n),m(t)&&t.prototype&&o(e.prototype,t.prototype,n)}))}(C,r||t,N(l)),a.set(t,C),C}return function(){return A(...arguments)}}function ge({callAndWrapError:e,evaluate:t,langUtils:{defineProperties:n},toNativeAny:r,toVirtualAny:o,virtualCache:i}){const a=t(((e,t,n,r,o)=>{function i(...n){return e((()=>{const e=r(this),i=n.map((e=>r(e))),a=Reflect.apply(t,e,i);return o(a)}))}return n(i,{name:{value:t.name,configurable:!0}}),i}));return function(t){if(i.has(t))return i.get(t);const s=a(e,t,n,r,o);return i.set(t,s),s}}function ye(){let e=null;return{get:()=>e,set(t){e=t}}}function Ee({browserUtils:{Events:e}}){return new e}function Se({evaluate:e}){return e((()=>class WebSandboxSecurityError extends TypeError{constructor(){super(...arguments),this.name="WebSandboxSecurityError"}}))()}function ve({windowView:e}){const t=`${e.localName}.`;return{prefix:t,scriptType:`${t}script`,disabled:`${t}disabled`,elementDefined:`${t}defined`,initializeCallback:Symbol("initializeCallback"),connectedCallback:Symbol("connectedCallback"),disconnectedCallback:Symbol("disconnectedCallback"),attributeChangedCallback:Symbol("attributeChangedCallback")}}be.cacheResult=!0,ge.cacheResult=!0,ye.cacheResult=!0,Ee.cacheResult=!0,Se.cacheResult=!0,ve.cacheResult=!0;var we=Object.freeze({__proto__:null,catchNextError:function({callAndWrapError:e,langUtils:{deleteProperty:t,get:n,isFunction:r,set:o}},i){return new Proxy(i,{deleteProperty(){return e((()=>t(...arguments)))},get(t,o,i){const a=e((()=>n(t,o)));return r(a)?function(){return e((()=>a.apply(this===i?t:this,arguments)))}:a},set:(t,n,r)=>e((()=>o(t,n,r)))})},cspValidation:ae,cssStyleSheetFilter:function({callAndWrapError:e,cssStyleSheetFilter:t,documentView:n,parent:r,symbols:{elementDefined:o}},i){return e((()=>{const e=i.cssRules;let a=e.length-1;for(;a>=0;){const s=e[a];switch(!0){case s instanceof r.CSSImportRule||s instanceof r.CSSMediaRule:i.deleteRule(a);break;case s instanceof r.CSSSupportsRule:t(s);break;case s instanceof r.CSSStyleRule:if(s.selectorText.includes(":host")&&n.contains(i.ownerNode)){const e=s.selectorText.split(",").filter((e=>!e.includes(":host"))).join(",");if(0!==e.length){const t=s.cssText.replace(/[^{]*/,e);i.insertRule(t,a+1)}i.deleteRule(a)}else if(s.selectorText.includes(":defined")){const e=s.cssText.replace(":defined",`[${o}]`.replace(".","\\."));i.insertRule(e,a)}}a--}}))},currentScript:se,sanitizer:ce,toVirtualNodeCreater:function({callAndWrapError:e,events:t,langUtils:{from:n},parent:r,toNativeAny:o,toNativeObject:i,toVirtualAny:a},s,c,l){return function(){return e((()=>{const e=r.Node.DOCUMENT_FRAGMENT_NODE;let u;const d=i(this),p=n(arguments).map((e=>o(e))),m=d.isConnected;m&&(u={addedNodes:c(p,d).map((t=>t.nodeType===e?[...t.childNodes]:t)).flat(1),removedNodes:l(p,d)});const f=d[s](...p);return m&&t.dispatch("mutation",u),a(f)}))}},bindObject:function({nativeCache:e,virtualCache:t},n,r){e.set(n,r),t.set(r,n)},callAndWrapError:function({global:e,langUtils:{apply:t,isObject:n},toVirtualAny:r},o,i,a=[]){try{return t(o,i,a)}catch(t){if(n(t)&&t instanceof e.Object)throw t;throw r(t)}},createVirtualClass:le,toLiveVirtuaObject:function({toNativeAny:e,toVirtualAny:t,callAndWrapError:n},r){return new Proxy(r,["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"].reduce(((r,o)=>(r[o]=(...r)=>{const i=r.map((t=>e(t))),a=n(Reflect[o],Reflect,i);return t(a)},r)),{}))},toNativeAny:function({langUtils:{isObject:e,isFunction:t},toNativeObject:n,toNativeFunction:r},o){return e(o)?n(o):t(o)?r(o):o},toNativeFunction:ue,toNativeObject:function({nativeCache:e},t){const n=e.get(t);return n||t},toVirtualAny:function({langUtils:{isObject:e,isFunction:t},toVirtualObject:n,toVirtualFunction:r},o){return e(o)?n(o):t(o)?r(o):o},toVirtualClass:be,toVirtualFunction:ge,toVirtualObject:function({bindObject:e,browserUtils:{queueMicrotask:t},currentNativeObject:n,documentView:r,global:o,langUtils:{construct:i,toString:a},parent:s,SandboxSecurityError:c,toVirtualClass:l,virtualCache:u},d){if(u.has(d))return u.get(d);if(d instanceof o.Object)return d;const p=d.constructor,m=p&&l(p);if(!m||[s,s.document].includes(d)||d instanceof s.Node&&d.isConnected&&!function(e,t){if(e.contains(t))return!0;if(e.ownerDocument.contains(t))return!1;let n=t;do{if(n=n.getRootNode().host,n===e.host)return!0}while(n);return!1}(r,d))throw t((()=>{s.console.error("[DEBUG] SandboxSecurityError:","toVirtualObject(",d,")")})),new c(`Forbidden: ${a(d)}`);n.set(d);const f=i(m,[]);return n.set(null),e(f,d),f},currentNativeObject:ye,events:Ee,SandboxSecurityError:Se,symbols:ve});let Ce;const Te="function"==typeof window.queueMicrotask?window.queueMicrotask:e=>(Ce||(Ce=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)));var Ne=Object.freeze({__proto__:null,queueMicrotask:Te,Events:class Events{constructor(){this.eventTarget=new EventTarget}add(e,t){this.eventTarget.addEventListener(e,(({detail:e})=>t(e)))}dispatch(e,t){this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t}))}},scriptSourceLoader:function(e,t={}){return fetch(e,{credentials:"same-origin",...t}).then((t=>{if(!t.ok)throw Error([t.status,t.statusText,e].join(", "));const n=/(\/\/# sourceURL=)((https?:\/\/)?([\w-])+\.{1}([a-zA-Z]{2,63})([/\w-]*)*\/?\??([^#\n\r]*)?)/,r=t.headers.get("content-type");if(!r||!/^(text|application)\/(x-)?javascript(;|$)/.test(r))throw Error(r);return t.text().then((t=>(n.test(t)?t=t.replace(n,((t,n,r)=>`${n}${URL(r,e).href}`)):t+=`\n//# sourceURL=${e}`,t)))}))}});let Oe;const Ae=new WeakMap;function Me(e){function t(){try{const t=Ae.get(this)(window[e]);return Reflect.defineProperty(this,e,{value:t,writable:!0,enumerable:!1,configurable:!0}),t}catch(e){return null}}return Reflect.setPrototypeOf(t,null),t}var Le=Object.freeze({__proto__:null,WindowProperties:function({animationFrameList:e,callAndWrapError:t,catchNextError:n,cspValidation:r,debug:o,documentView:i,global:a,id:s,intervalList:c,langUtils:{defineProperties:l,entries:u,has:d,setPrototypeOf:p},parent:m,SandboxSecurityError:f,timeoutList:h,toNativeObject:b,toVirtualObject:g}){let y;const E=g(i),S=n(m),v=S.document,w=n(v),C=S.location,T=n(C),N=n(m.URL),O=(e,t)=>{const o=!["href","assign","replace"].includes(e),i=new N(w.baseURI),a=n(i);if(o?d(a,e)&&(a[e]=t):a.href=(e=>new N(e,w.baseURI))(t).href,["javascript:","blob:","data:","filesystem:"].includes(a.protocol))throw new f(`Forbidden: "${a.protocol}"`);r("navigate-to",a.href,"error")&&("reload"===e?T[e](t):["assign","replace"].includes(e)?T[e](a.href):T.href=a.href)};return{console:u(m.console).reduce(((e,[n,r])=>(o?(e[n]=r,p(r,null)):e[n]=function(){t(r,this,arguments)},e)),{}),get customElements(){return g(S.customElements)},get localStorage(){return g(S.localStorage)},name:s,get navigator(){return g(S.navigator)},get self(){return a},get window(){return a},get document(){return E},get location(){return y||(y=l(g(C),{...["hash","host","hostname","href","origin","password","pathname","port","protocol","search","username"].reduce(((e,t)=>(e[t]={enumerable:!0,get:()=>T[t],set(e){O(t,e)}},e)),{}),...["assign","reload","replace"].reduce(((e,t)=>(e[t]={enumerable:!0,value(e){O(t,e)}},e)),{}),toString:{enumerable:!0,value(){return this.href}}}),y)},set location(e){this.location.href=e},close(){if(!a.closed){const{dispatchEvent:t,clearTimeout:n,clearInterval:r,cancelAnimationFrame:o,document:i,Event:s}=a;t(new s("beforeunload")),t(new s("pagehide")),t(new s("unload")),h.forEach((e=>n(e))),c.forEach((e=>r(e))),e.forEach((e=>o(e))),i.removeChild(i.documentElement),a.closed=!0}},getComputedStyle(e,t){const n=b(e),r=S.getComputedStyle(n,t);return g(r)},requestAnimationFrame(t,...n){return e.push(S.requestAnimationFrame(t.bind(this),...n))},cancelAnimationFrame(t){const n=e.indexOf(t);-1!==n&&(e.splice(n,1),S.cancelAnimationFrame(t))}}},WindowOrWorkerGlobalScope:function({catchNextError:e,cspValidation:t,intervalList:n,langUtils:{isString:r},parent:o,SandboxSecurityError:i,timeoutList:a,toVirtualFunction:s}){const c=e(o),l=e(c.document),u=e(o.URL),d=s(o.fetch);return{setTimeout(e,...t){if(r(e))throw new i("The first parameter must be a function");return a.push(c.setTimeout(e.bind(this),...t))},clearTimeout(e){const t=a.indexOf(e);-1!==t&&(a.splice(t,1),c.clearTimeout(e))},setInterval(e,...t){if(r(e))throw new i("The first parameter must be a function");return n.push(c.setInterval(e.bind(this),...t))},clearInterval(e){const t=n.indexOf(e);-1!==t&&(n.splice(t,1),c.clearInterval(e))},fetch(){const e=arguments[0],n=(o=r(e)?e:e.url,new u(o,l.baseURI));var o;return t("connect-src",n.href,"error"),d(...arguments)}}}});var Re=Object.freeze({__proto__:null,installBOMInterfaces:function({toVirtualClass:e,global:t,langUtils:{defineProperties:n,keys:r,isFunction:o},parent:i}){Oe||(Oe=r(fe.allowInterfaces).filter((e=>o(i[e])&&!t[e])).reduce(((e,t)=>(e[t]={enumerable:!1,configurable:!0,get:Me(t)},e)),{})),Ae.set(t,e),n(t,Oe)},installContainLayout:function({parent:e,symbols:{prefix:t},windowView:n}){const r=`${t}style`;if(!e.document.getElementById(r)){const t=e.document.createElement("style"),o="contain"in n.style?"contain: layout":"transform: scale(1)";t.textContent=`${n.localName} { ${o}; overflow: hidden; }`,t.id=r,e.document.head.appendChild(t)}},installHooks:function({cspValidation:e,events:t,global:n,symbols:r,toVirtualObject:o,parent:i,langUtils:{isString:a}}){function s(t){e("navigate-to",t.target.href,"warn")||t.preventDefault()}function c(t){let n=t.target.action;const{submitter:r}=t;if(r){r.getAttribute("formaction")&&(n=r.formAction)}e("form-action",n,"warn")&&e("navigate-to",n,"warn")||t.preventDefault()}function l(e){if(a(e))return;const t=o(e),i=e.localName,u=n.customElements.get(1===t.nodeType&&t.getAttribute("is")||t.localName);t[r.connectedCallback]?t[r.connectedCallback]():!u||t instanceof u?u&&t.connectedCallback&&t.connectedCallback():n.customElements.upgrade(t),"a"===i?e.addEventListener("click",s,!0):"form"===i&&e.addEventListener("submit",c,!0),e.childNodes.forEach(l)}function u(e){const t=o(e),i=e.localName;t[r.disconnectedCallback]?t[r.disconnectedCallback]():n.customElements.get(t.localName)&&t.disconnectedCallback&&t.disconnectedCallback(),"a"===i?e.removeEventListener("click",s):"form"===i&&e.removeEventListener("submit",c),e.childNodes.forEach(u)}i.addEventListener("hashchange",(e=>{const t=o(new e.constructor(e.type,{newUrl:e.newURL,oldURL:e.oldURL}));n.dispatchEvent(t)})),t.add("mutation",(({addedNodes:e,removedNodes:t})=>{try{t.forEach(u),e.forEach(l)}catch(e){i.console.error(e)}}))},installDefaultNodes:function({documentView:e,parent:t,title:n}){const r=t.document,o=r.createElement("html"),i=r.createElement("head"),a=r.createElement("title"),s=r.createElement("body");a.textContent=n,i.appendChild(a),o.appendChild(i),o.appendChild(s),e.appendChild(o)},installEsTraps:function({virtualCache:e,createVirtualClass:t,currentNativeObject:n,parent:r,symbols:{initializeCallback:o},toLiveVirtuaObject:i,langUtils:{inherits:a},evaluate:s}){return s(((e,t,n,r,o,i,a)=>["Array","Error","EvalError","Object","Promise","RangeError","ReferenceError","SyntaxError","TypeError","URIError"].map((s=>{const c=r[s],l=t(c,{[o](){return a(this,i(n.get()))}});return e.set(c,l),l}))))(e,t,n,r,o,i,a)},installView:function({bindObject:e,currentNativeObject:t,documentView:n,langUtils:{construct:r,setPrototypeOf:o,create:i},parent:a,toVirtualClass:s,windowView:c,global:l}){const u=s(a.Window,c.constructor),d=s(a.Document,n.constructor),p=s(a.HTMLDocument),[m,f]=[[c,u,l],[n,p]].map((([n,o,i])=>(t.set(n),i=i||r(o,[]),t.set(null),e(i,n),i)));return o(l,i(u.prototype)),{Window:u,Document:d,window:m,document:f}},installWindowProperties:function({evaluate:e,injector:t,global:n,langUtils:{keys:r,mixin:o}}){r(Le).forEach((r=>{const i=e(Le[r]),a=t.resolve(i)();o(n,a)}))}});const xe=e=>e.replace(/^\/|\/$/g,"").split("/");const Pe=["connect-src","script-src","style-src"];class CSPValidation{constructor(e){this.policy={..."string"==typeof e?oe(e):e}}validity(e,t){let n=!0,r="",o=this.policy[e];return!o&&Pe.includes(e)&&(e="default-src",o=this.policy[e]||["*"]),o?(n=o.length&&o.some((e=>function(e,t,n=document.location){e=e.toLowerCase(),t=t.toLowerCase();const r=new URL(t),o=/^(?:(?<scheme>[a-z][a-z0-9+.-]*):\/\/)?(?<host>\[[0-9A-F:.]{2,}\]|(?:[^'\/?#:]|%[0-9A-F]{2})+)(?::(?<port>[^\/?]*))?(?<path>[^?#]*)?$/i;if("*"===e)return!["blob:","data:","filesystem:"].includes(r.protocol);if(e.match(/^[a-z][a-z0-9+.-]*:$/i))return r.protocol===e;if(e.match(o)){const{scheme:t,host:i,port:a,path:s}=e.match(o).groups;if(!r.hostname)return!1;const c=r.protocol.replace(":",""),l=r.hostname,u=r.port,d=r.pathname,p=xe(d);if(t&&c!==t)return!1;if(!t){const e=n.protocol.replace(":","");if("http"===e&&"http"!==c&&"https"!==c||"http"!==e&&c!==e)return!1}if(i.startsWith("*")){if(!l.endsWith(i.slice(1)))return!1}else if(l!==i)return!1;const m=/^\[.*\]$/;if(/^[\d.]+$/.test(i)&&"127.0.0.1"!==i||m.test(i))return!1;if(a){if("*"!==a&&u!==a)return!1}else if(!["",{ftp:21,http:80,https:443,ws:80,wss:443}[c]].includes(u))return!1;if(s){const e=!s.endsWith("/"),t=xe(s);if(t.length>p.length)return!1;for(let e of t){if(e=decodeURIComponent(e),decodeURIComponent(p[0])!==e)return!1;p.shift()}if(e&&p.length>0)return!1}return!0}if("'self'"===e){const{protocol:e,hostname:t,port:o}=n;return r.protocol===e&&r.hostname===t&&r.port===o}return!1}(e,t))),n||(r=`Refused: ${JSON.stringify(t)}: Because it violates the following Content Security Policy directive: "${e} ${o.join(" ")}"`),{valid:n,message:r}):{valid:n,message:r}}}const De=(e,t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{});var Ie={...De(Object,["assign","create","defineProperties","defineProperty","entries","freeze","fromEntries","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","is","isExtensible","isFrozen","isSealed","keys","preventExtensions","seal","setPrototypeOf","values"]),...De(Reflect,["apply","construct","deleteProperty","get","has","ownKeys","set"]),from:Array.from,isArray:e=>Array.isArray(e),isBoolean:e=>"boolean"==typeof e,isNull:e=>null===e,isNumber:e=>"number"==typeof e,isString:e=>"string"==typeof e,isObject:e=>"object"==typeof e&&null!==e,isFunction:e=>"function"==typeof e,hasOwnProperty:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),toString:e=>Object.prototype.toString.call(e),inherits(e,t){const{has:n,get:r,ownKeys:o,set:i,deleteProperty:a,getOwnPropertyDescriptor:s}=Reflect;return new Proxy(e,{get(e,o,i){const a=n(e,o)?[e,o,i]:[t,o];return r(...a)},has:(e,r)=>n(e,r)||n(t,r),ownKeys:e=>new Set(...o(e),...o(t)),set(e,r,o,a){const s=n(e,r)?[e,r,o,a]:[t,r,o];return i(...s)},deleteProperty:(e,r)=>a(n(e,r)?e:t,r),getOwnPropertyDescriptor:(e,r)=>s(n(e,r)?e:t,r)})},mixin(e,t){const{defineProperty:n,getOwnPropertyDescriptor:r,ownKeys:o}=Reflect;o(t).forEach((o=>{const i=r(t,o);n(e,o,i)}))}};const ke=Object.seal(/^data-[\-\w.\u00B7-\uFFFF]/),He=Object.seal(/^aria-[\-\w]+$/),je=Object.seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ue=Object.seal(/^(?:\w+script|data):/i),Ve=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),{Node:_e,NodeFilter:Fe,Text:We,Comment:$e,NamedNodeMap:Be,DocumentFragment:ze,document:Ge}=window,Ke=Symbol("executeHook"),qe=Symbol("sanitizeElements"),Xe=Symbol("sanitizeAttributes"),Ye=Symbol("sanitizeShadowDOM"),Qe=Symbol("sanitize"),Je=["base","embed","iframe","meta","noscript","object","param","frame","frameset","noframes"],Ze=["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"],et=["audio","video","img","source","image","track"],tt=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"],nt=Ge.createElement("form"),rt=e=>{try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=""}catch(t){e.remove()}}},ot=function(e,t){if(t.removeAttribute(e),"is"===e)try{t.setAttribute(e,"")}catch(e){}},it=e=>(e.ownerDocument||e).createNodeIterator(e,Fe.SHOW_ELEMENT|Fe.SHOW_COMMENT|Fe.SHOW_TEXT,(()=>Fe.FILTER_ACCEPT),!1),at=e=>"object"==typeof _e?e instanceof _e:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;class Sanitizer{constructor(e={}){this.config=e}[Ke](e,t,n){const r=this.config[e];r&&r.call(this,t,n,this.config)}[qe](e){const{allowElements:t,dropElements:n}=this.config;if(this[Ke]("beforeSanitizeElements",e,null),!((r=e)instanceof We||r instanceof $e||"string"==typeof r.nodeName&&"string"==typeof r.textContent&&"function"==typeof r.removeChild&&r.attributes instanceof Be&&"function"==typeof r.removeAttribute&&"function"==typeof r.setAttribute&&"string"==typeof r.namespaceURI&&"function"==typeof r.insertBefore))return rt(e),!0;var r;if(e.nodeName.match(/[\u0080-\uFFFF]/))return rt(e),!0;const o=e.nodeName.toLowerCase();if(this[Ke]("uponSanitizeElement",e,{tagName:o,allowElements:t}),"script"===o&&!e.type)return rt(e),!0;if(("svg"===o||"math"===o)&&0!==e.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length)return rt(e),!0;if(!at(e.firstElementChild)&&(!at(e.content)||!at(e.content.firstElementChild))&&/<[/\w]/g.test(e.innerHTML)&&/<[/\w]/g.test(e.textContent))return rt(e),!0;if(!this.isValidElement(o)){if(!Je.includes(o)&&n&&!n.includes(o)&&!Ze.includes(o)){const t=e.parentNode,n=e.childNodes;for(let r=n.length-1;r>=0;--r)t.insertBefore(n[r].cloneNode(!0),e.nextSibling)}return rt(e),!0}return"noscript"!==o&&"noembed"!==o||!/<\/no(script|embed)/i.test(e.innerHTML)?(this[Ke]("afterSanitizeElements",e,null),!1):(rt(e),!0)}isValidAttribute(e,t,n){const{allowAttributes:r,dropAttributes:o}=this.config,i=e.toLowerCase(),a=t.toLowerCase();if(("id"===a||"name"===a)&&(n in Ge||n in nt))return!1;if(0===a.indexOf("on")||"script"===i&&"type"===a&&ie(n))return!1;if(ke.test(a));else if(He.test(a));else{if(o&&o.includes(a)||r&&r.length&&!r.includes(a))return!1;if(tt.includes(a));else if(je.test(n.replace(Ve,"")));else if("src"!==a&&"xlink:href"!==a&&"href"!==a||"script"===i||0!==n.indexOf("data:")||!et.includes(i))if(Ue.test(n.replace(Ve,""))){if(n)return!1}else;else;}return!0}isValidElement(e){const{allowElements:t,blockElements:n,dropElements:r}=this.config,o=e.toLowerCase();return!Je.includes(o)&&!(r&&r.includes(o)||n&&n.includes(o)||t&&t.length&&!t.includes(o))}[Xe](e){const{allowAttributes:t}=this.config,n=e.nodeName;let r,o,i,a;this[Ke]("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(!s)return;const c={name:"",value:"",keep:!0,allowAttributes:t};for(a=s.length;a--;){r=s[a];const{name:t}=r;o=r.value.trim(),i=t,c.name=i,c.value=o,c.keep=void 0,this[Ke]("uponSanitizeAttribute",e,c),o=c.value,c.keep||(this.isValidAttribute(n,i,o)||ot(t,e))}this[Ke]("afterSanitizeAttributes",e,null)}[Ye](e){let t;const n=it(e);for(this[Ke]("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)this[Ke]("uponSanitizeShadowNode",t,null),this[qe](t)||(t.content instanceof ze&&this[Ye](t.content),this[Xe](t));this[Ke]("afterSanitizeShadowDOM",e,null)}[Qe](e,t){const n=(e=>{const t=e.match(/^[\r\n\t ]+/),n=t&&t[0],r=Ge.implementation.createHTMLDocument(""),{body:o}=r;return o.innerHTML=e,e&&n&&r.body.insertBefore(Ge.createTextNode(n),r.body.childNodes[0]||null),o})(e=`${e}`);if(!n)return t?Ge.createDocumentFragment():"";const r=it(n);let o;for(;o=r.nextNode();)this[qe](o)||(o.content instanceof ze&&this[Ye](o.content),this[Xe](o));if(t){const e=n.ownerDocument.createDocumentFragment();if(n)for(;n.firstChild;)e.appendChild(n.firstChild);return e}return n.innerHTML}sanitize(e){return this[Qe](e,!0)}sanitizeToString(e){return this[Qe](e)}}function st(){return Ie}function ct(){return Ne}st.cacheResult=!0,ct.cacheResult=!0;var lt={...we,...de,...Re,langUtils:st,browserUtils:ct,createCSPValidation:(e,...t)=>new CSPValidation(...t),createSanitizer:(e,...t)=>new Sanitizer(...t),isJavaScriptType:(e,...t)=>ie(...t)};let ut=0;const dt=Symbol("bridge"),pt=new WeakMap;class WebSandbox{constructor(e,t={}){if(!e.isConnected)throw new Error("Elements must be inserted into the DOM");const n={csp:"default-src 'none'",...t,parent:e.ownerDocument.defaultView,windowView:e,documentView:e.attachShadow({mode:"closed"}),id:e.id||`#${ut}`,title:e.title||e.name};n.csp=oe(n.csp);const r=function(e){let t=e;do{if(t=t.getRootNode().host,t&&pt.has(t))return t}while(t);return null}(e);if(r){const e=pt.get(r),t=e[dt].id,o=e.debug,i=e[dt].csp;n.debug=o,n.id=`${t}.${n.id}`,Object.keys(n.csp).forEach((e=>{i[e]?n.csp[e].forEach(((t,r)=>{i[e].includes(t)||n.csp[e].splice(r,1)})):delete n.csp[e]}))}(function({csp:e,debug:t,documentView:n,id:r,parent:o,title:i,windowView:a}){const s=re(),c=new Map,l=s.global,u=new Injector,d=new WeakMap,p=new WeakMap,m={injector:u,global:l,evaluate:(e,t)=>s.evaluate("function"==typeof e?`(${e})`:e,t),animationFrameList:[],csp:e,customElements:c,debug:t,documentView:n,id:r,intervalList:[],nativeCache:d,parent:o,timeoutList:[],title:i,virtualCache:p,windowView:a};Object.keys(m).forEach((e=>{u.register(e,m[e])}));const f=Object.keys(lt),h=e=>{const t=lt[e],n=t.cacheResult,r=u.resolve(t),o=n?r():r,i=f.indexOf(e);return u.register(e,o),f.splice(i,1),o};for(u.fallback=function(e){if(!Object.prototype.hasOwnProperty.call(lt,e))throw new Error(`Injector: Can't resolve ${e}`);return h(e)};f.length;){const e=f[0];h(e)}return u})(n).resolve((({browserUtils:{scriptSourceLoader:e},csp:t,debug:n,evaluate:r,global:o,id:i,installBOMInterfaces:a,installContainLayout:s,installHooks:c,installDefaultNodes:l,installEsTraps:u,installView:d,installWindowProperties:p,toNativeAny:m,toVirtualAny:f})=>{d(),a(),p(),u(),l(),s(),c(),this[dt]={csp:t,debug:n,evaluate:r,global:o,id:i,scriptSourceLoader:e,toNativeAny:m,toVirtualAny:f}}))(),ut++,pt.set(e,this)}get global(){return this[dt].global}get evaluate(){return this[dt].evaluate}toNative(e){return this[dt].toNativeAny(e)}toVirtual(e){return this[dt].toVirtualAny(e)}unload(){this.global.close()}importScript(e,t){return this[dt].scriptSourceLoader(e).then((e=>this.evaluate(e,t)))}}window.WebSandbox=WebSandbox;const mt=Symbol("first-connect"),ft=Symbol("moveing");class HTMLWebSandboxBaseInterface extends HTMLElement{constructor(){if(super(),"function"!=typeof this.lifecycleCallback)throw new Error("Must implement interface: lifecycleCallback")}get name(){return this.getAttribute("name")||""}set name(e){this.setAttribute("name",e)}get src(){const e=this.getAttribute("src");return null===e?"":new URL(e,this.baseURI).href}set src(e){this.setAttribute("src",e)}get text(){return this.getAttribute("text")||""}set text(e){this.setAttribute("text",e)}connectedCallback(){this.lifecycleCallback("connected"),this[mt]?this[ft]&&this.lifecycleCallback("moved"):(this.lifecycleCallback("firstConnected"),this[mt]=!0)}disconnectedCallback(){this[ft]=!0,this.lifecycleCallback("disconnected"),Te((()=>{this.isConnected||(this[ft]=!1,this.lifecycleCallback("destroyed"))}))}attributeChangedCallback(){this.lifecycleCallback("attributeChanged",...arguments)}adoptedCallback(){this.lifecycleCallback("adopted",...arguments)}}window.HTMLWebSandboxBaseInterface=HTMLWebSandboxBaseInterface;const ht=Symbol("sandboxInstance"),bt=Symbol("autoloadDisabled"),gt=new WeakSet,yt=e=>{if(!e.isConnected)return;let t=e[ht];t||(t=new WebSandbox(e,{csp:e.csp,debug:e.debug,id:e.id,name:e.name}),e[ht]=t),((e,t)=>{e[bt]||gt.has(e)||(e.src?(t.importScript(e.src).then((()=>{e.dispatchEvent(new Event("load"))}),(()=>{e.dispatchEvent(new Event("error"))})),gt.add(e)):e.text&&(t.evaluate(e.text),gt.add(e)))})(e,t)};class HTMLWebSandboxElement extends HTMLWebSandboxBaseInterface{constructor(){super(),Reflect.defineProperty(this,"debug",{configurable:!0,get(){return null!==this.getAttribute("debug")},set(e){e?this.setAttribute("debug",""):this.removeAttribute("debug")}})}get csp(){return this.getAttribute("csp")||""}set csp(e){this.setAttribute("csp",e)}get contentWindow(){yt(this);const e=this[ht];return e?e.global:null}get contentDocument(){yt(this);const e=this[ht];return e?e.global.document:null}evaluate(e,t){yt(this);const n=this[ht];if(!n)throw Error("Not initialized");return n.evaluate(e,t)}lifecycleCallback(e){switch(e){case"attributeChanged":case"firstConnected":Te((()=>{yt(this)}));break;case"destroyed":Te((()=>{var e;(e=this)[ht]&&e[ht].unload()}))}}static get observedAttributes(){return["src","text"]}}HTMLWebSandboxElement.AUTOLOAD_DISABLED=bt,HTMLWebSandboxElement.SANDBOX_INSTANCE=ht,window.HTMLWebSandboxElement=HTMLWebSandboxElement,customElements.define("web-sandbox",HTMLWebSandboxElement),e.HTMLWebSandboxElement=HTMLWebSandboxElement,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=web-sandbox.umd.js.map
