(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"==typeof globalThis?e||self:globalThis,t(e.WebSandbox={}))})(this,function(e){'use strict';function t(e,t=void 0){const n=`please report internal shim error: ${e}`;console.error(n),t&&(console.error(`${t}`),console.error(`${t.stack}`));debugger;throw n}function n(e,n){e||t(n)}function a(e){let t=`'use strict'; (${e})`;return t=t.replace(/\(0,\s*_[0-9a-fA-F]{3}\u200D\.e\)/g,"(0, eval)"),t=t.replace(/_[0-9a-fA-F]{3}\u200D\.g\./g,""),t=t.replace(/cov_[^+]+\+\+[;,]/g,""),t}function r(e,t){const{callAndWrapError:n}=e,{initRootRealm:a,initCompartment:o,getRealmGlobal:i,realmEvaluate:l}=t,{create:s,defineProperties:c}=Object;class d{constructor(){throw new TypeError("Realm is not a constructor")}static makeRootRealm(t={}){const o=s(d.prototype);return n(a,[e,o,t]),o}static makeCompartment(t={}){const a=s(d.prototype);return n(o,[e,a,t]),a}get global(){return n(i,[this])}evaluate(e,t,a={}){return n(l,[this,e,t,a])}}return c(d,{toString:{value:()=>"function Realm() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),c(d.prototype,{toString:{value:()=>"[object Realm]",writable:!1,enumerable:!1,configurable:!0}}),d}function o(e,t=!1){function a(t,a,o,i){for(const l of t){const t=re(e,l);t&&(n("value"in t,`unexpected accessor on global property: ${l}`),r[l]={value:t.value,writable:a,enumerable:o,configurable:i})}}const r={};return t?(a(he,!0,!1,!0),a(Se,!0,!1,!0)):(a(he,!1,!1,!1),a(Se,!1,!1,!1)),a(ve,!0,!1,!0),r}function i(){function e(e){if(e===void 0||null===e)throw new TypeError(`can't convert undefined or null to object`);return Object(e)}function t(e){return"symbol"==typeof e?e:`${e}`}function n(e,t){if("function"!=typeof e)throw TypeError(`invalid ${t} usage`);return e}const{defineProperty:a,defineProperties:r,getOwnPropertyDescriptor:o,getPrototypeOf:i,prototype:l}=Object;try{(0,l.__lookupGetter__)("x")}catch(e){return}r(l,{__defineGetter__:{value:function(t,r){const o=e(this);a(o,t,{get:n(r,"getter"),enumerable:!0,configurable:!0})}},__defineSetter__:{value:function(t,r){const o=e(this);a(o,t,{set:n(r,"setter"),enumerable:!0,configurable:!0})}},__lookupGetter__:{value:function(n){let a=e(this);n=t(n);let r;for(;a&&!(r=o(a,n));)a=i(a);return r&&r.get}},__lookupSetter__:{value:function(n){let a=e(this);n=t(n);let r;for(;a&&!(r=o(a,n));)a=i(a);return r&&r.set}}})}function l(){function e(e,r){let o;try{o=(0,eval)(r)}catch(t){if(t instanceof SyntaxError)return;throw t}const i=n(o),l=function(){throw new TypeError("Not available")};t(l,{name:{value:e}}),t(i,{constructor:{value:l}}),t(l,{prototype:{value:i}}),l!==Function.prototype.constructor&&a(l,Function.prototype.constructor)}const{defineProperties:t,getPrototypeOf:n,setPrototypeOf:a}=Object;e("Function","(function(){})"),e("GeneratorFunction","(function*(){})"),e("AsyncFunction","(async function(){})"),e("AsyncGeneratorFunction","(async function*(){})")}function s(){const e=new Function("try {return this===global}catch(e){return false}")();if(!e)return;const t=require("vm"),n=t.runInNewContext(Ne);return n}function c(){if("undefined"!=typeof document){const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const t=e.contentWindow.eval(Ce);return t}}function d(e,t=[],n=!1){const a=o(e,n),r=e.eval,i=e.Function,l=r($)();return ne({unsafeGlobal:e,sharedGlobalDescs:a,unsafeEval:r,unsafeFunction:i,callAndWrapError:l,allShims:t})}function u(e,t=!1){const n=Te(),a=d(n,e,t),{unsafeEval:r}=a;return r(Ae)(),r(Oe)(),a}function m(e,t={}){const n=ie(e),a=pe(n,n=>{if(n in t)return!1;if("eval"===n||Le.has(n)||!Ee(Me,n))return!1;const a=re(e,n);return!1===a.configurable&&!1===a.writable&&me(a,"value")});return a}function p(e){const t=e.search(Ie);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible html comment syntax rejected around line ${n}`)}}function f(e){const t=e.search(Pe);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible import expression rejected around line ${n}`)}}function b(e){const t=e.search(ke);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible direct eval expression rejected around line ${n}`)}}function g(e){p(e),f(e),b(e)}function E(e){return 0===e.length?"":`const {${be(e,",")}} = this;`}function y(e,t){const{unsafeFunction:n}=e,a=E(t);return n(`
    with (arguments[0]) {
      ${a}
      return function() {
        'use strict';
        return eval(arguments[0]);
      };
    }
  `)}function h(e,n,a,r){const{unsafeEval:o}=e,i=o(xe);return function(l={},s={}){const c=s.transforms||[],d=ge(c,a||[],[He]);return function(a){let s={src:a,endowments:l};s=i(s,d);const c=m(n,s.endowments),u=m(s.endowments),p=ge(c,u),f=y(e,p),b=o(Re)(e,n,s.endowments,r),g=Proxy.revocable({},b),E=g.proxy,h=ce(f,n,[E]);b.useUnsafeEvaluator=!0;let S;try{return ce(h,n,[s.src])}catch(t){throw S=t,t}finally{b.useUnsafeEvaluator&&(g.revoke(),t("handler did not revoke useUnsafeEvaluator",S))}}}}function S(e,t){const{unsafeEval:a,unsafeFunction:r}=e,o=a(we)(e,t);return n(le(o).constructor!==Function,"hide Function"),n(le(o).constructor!==r,"hide unsafeFunction"),o}function v(e){return(t,n,a={})=>e(n,a)(t)}function C(e,t){const{unsafeGlobal:a,unsafeEval:r,unsafeFunction:o}=e,i=r(De)(e,function(...e){const n=`${fe(e)||""}`;let r=`${be(e,",")}`;if(!Ee(/^[\w\s,]*$/,r))throw new SyntaxError("shim limitation: Function arg must be simple ASCII identifiers, possibly separated by commas: no default values, pattern matches, or non-ASCII parameter names");if(new o(n),ye(r,")"))throw new a.SyntaxError("shim limitation: Function arg string contains parenthesis");0<r.length&&(r+="\n/*``*/");const i=`(function(${r}){\n${n}\n})`;return t(i)});return n(le(i).constructor!==Function,"hide Function"),n(le(i).constructor!==o,"hide unsafeFunction"),i}function N(e){return n(Object(e)===e,"bad object, not a Realm instance"),n(_e.has(e),"Realm instance has no record"),_e.get(e)}function T(e,t){n(Object(e)===e,"bad object, not a Realm instance"),n(!_e.has(e),"Realm instance already has a record"),_e.set(e,t)}function A(e,t,n){ae(e,{eval:{value:t,writable:!0,configurable:!0},Function:{value:n,writable:!0,configurable:!0}})}function O(e,t,n){const{sharedGlobalDescs:a,unsafeGlobal:r}=e,o=te(r.Object.prototype,a),i=h(e,o,t,n),l=i(),s=S(e,l),c=C(e,l),d=v(i);A(o,s,c);const u=ne({safeGlobal:o,safeEval:s,safeEvalWhichTakesEndowments:d,safeFunction:c});return u}function M({rootRealm:e,compartment:t}){const{seal:n}=Object,{defineProperty:a,getOwnPropertyDescriptor:r,ownKeys:o}=Reflect,i=(e,t)=>{const n=r(e,t);if(n&&n.configurable){if(n.hasOwnProperty("value")){const r=n.value;delete n.value,delete n.writable,n.get=()=>r,n.set=function(n){if(this!==e)a(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0});else throw TypeError(`Cannot assign to read only property '${t}' of object '#<${e}>'`)}}n.configurable=!1,a(e,t,n)}};delete t.global.Realm,o(e.global).map(t=>e.global[t]).filter(e=>e&&"object"==typeof e||"function"==typeof e).forEach(e=>{o(e).forEach(t=>{i(e,t)}),n(e),e.prototype&&(o(e.prototype).forEach(t=>{i(e.prototype,t)}),n(e.prototype))})}function L(){if(!Be){Be=je.makeRootRealm();const e=window.document.body.lastChild;if("IFRAME"===e.nodeName&&e.contentWindow&&Be.global instanceof e.contentWindow.Object){const t=e.contentDocument;t.removeChild(t.documentElement),Object.defineProperties(e,{contentWindow:{},contentDocument:{}})}}const e=Be.global.Realm.makeCompartment(),t=e.evaluate;return e.evaluate=function(e,...n){return e=e.replace(/\.import\(/g,`['import'](`),t.call(this,e,...n)},Be.evaluate(`(${M.toString()})`)({rootRealm:Be,compartment:e}),e}function R(e){return e.split(";").reduce((e,t)=>{const[n,...a]=t.trim().split(/\s+/g);return n&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=a.includes("'none'")?[]:a),e},{})}function w({catchNextError:e,console:t,createCSPValidation:n,SandboxSecurityError:a,state:{csp:r}}){const o=n(r);return function(n,r,i){const{valid:l,message:s}=e(o).validity(n,r);if(!l)if("warn"===i)t.error(new a(s));else if("error"===i)throw new a(s);return l}}function D({callAndWrapError:e,cssStyleSheetFilter:t,state:{documentView:n,parent:a},symbols:{elementDefined:r}},o){return e(()=>{const e=o.cssRules;for(let i=e.length-1;0<=i;){const l=e[i];switch(!0){case l instanceof a.CSSImportRule||l instanceof a.CSSMediaRule:o.deleteRule(i);break;case l instanceof a.CSSSupportsRule:t(l);break;case l instanceof a.CSSStyleRule:if(l.selectorText.includes(":host")&&n.contains(o.ownerNode)){const e=l.selectorText.split(",").filter(e=>!e.includes(":host")).join(",");if(0!==e.length){const t=l.cssText.replace(/[^{]*/,e);o.insertRule(t,i+1)}o.deleteRule(i)}else if(l.selectorText.includes(":defined")){const e=l.cssText.replace(":defined",`[${r}]`.replace(".","\\."));o.insertRule(e,i)}}i--}})}function x(){let e=null;return{get(){return e},set(t){e=t}}}function I({catchNextError:e,isJavaScriptType:t,createSanitizer:n,symbols:{scriptType:a},state:{parent:r}}){const o=["web-sandbox","web-widget"];return e(n({uponSanitizeElement(e,n){e.tagName&&("script"===n.tagName&&t(e.type)?e.setAttribute("type",a):(r.customElements.get(n.tagName)||e.getAttribute("is")&&r.customElements.get(e.getAttribute("is")))&&!o.includes(n.tagName)&&e.parentNode.removeChild())}}))}function P({bindObject:e,callAndWrapError:t,currentNativeObject:n,evaluate:a,symbols:{initializeCallback:i},toNativeAny:r,toVirtualAny:o,langUtils:{setPrototypeOf:l,defineProperties:s,from:c,getOwnPropertyDescriptor:d,isObject:u,ownKeys:m,construct:p,create:f}}){const b=a(((e,t,n,a,r,o,i,l,s,c,d,u,m,p,f,b,g)=>{function E(){return t(()=>{let t=this,a=r.get();if(a)e(t,a),g&&n(g,arguments,E);else{const r=i(arguments).map(e=>f(e));if(!(this instanceof E))return a=d(...r),b(a);a=n(d,r),c(a)&&e(t,a)}return S&&(r.set(a),t=S.call(t,...arguments)),t})}const y=d.name,h=l(m,s),S=h&&h.value;if(d.prototype){const e={constructor:{configurable:!0,value:E,writable:!0},[Symbol.toStringTag]:{configurable:!0,value:d.prototype&&d.prototype[Symbol.toStringTag]||y},...u(m).reduce((e,t)=>{const n=l(m,t);return e[t]=n,e},{})};g?(p(E,g),E.prototype=a(g.prototype,e)):o(E.prototype,e),o(E,{prototype:{configurable:!1,enumerable:!1,writable:!1}})}else E.prototype=void 0;return o(E,{name:{value:y,configurable:!0},toString:{configurable:!0,value(){return`function ${y}() { [virtual code] }`},writable:!0}}),E}).toString());return function(a,g={},E){return b(e,t,p,f,n,s,c,d,i,u,a,m,g,l,r,o,E)}}function k({langUtils:{defineProperty:n},state:{nativeCache:a},toNativeAny:e,toVirtualAny:t}){const r=a=>{function r(...n){const r=this,o=t(r),i=n.map(e=>t(e)),l=Reflect.apply(a,o,i);return e(l)}return n(r,"name",{value:a.name,configurable:!0}),r};return function(e){if(a.has(e))return a.get(e);const t=r(e);return a.set(e,t),t}}function H({allowLiveOwnPropertysConfig:e,classRegistry:t,createVirtualClass:n,currentNativeObject:a,evaluate:r,toVirtualAny:o,injector:i,langUtils:{defineProperty:c,getOwnPropertyDescriptor:d,getPrototypeOf:u,hasOwnProperty:m,inherits:p,isFunction:f,ownKeys:b},permissionsConfig:{allowInterfaces:g},SandboxSecurityError:l,symbols:{initializeCallback:E},toLiveVirtuaObject:s}){function y(e){const t=v.get(e);if(t)return t;if(We[e]){const t=r(`(${We[e].toString()})`),n=i.resolve(t)();return v.set(e,n),n}return{}}function h(e,t,n){const a=(e,t)=>{const n=d(e,t);if(!n){const n=u(e);return n?a(n,t):void 0}return n},r=(e,t,n)=>{if(!m(e,n)){const r=a(t,n);r&&(b(r).forEach(e=>{r[e]=o(r[e])}),c(e,n,r))}};n.forEach(n=>{r(e,t,n),f(t)&&t.prototype&&r(e.prototype,t.prototype,n)})}function S(a,r){if(t.has(a))return t.get(a);const o=a.name;if(!o)return null;if(!g.has(o))throw new l(`toVirtualClass: "${o}" is not in the allowed list`);const i=u(a);i&&!t.get(i)&&S(i);const s=y(o),c=e.includes(o);c&&(s[E]=C);const d=t.get(i),m=n(a,s,d);return h(m,r||a,[...g.get(o).values()]),t.set(a,m),m}const v=new Map,C=r(((e,t,n)=>function(){return e(this,t(n.get()))}).toString())(p,s,a);return function(){return S(...arguments)}}function _({callAndWrapError:e,evaluate:t,langUtils:{defineProperties:r},state:{virtualCache:o},toNativeAny:n,toVirtualAny:a}){const i=t(((e,t,n,a,r)=>{function o(...r){return a(()=>{const a=this,o=t(a),i=r.map(e=>t(e)),l=Reflect.apply(e,o,i);return n(l)})}return r(o,{name:{value:e.name,configurable:!0},toString:{configurable:!0,value(){return`function ${this.name}() { [virtual code] }`},writable:!0}}),o}).toString());return function(t){if(o.has(t))return o.get(t);const l=i(t,n,a,e,r);return o.set(t,l),l}}function U(){return Ge}function V(){let e;return{queueMicrotask:"function"==typeof queueMicrotask?queueMicrotask:t=>(e||(e=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),Events:class{constructor(){this.eventTarget=new EventTarget}add(e,t){this.eventTarget.addEventListener(e,({detail:e})=>t(e))}dispatch(e,t){this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t}))}},scriptSourceLoader(e,t={}){return fetch(e,{credentials:"same-origin",...t}).then(t=>{if(!t.ok)throw Error([t.status,t.statusText,e].join(", "));const n=/(\/\/# sourceURL=)((https?:\/\/)?([\w-])+\.{1}([a-zA-Z]{2,63})([/\w-]*)*\/?\??([^#\n\r]*)?)/,a=t.headers.get("content-type");if(!a||!/^(text|application)\/(x-)?javascript(;|$)/.test(a))throw Error(a);return t.text().then(t=>(n.test(t)?t=t.replace(n,(t,n,a)=>`${n}${URL(a,e).href}`):t+=`\n//# sourceURL=${e}`,t))})}}}function j({callAndWrapError:e,debug:t,langUtils:{entries:n},state:{parent:a}}){return n(a.console).reduce((n,[a,r])=>(n[a]=t?r:function(){e(r,this,arguments)},n),{})}function B(){let e=null;return{get(){return e},set(t){e=t}}}function F({browserUtils:{Events:e}}){return new e}function W(){const e=(e,t)=>t.reduce((t,n)=>(t[n]=e[n],t),{});return{...e(Object,["assign","create","defineProperties","defineProperty","entries","freeze","fromEntries","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","is","isExtensible","isFrozen","isSealed","keys","preventExtensions","seal","setPrototypeOf","values"]),...e(Reflect,["apply","construct","deleteProperty","get","has","ownKeys","set"]),from:Array.from,isArray(e){return Array.isArray(e)},isBoolean(e){return"boolean"==typeof e},isNull(e){return null===e},isNumber(e){return"number"==typeof e},isString(e){return"string"==typeof e},isObject(e){return"object"==typeof e&&null!==e},isFunction(e){return"function"==typeof e},hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)},toString(e){return Object.prototype.toString.call(e)},inherits(e,t){const{has:n,get:a,ownKeys:r,set:o,deleteProperty:i,getOwnPropertyDescriptor:l}=Reflect;return new Proxy(e,{get(e,r,o){const i=n(e,r)?[e,r,o]:[t,r];return a(...i)},has(e,a){return n(e,a)||n(t,a)},ownKeys(e){return new Set(...r(e),...r(t))},set(e,a,r,i){const l=n(e,a)?[e,a,r,i]:[t,a,r];return o(...l)},deleteProperty(e,a){return i(n(e,a)?e:t,a)},getOwnPropertyDescriptor(e,a){return l(n(e,a)?e:t,a)}})},mixin(e,t){const{defineProperty:n,getOwnPropertyDescriptor:a,ownKeys:r}=Reflect;r(t).forEach(r=>{const o=a(t,r);n(e,r,o)})}}}function G({state:{parent:e},langUtils:{getOwnPropertyNames:t,isArray:n}}){if(Xe)return Xe;return Xe={allowInterfaces:(a=>{const r=new Map,o=new Set(["arguments","caller","length","name","prototype"]),i=new Set(["constructor"]),l=e=>[...t(e).filter(e=>!o.has(e)),...t(e.prototype||{}).filter(e=>!i.has(e))];return a.forEach(function(t){const a=t.name||t,o=t.value;n(o)?r.set(a,new Set(o)):e[a]&&r.set(a,new Set(l(e[a])))}),r})(Ke.allowInterfaces)},Xe}function z({evaluate:e}){return e((()=>class extends TypeError{constructor(){super(...arguments),this.name="WebSandboxSecurityError"}}).toString())()}function K({state:e}){const{windowView:t,prefix:n}=e;return{prefix:`${t.localName}.`,scriptType:`${n}script`,disabled:`${n}disabled`,elementDefined:`${n}defined`,initializeCallback:Symbol("initializeCallback"),connectedCallback:Symbol("connectedCallback"),disconnectedCallback:Symbol("disconnectedCallback"),attributeChangedCallback:Symbol("attributeChangedCallback")}}function X({symbols:{prefix:e},state:{parent:t,windowView:n}}){const a=`${e}style`;if(!t.document.getElementById(a)){const e=t.document.createElement("style"),r="contain"in n.style?"contain: layout":"transform: scale(1)";e.textContent=`${n.localName} { ${r}; overflow: hidden; }`,e.id=a,t.document.head.appendChild(e)}}function q({callAndWrapError:e,catchNextError:t,console:n,cspValidation:a,state:{animationFrameList:d,documentView:u,id:m,intervalList:p,parent:f,timeoutList:b,title:g},global:r,langUtils:{defineProperties:E,has:y,isFunction:h,isString:S},SandboxSecurityError:o,toNativeAny:i,toNativeObject:l,toVirtualAny:s,toVirtualObject:c}){let v,C;const N=t(f),T=N.document,A=t(T),O=N.location,M=t(O),L=t(u),R=t(f.URL),w=e=>new R(e,A.baseURI),D=(e,n)=>{const r=!["href","assign","replace"].includes(e),i=new R(A.baseURI),l=t(i);if(r?y(l,e)&&(l[e]=n):l.href=w(n).href,["javascript:","blob:","data:","filesystem:"].includes(l.protocol))throw new o(`Forbidden: "${l.protocol}"`);a("navigate-to",l.href,"error")&&("reload"===e?M[e](n):["assign","replace"].includes(e)?M[e](l.href):M.href=l.href)},x=e=>function(){const t=Array.from(arguments).map(e=>i(e)),n=N[e](...t),a=s(n);return a},I=x("fetch"),P={atob:x("atob"),btoa:x("btoa"),setTimeout(e,...t){if(S(e))throw new o(`The first parameter must be a function`);return b.push(N.setTimeout(e.bind(this),...t))},clearTimeout(e){const t=b.indexOf(e);-1!==t&&(b.splice(t,1),N.clearTimeout(e))},setInterval(e,...t){if(S(e))throw new o(`The first parameter must be a function`);return p.push(N.setInterval(e.bind(this),...t))},clearInterval(e){const t=p.indexOf(e);-1!==t&&(p.splice(t,1),N.clearInterval(e))},fetch(){const t=arguments[0],n=w(S(t)?t:t.url);return a("connect-src",n.href,"error")?I(...arguments).catch(t=>e(()=>{throw t})):Promise.reject()}};h(N.queueMicrotask)&&(P.queueMicrotask=x("queueMicrotask"));const k={console:n,get customElements(){return c(N.customElements)},get localStorage(){return c(N.localStorage)},name:m,get navigator(){return c(N.navigator)},get self(){return r},get window(){return r},get document(){return v},get location(){return C?C:(C=E(c(O),{...["hash","host","hostname","href","origin","password","pathname","port","protocol","search","username"].reduce((e,t)=>(e[t]={enumerable:!0,get(){return M[t]},set(e){D(t,e)}},e),{}),...["assign","reload","replace"].reduce((e,t)=>(e[t]={enumerable:!0,value(e){D(t,e)}},e),{}),...{toString:{enumerable:!0,value(){return this.href}}}}),C)},set location(e){this.location.href=e},close(){if(!r.closed){const{dispatchEvent:e,clearTimeout:t,clearInterval:n,cancelAnimationFrame:a,document:o,Event:i}=r;e(new i("beforeunload")),e(new i("pagehide")),e(new i("unload")),b.forEach(e=>t(e)),p.forEach(e=>n(e)),d.forEach(e=>a(e)),o.removeChild(o.documentElement),r.closed=!0}},getComputedStyle(e,t){const n=l(e),a=N.getComputedStyle(n,t);return c(a)},requestAnimationFrame(e,...t){return d.push(N.requestAnimationFrame(e.bind(this),...t))},cancelAnimationFrame(e){const t=d.indexOf(e);-1!==t&&(d.splice(t,1),N.cancelAnimationFrame(e))},...P};if(v)return v;v=c(u);const H=A.createElement("html"),_=A.createElement("head"),U=A.createElement("title"),V=A.createElement("body");return U.textContent=g,_.appendChild(U),H.appendChild(_),H.appendChild(V),L.appendChild(H),k}function Y(e,t,n=document.location){e=e.toLowerCase(),t=t.toLowerCase();const a=new URL(t),r=/^(?:(?<scheme>[a-z][a-z0-9+.-]*):\/\/)?(?<host>\[[0-9A-F:.]{2,}\]|(?:[^'\/?#:]|%[0-9A-F]{2})+)(?::(?<port>[^\/?]*))?(?<path>[^?#]*)?$/i;if("*"===e)return!["blob:","data:","filesystem:"].includes(a.protocol);if(e.match(/^[a-z][a-z0-9+.-]*:$/i))return a.protocol===e;if(e.match(r)){const{scheme:t,host:o,port:i,path:l}=e.match(r).groups;if(!a.hostname)return!1;const s=a.protocol.replace(":",""),c=a.hostname,d=a.port,u=a.pathname,m=Qe(u);if(t&&s!==t)return!1;if(!t){const e=n.protocol.replace(":","");if("http"===e&&"http"!==s&&"https"!==s||"http"!==e&&s!==e)return!1}if(o.startsWith("*")){if(!c.endsWith(o.slice(1)))return!1;}else if(c!==o)return!1;if(/^[\d.]+$/.test(o)&&"127.0.0.1"!==o||/^\[.*\]$/.test(o))return!1;if(!i){if(!["",{ftp:21,http:80,https:443,ws:80,wss:443}[s]].includes(d))return!1}else if("*"!==i&&d!==i)return!1;if(l){const e=!l.endsWith("/"),t=Qe(l);if(t.length>m.length)return!1;for(let e of t){e=decodeURIComponent(e);const t=decodeURIComponent(m[0]);if(t!==e)return!1;m.shift()}if(e&&0<m.length)return!1}return!0}if("'self'"===e){const{protocol:e,hostname:t,port:r}=n;return a.protocol===e&&a.hostname===t&&a.port===r}return!1}function Q({csp:e,debug:t,documentView:n,id:a,parent:r,title:o,windowView:i}){const l=new Map,s=new Map,c=new WeakMap,d=new WeakMap,u={animationFrameList:[],classRegistry:l,csp:e,customElements:s,debug:t,documentView:n,id:a,intervalList:[],nativeCache:c,parent:r,timeoutList:[],title:o,virtualCache:d,windowView:i};return Object.seal(u),u}function J(e){const t=new Fe,n=Q(e),a=L(),r=a.global,o=a.evaluate.bind(a);t.register("injector",t),t.register("state",n),t.register("global",r),t.register("evaluate",o),Object.keys(n).forEach(e=>{t.register(e,n[e])});const i=Object.keys(Rt),l=e=>{const n=Rt[e],a=n.cacheResult,r=t.resolve(n),o=a?r():r,l=i.indexOf(e);return t.register(e,o),i.splice(l,1),o};for(t.fallback=function(e){if(!Object.prototype.hasOwnProperty.call(Rt,e))throw new Error(`Injector: Can't resolve ${e}`);return l(e)};i.length;){const e=i[0];l(e)}return t}const Z=a(r),$=a(function(){const{getPrototypeOf:e}=Object,{apply:t}=Reflect,n=e=>(n,...a)=>t(e,n,a),a=n(Map.prototype.get),r=n(Set.prototype.has),o=new Map([["EvalError",EvalError],["RangeError",RangeError],["ReferenceError",ReferenceError],["SyntaxError",SyntaxError],["TypeError",TypeError],["URIError",URIError]]),i=new Set([EvalError.prototype,RangeError.prototype,ReferenceError.prototype,SyntaxError.prototype,TypeError.prototype,URIError.prototype,Error.prototype]);return function(n,l){try{return t(n,void 0,l)}catch(t){if(Object(t)!==t)throw t;if(r(i,e(t)))throw t;let n,l,s;try{n=`${t.name}`,l=`${t.message}`,s=`${t.stack||l}`}catch(e){throw new Error("unknown error")}const c=a(o,n)||Error;try{throw new c(l)}catch(e){throw e.stack=s,e}}}}),{assign:ee,create:te,freeze:ne,defineProperties:ae,getOwnPropertyDescriptor:re,getOwnPropertyDescriptors:oe,getOwnPropertyNames:ie,getPrototypeOf:le,setPrototypeOf:se}=Object,{apply:ce,ownKeys:de}=Reflect,ue=e=>(t,...n)=>ce(e,t,n),me=ue(Object.prototype.hasOwnProperty),pe=ue(Array.prototype.filter),fe=ue(Array.prototype.pop),be=ue(Array.prototype.join),ge=ue(Array.prototype.concat),Ee=ue(RegExp.prototype.test),ye=ue(String.prototype.includes),he=["Infinity","NaN","undefined"],Se=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Array","ArrayBuffer","Boolean","DataView","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Object","RangeError","ReferenceError","Set","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","JSON","Math","Reflect","escape","unescape"],ve=["Date","Error","Promise","Proxy","RegExp","Intl"],Ce="'use strict'; this",Ne=`(0, eval)("'use strict'; this")`,Te=()=>{const e=c(),t=s();if(!e&&!t||e&&t)throw new Error("unexpected platform, unable to create Realm");return e||t},Ae=a(i),Oe=a(l),Me=/^[a-zA-Z_$][\w$]*$/,Le=new Set(["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"]),Re=a(function(e,t,n={},a=!1){const{unsafeGlobal:r,unsafeEval:o}=e,{freeze:i,getOwnPropertyDescriptor:l}=Object,{get:s,set:c}=Reflect,d=new Proxy(i({}),{get(e,t){throw new TypeError(`unexpected scope handler trap called: ${t+""}`)}});return{__proto__:d,useUnsafeEvaluator:!1,get(e,a){return"symbol"==typeof a?void 0:"eval"===a&&!0===this.useUnsafeEvaluator?(this.useUnsafeEvaluator=!1,o):a in n?s(n,a,t):s(t,a)},set(e,a,r){if(a in n){const e=l(n,a);return"value"in e?c(n,a,r):c(n,a,r,t)}return c(t,a,r)},has(e,o){return!!a||!!("eval"===o||o in n||o in t||o in r)},getPrototypeOf(){return null}}}),we=a(function(e,t){const{callAndWrapError:n}=e,{defineProperties:a}=Object,r={eval(){return n(t,arguments)}}.eval;return a(r,{toString:{value:()=>`function ${"eval"}() { [shim code] }`,writable:!1,enumerable:!1,configurable:!0}}),r}),De=a(function(e,t){const{callAndWrapError:n,unsafeFunction:a}=e,{defineProperties:r}=Object,o=function(){return n(t,arguments)};return r(o,{prototype:{value:a.prototype},toString:{value:()=>"function Function() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),o}),xe=a(function(e,t){const{create:n,getOwnPropertyDescriptors:a}=Object,{apply:r}=Reflect,o=(e=>(t,...n)=>r(e,t,n))(Array.prototype.reduce);return e={src:`${e.src}`,endowments:n(null,a(e.endowments))},e=o(t,(e,t)=>t.rewrite?t.rewrite(e):e,e),e={src:`${e.src}`,endowments:n(null,a(e.endowments))},e}),Ie=/(?:<!--|-->)/,Pe=/\bimport\s*(?:\(|\/[/*])/,ke=/\beval\s*(?:\(|\/[/*])/,He={rewrite(e){return g(e.src),e}},_e=new WeakMap,Ue={initRootRealm:function(e,t,n){const{shims:a,transforms:r,sloppyGlobals:o,configurableGlobals:i}=n,l=ge(e.allShims,a),s=u(l,i),{unsafeEval:c}=s,d=c(Z)(s,Ue);s.sharedGlobalDescs.Realm={value:d,writable:!0,configurable:!0};const m=O(s,r,o),{safeEvalWhichTakesEndowments:p}=m;for(const a of l)p(a);T(t,m)},initCompartment:function(e,t,n={}){const{transforms:a,sloppyGlobals:r}=n,o=O(e,a,r);T(t,o)},getRealmGlobal:function(e){const{safeGlobal:t}=N(e);return t},realmEvaluate:function(e,t,n={},a={}){const{safeEvalWhichTakesEndowments:r}=N(e);return r(t,n,a)}},Ve=function(){const e=eval,t=e(Ce);return i(),l(),d(t)}(),je=r(Ve,Ue);let Be;class Fe{constructor(){this.dependencies=new Map}register(e,t){this.dependencies.set(e,t)}fallback(e){throw new Error(`Injector: Can't resolve ${e}`)}resolve(e,t=null){const n=this,a=new Proxy(Object.create(null),{get(e,t){return"string"==typeof t?n.dependencies.has(t)?n.dependencies.get(t):n.fallback(t):void 0}});return function(){return e.apply(t,[a,...arguments])}}}w.cacheResult=!0,x.cacheResult=!0,I.cacheResult=!0,P.cacheResult=!0,k.cacheResult=!0;var We=Object.freeze({__proto__:null,CSSStyleSheet:function({catchNextError:e,state:{documentView:n},toNativeObject:t}){const a=e(n);return{insertRule(n,r){const o=e(t(this));return n.includes(":host")&&a.contains(o.ownerNode)||o.insertRule(n,r),r},addRule(n,r,o){const i=e(t(this));return n.includes(":host")&&a.contains(i.ownerNode)||i.addRule(n,r,o),-1}}},CustomElementRegistry:function({bindObject:e,catchNextError:t,currentNativeObject:n,customElements:a,global:r,langUtils:{create:i,construct:l,setPrototypeOf:s,inherits:c,isArray:d},symbols:{elementDefined:u},toNativeObject:o}){const m=new Map;return{define(e,t,n={}){if(a.has(e))throw new TypeError(`customElements: The "${e}" has been registered`);if(!e.includes("-"))throw new TypeError(`Illegal constructor`);const o=t.observedAttributes;if(a.set(e,{constructor:t,observedAttributes:d(o)?[...o]:[],options:n}),m.has(e))for(let t;t=m.get(e).shift();)t();r.document.querySelectorAll(n.extends?`${n.extends}[is="${e}"]`:e).forEach(e=>{this.upgrade(e)})},get(e){const t=a.get(e);return t?t.constructor:void 0},upgrade(r){const d=r.getAttribute("is")||r.localName,m=a.get(d);if(m&&!(r instanceof m.constructor)){const a=o(r);n.set(a);const d=l(m.constructor,[]);if(n.set(null),s(r,c(d,i(m.constructor.prototype))),t(a).setAttribute(u,""),e(r,a),m.observedAttributes.length&&r.attributeChangedCallback)for(const e of m.observedAttributes){const t=r.getAttribute(e);t&&r.attributeChangedCallback(e,null,t)}t(a).isConnected&&r.connectedCallback&&r.connectedCallback()}},whenDefined(e){return a.get(e)?Promise.resolve():new Promise((t)=>{m.has(e)||m.set(e,[]),m.get(e).push(t)})}}},Document:function({catchNextError:e,currentScript:t,global:n,langUtils:{defineProperty:l,from:s,keys:c},state:{parent:d},SandboxSecurityError:a,sanitizer:r,toNativeAny:o,toVirtualAny:i}){const u=new WeakMap,m=d.document,f=e(m),b=e=>function(){const t=s(arguments).map(e=>o(e)),n=f[e](...t),a=i(n);return a},g=e=>function(...t){const o={createElement:{name:t[0],options:t[1]},["createElementNS"]:{ns:t[0],name:t[1],options:t[2]}}[e];if(!r.isValidElement(o.name))throw new a(`Forbidden: tag <${o.name} />`);const l=f[e](...t);if(o.options){if(!r.isValidElement(o.options.is))throw new a(`Forbidden: tag <${o.name} is="${o.options.is}" />`);l.setAttribute("is",o.options.is)}const s=i(l);return n.customElements.upgrade(s),s},E=b("adoptNode"),y=b("createAttribute"),h=b("createAttributeNS"),S=b("createCDATASection"),v=b("createComment"),C=b("createDocumentFragment"),N=g("createElement"),T=g("createElementNS"),A=b("createEvent"),O=b("createNodeIterator"),M=b("createProcessingInstruction"),L=b("createTextNode"),R=b("createTreeWalker"),w=b("importNode"),D={adoptNode:E,get body(){return this.querySelector("body")},get characterSet(){return f.characterSet},get contentType(){return f.contentType},createAttribute:y,createAttributeNS:h,createCDATASection:S,createComment:v,createDocumentFragment:C,createElement:N,createElementNS:T,createEvent:A,createNodeIterator:O,createProcessingInstruction:M,createTextNode:L,createTreeWalker:R,get currentScript(){return t.get()},get defaultView(){return n},get documentElement(){return this.querySelector("html")},get documentURI(){return f.documentURI},get domain(){return f.domain},get head(){return this.querySelector("head")},get hidden(){return f.hidden},importNode:w,get readyState(){return f.readyState},get title(){return this.querySelector("title").textContent},set title(e){this.querySelector("title").textContent=e},get URL(){return f.URL},get visibilityState(){return f.visibilityState}};return c(d.Document.prototype).filter(e=>/^on[\w\W]+$/.test(e)).forEach(e=>{l(D,e,{enumerable:!0,configurable:!0,get(){const t=u.get(this);return t&&t[e]||null},set(t){const n=e.replace("on",""),a=this[e];u.has(this)||u.set(this,{}),a&&this.removeEventListener(n,a),this.addEventListener(n,t),u.get(this)[e]=t}})}),D},Element:function({callAndWrapError:e,catchNextError:t,customElements:n,events:a,langUtils:{from:m},symbols:{prefix:p},SandboxSecurityError:r,sanitizer:o,toNativeAny:i,toNativeObject:l,toVirtualAny:s,toVirtualNodeCreater:c,toVirtualObject:d,windowView:u}){const f=t(u),b=(e,n)=>t(l(e))[n],g=(e,a)=>function(){const[c,d]=a(arguments),u=m(arguments).map(e=>i(e)),f=t(l(this)),b=f.getAttribute(c),g=f.nodeName;if(!o.isValidAttribute(g,c,d)||0===c.indexOf(p)||0===d.indexOf(p)||b&&0===b.indexOf(p))throw new r(`Forbidden: attribute [${c}=${JSON.stringify(d)}]`);const E=f[e](...u),y=f.getAttribute("is")||f.localName,h=f.getAttribute(c);return n.get(y)&&n.get(y).observedAttributes.includes(c)&&this.attributeChangedCallback&&(null!==b||null!==h)&&this.attributeChangedCallback(c,b,h),s(E)},E=e=>{const t=f.getBoundingClientRect();return e.x-=t.x,e.y-=t.y,e},y=(e,t)=>{a.dispatch("mutation",{addedNodes:e,removedNodes:t})};return{get className(){return b(this,"className")},set className(e){this.setAttribute("class",e)},set innerHTML(t){e(()=>{const e=l(this),n=e.isConnected,a=o.sanitize(t),r=m(e.childNodes),i=m(a.childNodes);for(;e.firstChild;)e.removeChild(e.firstChild);"template"===e.nodeName.toLowerCase()?e.content.appendChild(a):e.appendChild(a),n&&y(i,r)})},get innerHTML(){return b(this,"innerHTML")},set outerHTML(t){e(()=>{const e=l(this),n=e.isConnected,a=o.sanitize(t),r=m(a.childNodes);e.parentNode.replaceChild(a,e),n&&y(r,[e])})},get outerHTML(){return b(this,"outerHTML")},insertAdjacentHTML(t,n){e(()=>{const e=l(this),a=e.isConnected,r=o.sanitize(n),i=m(r.childNodes);switch(t.toLowerCase()){case"beforebegin":e.parentNode.insertBefore(r,e);break;case"afterbegin":e.insertBefore(r,e.firstChild);break;case"beforeend":e.appendChild(r);break;case"afterend":e.parentNode.insertBefore(r,e.nextElementSibling);break;default:throw new TypeError(`invalid parameter '${t}'`);}a&&y(i,[])})},insertAdjacentElement:c("insertAdjacentElement",e=>[e[1]],e=>e[1].isConnected?[e[1]]:[]),before:c("before",e=>e,e=>e.filter(e=>e.isConnected)),append:c("append",e=>e,e=>e.filter(e=>e.isConnected)),after:c("after",e=>e,e=>e.filter(e=>e.isConnected)),remove:c("remove",()=>[],(e,n)=>n.isConnected?[n]:[]),getBoundingClientRect(){const e=t(l(this)),n=e.getBoundingClientRect();return d(E(n))},getClientRects(){const e=t(l(this)),n=e.getClientRects();for(let e=0;e<n.length;e++)E(n[e]);return d(n)},removeAttribute:g("removeAttribute",e=>[e[0],""]),removeAttributeNS:g("removeAttributeNS",e=>[e[1],""]),removeAttributeNode:g("removeAttributeNode",e=>[e[0].name,""]),setAttribute:g("setAttribute",e=>e),setAttributeNS:g("setAttributeNS",e=>[e[1],e[2]]),setAttributeNode:g("setAttributeNode",e=>[e[0].name,e[0].value]),setAttributeNodeNS:g("setAttributeNodeNS",e=>[e[0].name,e[0].value]),toggleAttribute:g("toggleAttribute",e=>[e[0],""])}},Event:function({catchNextError:e,state:{documentView:r,parent:o},global:t,toNativeObject:n,toVirtualObject:a}){const i=e(r);return{composedPath(){const r=e(n(this)),l=r.composedPath();return l.filter(e=>e===o||e instanceof o.Node&&i.contains(e)).map(e=>e===o?t:a(e))}}},FocusEvent:function({global:e,toNativeObject:t,toVirtualAny:n}){return{get relatedTarget(){const a=t(this).relatedTarget;return a instanceof e.Object?n(a):null}}},HTMLAnchorElement:function({catchNextError:e,cspValidation:t,toNativeObject:n}){return{click(){t("navigate-to",this.href,"error")&&e(n(this)).click()}}},HTMLFormElement:function({catchNextError:e,cspValidation:t,toNativeObject:n}){return{submit(){t("form-action",this.action,"error")&&t("navigate-to",this.action,"error")&&e(n(this)).submit()}}},HTMLLinkElement:function({catchNextError:e,console:t,cspValidation:n,cssStyleSheetFilter:a,global:r,symbols:{connectedCallback:i,disabled:l},toNativeObject:o}){return{[i](){const i=e(o(this));i.href&&!n("style-src",i.href,"warn")&&i.setAttribute("type",l);const s=()=>{try{return!!i.sheet.cssRules}catch(t){return!1}},c=()=>{s()?a(i.sheet):(i.setAttribute("type",l),t.error(`Access to stylesheet at '${i.href}' from origin '${r.location.origin}' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.`))};i.addEventListener("load",c),i.addEventListener("error",c)}}},HTMLScriptElement:function({browserUtils:{scriptSourceLoader:c,queueMicrotask:d},catchNextError:e,cspValidation:t,currentNativeObject:n,currentScript:a,evaluate:r,global:o,langUtils:{isNull:u},SandboxSecurityError:i,sanitizer:l,state:{parent:m},symbols:{scriptType:p,initializeCallback:f,connectedCallback:b},toNativeObject:s}){const g=e(m.URL),E=p,y=t=>e(s(t)),h=(e,t,n)=>{if(!l.isValidAttribute(e.nodeName,t,n))throw new i(`Forbidden: attribute [${t}=${JSON.stringify(n)}]`)},S=(e,t=null,n={})=>{a.set(t);try{r(e,n)}catch(e){d(()=>{throw e})}a.set(null)};return{[f](){return e(n.get()).setAttribute("type",E),this},get src(){const e=y(this),t=e.getAttribute("src");return u(t)?"":new g(t,this.baseURI).href},set src(e){const t=y(this);h(t,"src",e),t.setAttribute("src",e)},get type(){const e=y(this),t=e.getAttribute("type");return u(t)?"":t},set type(e){const t=y(this);t.setAttribute("type",e)},[b](){const e=y(this);e.getAttribute("type")!==E||(this.src?t("script-src",this.src,"warn")&&c(this.src).then(e=>{S(e,this),this.dispatchEvent(new o.Event("load"))},()=>{this.dispatchEvent(new o.Event("error"))}):this.textContent&&S(this.textContent,this))}}},HTMLStyleElement:function({catchNextError:e,toNativeObject:t,symbols:{connectedCallback:a},cssStyleSheetFilter:n}){return{[a](){const a=e(t(this)),r=a.sheet;n(r)}}},MouseEvent:function({catchNextError:e,state:{parent:n,windowView:a},toNativeObject:t}){const r=e(a),o=e=>e.view!==n;return{get clientX(){const n=e(t(this));if(!o(n)){const e=r.getBoundingClientRect();return n.clientX-e.x}return n.clientX},get clientY(){const n=e(t(this));if(!o(n)){const e=r.getBoundingClientRect();return n.clientY-e.y}return n.clientY},get x(){return this.clientX},get y(){return this.clientY},get pageX(){return r.scrollLeft+this.clientX},get pageY(){return r.scrollTop+this.clientY}}},Node:function({catchNextError:e,global:t,state:{parent:r},toNativeObject:n,toVirtualNodeCreater:a}){const o=r.document,i=(t,n)=>e(t)[n];return{get ownerDocument(){const e=t.document;return e===this?null:e},get nodeName(){const e=t.document,a=e===this?o:n(this);return i(a,"nodeName")},get nodeType(){const e=t.document,a=e===this?o:n(this);return i(a,"nodeType")},appendChild:a("appendChild",e=>[e[0]],e=>e[0].isConnected?[e[0]]:[]),insertBefore:a("insertBefore",e=>[e[0]],e=>e[0].isConnected?[e[0]]:[]),replaceChild:a("replaceChild",e=>[e[0]],e=>[e[1]]),removeChild:a("removeChild",()=>[],e=>[e[0]])}},ShadowRoot:function({callAndWrapError:e,toNativeObject:t,sanitizer:n}){return{get innerHTML(){return e(()=>t(this).innerHTML)},set innerHTML(a){e(()=>{const e=t(this),r=n.sanitize(a);for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)})}}},Storage:function({callAndWrapError:e,catchNextError:t,currentNativeObject:n,id:a,langUtils:{inherits:i,isString:l,keys:s},symbols:{prefix:c,initializeCallback:d},toNativeObject:r,toVirtualObject:o}){const u=`${c}${a}.`,m=e=>t(r(e)),p=e=>s(e).filter(e=>0===e.indexOf(u));return{[d](){return e(()=>i(this,new Proxy(n.get(),{get(e,t){const n=o(e);return l(t)?n.getItem(t):void 0},set(e,t,n){const a=o(e);return!!l(t)&&(a.setItem(t,n),!0)},deleteProperty(e,t){const n=o(e);return!!l(t)&&(n.removeItem(t),!0)}})))},get length(){return e(()=>p(r(this)).length)},key(t){return e(()=>p(r(this)).map(e=>e.replace(u,""))[t])},getItem(e){return m(this).getItem(`${u}${e}`)},setItem(e,t){return m(this).setItem(`${u}${e}`,t)},removeItem(e){return m(this).removeItem(`${u}${e}`)},clear(){const t=m(this);e(()=>p(t).forEach(e=>t.removeItem(e)))}}},Touch:function({catchNextError:e,toNativeObject:t,windowView:n}){const a=e(n);return{get clientX(){const n=e(t(this)),r=a.getBoundingClientRect();return n.clientX-r.x},get clientY(){const n=e(t(this)),r=a.getBoundingClientRect();return n.clientY-r.y},get pageX(){return a.scrollLeft+this.clientX},get pageY(){return a.scrollTop+this.clientY}}},XMLHttpRequest:function({callAndWrapError:e,cspValidation:t,state:{parent:a},toNativeObject:n}){return{open(){return e(()=>{const e=new a.URL(arguments[1],a.document.baseURI);t("connect-src",e.href,"error")&&n(this).open(...arguments)})}}}});H.cacheResult=!0,_.cacheResult=!0;var Ge=["Array","AudioParamMap","CSSKeyframesRule","CSSNumericArray","CSSRuleList","CSSStyleDeclaration","CSSTransformValue","CSSUnparsedValue","DataTransferItemList","DOMRectList","DOMStringList","DOMTokenList","EventCounts","FileList","FormData","Headers","HTMLAllCollection","HTMLCollection","HTMLFormControlsCollection","HTMLFormElement","HTMLOptionsCollection","HTMLSelectElement","KeyboardLayoutMap","MediaKeyStatusMap","MediaList","MIDIInputMap","MIDIOutputMap","MimeTypeArray","NamedNodeMap","NodeList","Object","Plugin","PluginArray","Promise","RadioNodeList","RTCStatsReport","SourceBufferList","StylePropertyMap","StylePropertyMapReadOnly","StyleSheetList","SVGLengthList","SVGNumberList","SVGPointList","SVGStringList","SVGTransformList","TextTrackCueList","TextTrackList","TouchList","XRAnchorSet","XRInputSourceArray"];U.cacheResult=!0,V.cacheResult=!0,j.cacheResult=!0,B.cacheResult=!0,F.cacheResult=!0,W.cacheResult=!0;const ze=(e,t=/^(on)[\w]+/)=>Object.keys("string"==typeof e?window[e].prototype:e).filter(e=>t.test(e));var Ke={allowInterfaces:["AggregateError","AnalyserNode","Animation","AnimationEffect","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","atob","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioDestinationNode","AudioListener","AudioNode","AudioParam","AudioParamMap","AudioProcessingEvent","AudioScheduledSourceNode","BaseAudioContext","BeforeUnloadEvent","Blob","BlobEvent","blur","btoa","ByteLengthQueuingStrategy","cancelAnimationFrame","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","CDATASection","ChannelMergerNode","ChannelSplitterNode","CharacterData","clearInterval","clearTimeout","Clipboard","ClipboardEvent","ClipboardItem","close","closed","Comment","CompositionEvent","CompressionStream","console","ConstantSourceNode","ConvolverNode","CountQueuingStrategy","createImageBitmap","CSS","CSS2Properties","CSSAnimation","CSSConditionRule","CSSFontFaceRule","CSSGroupingRule","CSSImageValue","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSKeywordValue","CSSMathInvert","CSSMathMax","CSSMathMin","CSSMathNegate","CSSMathProduct","CSSMathSum","CSSMathValue","CSSMatrixComponent","CSSMediaRule","CSSNamespaceRule","CSSNumericArray","CSSNumericValue","CSSPageRule","CSSPerspective","CSSPositionValue","CSSPropertyRule","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSSkew","CSSSkewX","CSSSkewY","CSSStyleDeclaration","CSSStyleRule","CSSStyleSheet","CSSStyleValue","CSSSupportsRule","CSSTransformComponent","CSSTransformValue","CSSTransition","CSSTranslate","CSSUnitValue","CSSUnparsedValue","CSSVariableReferenceValue","CustomElementRegistry","customElements","CustomEvent","DataTransfer","DataTransferItem","DataTransferItemList","DelayNode","DeviceMotionEvent","DeviceMotionEventAcceleration","DeviceMotionEventRotationRate","DeviceOrientationEvent","devicePixelRatio",{name:"Document",value:["activeElement","adoptNode","body","characterSet","childElementCount","children","contentType","createAttribute","createAttributeNS","createCDATASection","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createNodeIterator","createProcessingInstruction","createTextNode","createTreeWalker","defaultView","documentElement","documentURI","domain","firstElementChild","getAnimations","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","head","hidden","importNode","lastElementChild",...ze("Document"),"querySelector","querySelectorAll","readyState","styleSheets","title","URL","visibilityState"]},{name:"DocumentFragment",value:["append","childElementCount","children","firstElementChild","getElementById","lastElementChild","prepend","querySelector","querySelectorAll","replaceChildren"]},"DocumentTimeline","DOMError","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMStringList","DOMStringMap","DOMTokenList","DragEvent","DynamicsCompressorNode",{name:"Element",value:["after","animate","append","attachShadow","attributes","attributeStyleMap","before","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","computedStyleMap","firstElementChild","getAnimations","getAttribute","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","hasAttribute","hasAttributeNS","hasAttributes","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","namespaceURI","nextElementSibling","outerHTML","part","prefix","previousElementSibling","querySelector","querySelectorAll","remove","removeAttribute","removeAttributeNode","removeAttributeNS","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNode","setAttributeNodeNS","setAttributeNS","shadowRoot","tagName","toggleAttribute",...ze("Element",/^(aria|on)[\w]+/)]},"ElementInternals","ErrorEvent",{name:"Event",value:["bubbles","cancelable","currentTarget","defaultPrevented","eventPhase","initEvent","preventDefault","stopImmediatePropagation","stopPropagation","target","timeStamp","type"]},{name:"EventTarget",value:["addEventListener","dispatchEvent","removeEventListener"]},"fetch","focus","FocusEvent","FontFace","FontFaceSetLoadEvent","GainNode","getComputedStyle","HashChangeEvent","HTMLAllCollection","HTMLAnchorElement","HTMLAreaElement","HTMLAudioElement","HTMLQuoteElement",{name:"HTMLBodyElement",value:ze("HTMLBodyElement")},"HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLTableCaptionElement","HTMLTableColElement","HTMLDataElement","HTMLDataListElement","HTMLDocument",{name:"HTMLElement",value:["accessKey","autofocus","blur","click","dataset","dir","draggable","focus","hidden","innerText","lang","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth",...ze("HTMLElement"),"spellcheck","style","tabIndex","title"]},"HTMLModElement","HTMLDetailsElement",{name:"HTMLDialogElement",value:["close","open","returnValue","show"]},"HTMLDivElement","HTMLDListElement","HTMLFieldSetElement","HTMLFormElement","HTMLHeadingElement","HTMLHeadElement","HTMLHRElement","HTMLHtmlElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMediaElement","HTMLMeterElement","HTMLMenuElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLScriptElement","HTMLSelectElement",{name:"HTMLSlotElement",value:["name"]},"HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableCellElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTableRowElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","WebWidgetPortalRegistry","HTMLWebSandboxBaseInterface",{name:"HTMLWebSandboxElement",value:["contentDocument","contentWindow","csp","evaluate","name","src","text"]},"HTMLLifecycleExtension",{name:"HTMLWebWidgetElement",value:["application","bootstrap","csp","inactive","load","loading","mount","name","portals","sandboxed","slot","src","status","text","unload","unmount","update","NOT_LOADED","LOADING_SOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UPDATING","UNMOUNTING","UNLOADING","LOAD_ERROR","BOOTSTRAPP_ERROR","MOUNT_ERROR","UPDAT_ERROR","UNMOUNT_ERROR","UNLOAD_ERROR","SKIP_BECAUSE_BROKEN"]},"IIRFilterNode","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","InputEvent","Keyboard","KeyboardEvent","KeyboardLayoutMap","KeyframeEffect",{name:"localStorage",value:[]},"Location","location","matchMedia","MediaCapabilities","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaError","MediaKeyMessageEvent","MediaKeys","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaSession","MediaSource","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamTrack","MediaStreamTrackEvent","menubar","MessageChannel","MessageEvent","MessagePort",{name:"MouseEvent",value:["altKey","button","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","relatedTarget","shiftKey","x","y"]},"MutationObserver","MutationRecord","name","NamedNodeMap","NavigationPreloadManager",{name:"Navigator",value:["language","languages","userAgent"]},"navigator",{name:"Node",value:["appendChild","ATTRIBUTE_NODE","baseURI","CDATA_SECTION_NODE","childNodes","cloneNode","COMMENT_NODE","contains","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","ELEMENT_NODE","ENTITY_NODE","ENTITY_REFERENCE_NODE","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isEqualNode","lastChild","nextSibling","nodeName","nodeType","nodeValue","normalize","NOTATION_NODE","ownerDocument","parentNode","previousSibling","PROCESSING_INSTRUCTION_NODE","removeChild","replaceChild","textContent","TEXT_NODE"]},"NodeFilter","NodeIterator","NodeList","Notification","OfflineAudioCompletionEvent","OfflineAudioContext","offscreenBuffering","OffscreenCanvas","OffscreenCanvasRenderingContext2D",...ze(window),"OverconstrainedError","PageTransitionEvent","Path2D","RadioNodeList","requestAnimationFrame","requestIdleCallback","ResizeObserver","ResizeObserverEntry","ResizeObserverSize","setInterval","setTimeout",{name:"ShadowRoot",value:["activeElement","delegatesFocus","getAnimations","host","innerHTML","mode","styleSheets"]},"SourceBuffer","SourceBufferList","speechSynthesis","SpeechSynthesisErrorEvent","SpeechSynthesisEvent","SpeechSynthesisUtterance",{name:"Storage",value:["clear","getItem","key","length","removeItem","setItem"]},"StorageEvent","StorageManager","styleMedia","StylePropertyMap","StylePropertyMapReadOnly","StyleSheet","StyleSheetList","SubmitEvent",{name:"Text",value:["wholeText"]},"TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransitionEvent","TreeWalker","TrustedHTML","TrustedScript","TrustedScriptURL","TrustedTypePolicy","TrustedTypePolicyFactory","trustedTypes",{name:"UIEvent",value:["detail"]},"URL","URLSearchParams","VideoPlaybackQuality","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArrayObject","WheelEvent",{name:"Window",value:[]},"WritableStream","WritableStreamDefaultWriter","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]};let Xe;G.cacheResult=!0,z.cacheResult=!0,K.cacheResult=!0;var qe=Object.freeze({__proto__:null,catchNextError:function({callAndWrapError:e,langUtils:{deleteProperty:t,get:n,isFunction:a,set:r}},o){return new Proxy(o,{deleteProperty(){return e(()=>t(...arguments))},get(t,r,o){const i=e(()=>n(t,r));return a(i)?function(){return e(()=>i.apply(this===o?t:this,arguments))}:i},set(t,n,a){return e(()=>r(t,n,a))}})},cspValidation:w,cssStyleSheetFilter:D,currentScript:x,sanitizer:I,toVirtualNodeCreater:function({callAndWrapError:e,events:t,state:{parent:o},toNativeAny:n,toNativeObject:a,toVirtualAny:r,langUtils:{from:i}},l,s,c){return function(){return e(()=>{const e=o.Node.DOCUMENT_FRAGMENT_NODE;let d;const u=a(this),m=i(arguments).map(e=>n(e)),p=u.isConnected;p&&(d={addedNodes:s(m,u).map(t=>t.nodeType===e?[...t.childNodes]:t).flat(1),removedNodes:c(m,u)});const f=u[l](...m);return p&&t.dispatch("mutation",d),r(f)})}},bindObject:function({state:{nativeCache:e,virtualCache:t}},n,a){e.set(n,a),t.set(a,n)},callAndWrapError:function({global:e,langUtils:{apply:n,isObject:a},toVirtualAny:t},r,o,i=[]){try{return n(r,o,i)}catch(n){if(a(n)&&n instanceof e.Object)throw n;throw t(n)}},createVirtualClass:P,toLiveVirtuaObject:function({toNativeAny:e,toVirtualAny:t,callAndWrapError:n},a){return new Proxy(a,["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"].reduce((a,r)=>(a[r]=(...a)=>{const o=a.map(t=>e(t)),i=n(Reflect[r],Reflect,o);return t(i)},a),{}))},toNativeAny:function({langUtils:{isObject:n,isFunction:a},toNativeObject:e,toNativeFunction:t},r){return n(r)?e(r):a(r)?t(r):r},toNativeFunction:k,toNativeObject:function({state:{nativeCache:e}},t){const n=e.get(t);return n?n:t},toVirtualAny:function({langUtils:{isObject:n,isFunction:a},toVirtualObject:e,toVirtualFunction:t},r){return n(r)?e(r):a(r)?t(r):r},toVirtualClass:H,toVirtualFunction:_,toVirtualObject:function({bindObject:e,browserUtils:{queueMicrotask:l},currentNativeObject:t,global:n,langUtils:{construct:s,toString:c},parent:a,SandboxSecurityError:r,toVirtualClass:o,virtualCache:i},d){if(i.has(d))return i.get(d);if(d instanceof n.Object)return d;const u=d.constructor,m=u&&o(u);if(!m||[a,a.document].includes(d)||d instanceof a.Node&&d.isConnected&&a.document.documentElement.contains(d))throw l(()=>{a.console.error("[DEBUG] SandboxSecurityError:","toVirtualObject(",d,")")}),new r(`Forbidden: ${c(d)}`);t.set(d);const p=s(m,[]);return t.set(null),e(p,d),p},allowLiveOwnPropertysConfig:U,browserUtils:V,console:j,currentNativeObject:B,events:F,langUtils:W,permissionsConfig:G,SandboxSecurityError:z,symbols:K}),Ye=Object.freeze({__proto__:null,installBOMInterfaces:function({permissionsConfig:e,toVirtualClass:t,global:n,langUtils:{defineProperties:a},state:{parent:r}}){a(n,[...e.allowInterfaces.keys()].filter(e=>!n[e]).reduce((e,o)=>(e[o]={enumerable:!1,configurable:!0,get(){const e=t(r[o]);return a(n,{[o]:{value:e,writable:!0,enumerable:!1,configurable:!0}}),e}},e),{}))},installContainLayout:X,installCSPHooks:function({console:e,cspValidation:t,events:n,global:a,symbols:r,toVirtualObject:o,state:{parent:i},langUtils:{isString:l}}){i.addEventListener("hashchange",e=>{const t=o(new e.constructor(e.type,{newUrl:e.newURL,oldURL:e.oldURL}));a.dispatchEvent(t)});const s=e=>{t("navigate-to",e.target.href,"warn")||e.preventDefault()},c=e=>{let n=e.target.action;const{submitter:a}=e;if(a){const e=a.getAttribute("formaction");e&&(n=a.formAction)}t("form-action",n,"warn")&&t("navigate-to",n,"warn")||e.preventDefault()},d=e=>{if(l(e))return;const t=o(e),n=e.localName,i=a.customElements.get(1===t.nodeType&&t.getAttribute("is")||t.localName);t[r.connectedCallback]?t[r.connectedCallback]():i&&!(t instanceof i)?a.customElements.upgrade(t):i&&t.connectedCallback&&t.connectedCallback(),"a"===n?e.addEventListener("click",s,!0):"form"===n&&e.addEventListener("submit",c,!0),e.childNodes.forEach(d)},u=e=>{const t=o(e),n=e.localName;t[r.disconnectedCallback]?t[r.disconnectedCallback]():a.customElements.get(t.localName)&&t.disconnectedCallback&&t.disconnectedCallback(),"a"===n?e.removeEventListener("click",s):"form"===n&&e.removeEventListener("submit",c),e.childNodes.forEach(u)};n.add("mutation",({addedNodes:t,removedNodes:n})=>{try{n.forEach(u),t.forEach(d)}catch(t){e.error(t)}})},installEsTraps:function({classRegistry:e,createVirtualClass:t,currentNativeObject:n,state:{parent:o},symbols:{initializeCallback:i},toLiveVirtuaObject:a,langUtils:{inherits:l},evaluate:r}){return r(((e,t,n,a,r,o,i)=>["Array","Error","EvalError","Object","Promise","RangeError","ReferenceError","SyntaxError","TypeError","URIError"].map(l=>{const s=a[l],c=t(s,{[r](){return i(this,o(n.get()))}});return e.set(s,c),c})).toString())(e,t,n,o,i,a,l)},installView:function({bindObject:e,currentNativeObject:t,documentView:n,langUtils:{construct:l,setPrototypeOf:s,create:c},parent:a,toVirtualClass:r,windowView:o,global:i}){const d=r(a.Window,o.constructor),u=r(a.Document,n.constructor),m=r(a.HTMLDocument),[p,f]=[[o,d,i],[n,m]].map(([n,a,r])=>(t.set(n),r=r||l(a,[]),t.set(null),e(r,n),r));return s(i,c(d.prototype)),{Window:d,Document:u,window:p,document:f}},installWindowProperties:function({evaluate:e,injector:t,global:n,langUtils:{mixin:a}}){const r=e(`(${q.toString()})`),o=t.resolve(r)();a(n,o)}});const Qe=e=>e.replace(/^\/|\/$/g,"").split("/"),Je=["connect-src","script-src","style-src"];class Ze{constructor(e){this.policy={...("string"==typeof e?R(e):e)}}validity(e,t){let n=!0,a="",r=this.policy[e];return(!r&&Je.includes(e)&&(e="default-src",r=this.policy[e]||["*"]),!r)?{valid:n,message:a}:(n=r.length&&r.some(e=>Y(e,t)),n||(a=`Refused: ${JSON.stringify(t)}: Because it violates the following Content Security Policy directive: "${e} ${r.join(" ")}"`),{valid:n,message:a})}}const $e=Object.seal(/^data-[\-\w.\u00B7-\uFFFF]/),et=Object.seal(/^aria-[\-\w]+$/),tt=Object.seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nt=Object.seal(/^(?:\w+script|data):/i),at=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rt=e=>{if("string"==typeof e&&["","module","application/javascript","application/ecmascript","text/javascript","text/ecmascript"].includes(e.trim().toLowerCase()))return!0;let t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE;if(t||(t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE=new Map),t.has(e))return t.get(e);t.set(e,!1);const n=document.createElement("script");n.setAttribute("type",e),n.textContent=`${"WEBSANDBOX_PREVENT_SCRIPT_TYPE"}.set(${JSON.stringify(e)}, true)`,document.head.appendChild(n);const a=t.get(e);return document.head.removeChild(n),a},{Node:ot,NodeFilter:it,Text:lt,Comment:st,NamedNodeMap:ct,DocumentFragment:dt,document:ut}=window,mt=Symbol("executeHook"),pt=Symbol("sanitizeElements"),ft=Symbol("sanitizeAttributes"),bt=Symbol("sanitizeShadowDOM"),gt=Symbol("sanitize"),Et=["base","embed","iframe","meta","noscript","object","param","frame","frameset","noframes"],yt=["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"],ht=["audio","video","img","source","image","track"],St=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"],vt=ut.createElement("form"),Ct=e=>{try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=""}catch(t){e.remove()}}},Nt=function(e,t){if(t.removeAttribute(e),"is"===e)try{t.setAttribute(e,"")}catch(e){}},Tt=e=>{const t=e.match(/^[\r\n\t ]+/),n=t&&t[0],a=ut.implementation.createHTMLDocument(""),{body:r}=a;return r.innerHTML=e,e&&n&&a.body.insertBefore(ut.createTextNode(n),a.body.childNodes[0]||null),r},At=e=>(e.ownerDocument||e).createNodeIterator(e,it.SHOW_ELEMENT|it.SHOW_COMMENT|it.SHOW_TEXT,()=>it.FILTER_ACCEPT,!1),Ot=e=>!(e instanceof lt||e instanceof st)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof ct&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore),Mt=e=>"object"==typeof ot?e instanceof ot:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;class Lt{constructor(e={}){this.config=e}[mt](e,t,n){const a=this.config[e];a&&a.call(this,t,n,this.config)}[pt](e){const{allowElements:t,dropElements:n}=this.config;if(this[mt]("beforeSanitizeElements",e,null),Ot(e))return Ct(e),!0;if(e.nodeName.match(/[\u0080-\uFFFF]/))return Ct(e),!0;const a=e.nodeName.toLowerCase();if(this[mt]("uponSanitizeElement",e,{tagName:a,allowElements:t}),"script"===a&&!e.type)return Ct(e),!0;if(("svg"===a||"math"===a)&&0!==e.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length)return Ct(e),!0;if(!Mt(e.firstElementChild)&&(!Mt(e.content)||!Mt(e.content.firstElementChild))&&/<[/\w]/g.test(e.innerHTML)&&/<[/\w]/g.test(e.textContent))return Ct(e),!0;if(!this.isValidElement(a)){const t=!Et.includes(a)&&n&&!n.includes(a);if(t&&!yt.includes(a)){const t=e.parentNode,n=e.childNodes,a=n.length;for(let r=a-1;0<=r;--r)t.insertBefore(n[r].cloneNode(!0),e.nextSibling)}return Ct(e),!0}return("noscript"===a||"noembed"===a)&&/<\/no(script|embed)/i.test(e.innerHTML)?(Ct(e),!0):(this[mt]("afterSanitizeElements",e,null),!1)}isValidAttribute(e,t,n){const{allowAttributes:a,dropAttributes:r}=this.config,o=e.toLowerCase(),i=t.toLowerCase();if(("id"===i||"name"===i)&&(n in ut||n in vt))return!1;if(0===i.indexOf("on")||"script"===o&&"type"===i&&rt(n))return!1;if($e.test(i));else if(et.test(i));else{if(r&&r.includes(i)||a&&a.length&&!a.includes(i))return!1;if(St.includes(i));else if(tt.test(n.replace(at,"")));else if(("src"===i||"xlink:href"===i||"href"===i)&&"script"!==o&&0===n.indexOf("data:")&&ht.includes(o));else if(!nt.test(n.replace(at,"")));else if(!n);else return!1}return!0}isValidElement(e){const{allowElements:t,blockElements:n,dropElements:a}=this.config,r=e.toLowerCase();return!Et.includes(r)&&!(a&&a.includes(r)||n&&n.includes(r)||t&&t.length&&!t.includes(r))}[ft](e){const{allowAttributes:t}=this.config,n=e.nodeName;let a,r,o,i;this[mt]("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(s){const l={name:"",value:"",keep:!0,allowAttributes:t};for(i=s.length;i--;){a=s[i];const{name:t}=a;(r=a.value.trim(),o=t,l.name=o,l.value=r,l.keep=void 0,this[mt]("uponSanitizeAttribute",e,l),r=l.value,!l.keep)&&(this.isValidAttribute(n,o,r)||Nt(t,e))}this[mt]("afterSanitizeAttributes",e,null)}}[bt](e){let t;const n=At(e);for(this[mt]("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)(this[mt]("uponSanitizeShadowNode",t,null),!this[pt](t))&&(t.content instanceof dt&&this[bt](t.content),this[ft](t));this[mt]("afterSanitizeShadowDOM",e,null)}[gt](e,t){e=`${e}`;const n=Tt(e);if(!n)return t?ut.createDocumentFragment():"";const a=At(n);for(let n;n=a.nextNode();)this[pt](n)||(n.content instanceof dt&&this[bt](n.content),this[ft](n));if(t){const e=n.ownerDocument.createDocumentFragment();if(n)for(;n.firstChild;)e.appendChild(n.firstChild);return e}const r=n.innerHTML;return r}sanitize(e){return this[gt](e,!0)}sanitizeToString(e){return this[gt](e)}}var Rt={...qe,...We,...Ye,createCSPValidation(e,...t){return new Ze(...t)},createSanitizer(e,...t){return new Lt(...t)},isJavaScriptType(e,...t){return rt(...t)}};let wt=0;const Dt=Symbol("bridge"),xt=new WeakMap,It=e=>{let t=e;do if(t=t.getRootNode().host,t&&xt.has(t))return t;while(t);return null};class Pt{constructor(e,t={}){if(!e.isConnected)throw new Error(`Elements must be inserted into the DOM`);const n={csp:"default-src 'none'",...t,parent:e.ownerDocument.defaultView,windowView:e,documentView:e.attachShadow({mode:"closed"}),id:e.id||`#${wt}`,title:e.title||e.name};n.csp=R(n.csp);const a=It(e);if(a){const e=xt.get(a),t=e[Dt].id,r=e.debug,o=e[Dt].csp;n.debug=r,n.id=`${t}.${n.id}`,Object.keys(n.csp).forEach(e=>{o[e]?n.csp[e].forEach((t,a)=>{o[e].includes(t)||n.csp[e].splice(a,1)}):delete n.csp[e]})}const r=J(n);r.resolve(({browserUtils:{scriptSourceLoader:u},csp:e,debug:t,evaluate:n,global:a,id:r,installBOMInterfaces:o,installContainLayout:i,installCSPHooks:l,installEsTraps:s,installView:c,installWindowProperties:d})=>{c(),o(),d(),s(),i(),l(),this[Dt]={id:r,csp:e,debug:t,scriptSourceLoader:u,global:a,evaluate:n}})(),wt++,xt.set(e,this)}get global(){return this[Dt].global}get evaluate(){return this[Dt].evaluate}toNative(e){return this[Dt].toNativeAny(e)}toVirtual(e){return this[Dt].toVirtualAny(e)}unload(){this.global.close()}importScript(e,t){return this[Dt].scriptSourceLoader(e).then(e=>this.evaluate(e,t))}}window.WebSandbox=Pt;let kt;const Ht="function"==typeof window.queueMicrotask?window.queueMicrotask.bind(window):e=>(kt||(kt=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0)),_t=Symbol("first-connect"),Ut=Symbol("moveing");class Vt extends HTMLElement{constructor(){if(super(),"function"!=typeof this.lifecycleCallback)throw new Error("Must implement interface: lifecycleCallback")}get name(){return this.getAttribute("name")||""}set name(e){this.setAttribute("name",e)}get src(){const e=this.getAttribute("src");return null===e?"":new URL(e,this.baseURI).href}set src(e){this.setAttribute("src",e)}get text(){return this.getAttribute("text")||""}set text(e){this.setAttribute("text",e)}connectedCallback(){this.lifecycleCallback("connected"),this[_t]?this[Ut]&&this.lifecycleCallback("moved"):(this.lifecycleCallback("firstConnected"),this[_t]=!0)}disconnectedCallback(){this[Ut]=!0,this.lifecycleCallback("disconnected"),Ht(()=>{this.isConnected||(this[Ut]=!1,this.lifecycleCallback("destroyed"))})}attributeChangedCallback(){this.lifecycleCallback("attributeChanged",...arguments)}adoptedCallback(){this.lifecycleCallback("adopted",...arguments)}}window.HTMLWebSandboxBaseInterface=Vt;const jt=Symbol("sandboxInstance"),Bt=Symbol("autoloadDisabled"),Ft=new WeakSet,Wt=(e,t)=>{e[Bt]||Ft.has(e)||(e.src?(t.importScript(e.src).then(()=>{e.dispatchEvent(new Event("load"))},()=>{e.dispatchEvent(new Event("error"))}),Ft.add(e)):e.text&&(t.evaluate(e.text),Ft.add(e)))},Gt=e=>{if(!e.isConnected)return null;let t=e[jt];return t?(Wt(e,t),t):(t=new Pt(e,{csp:e.csp,debug:e.debug,id:e.id,name:e.name}),e[jt]=t,Wt(e,t),t)};class zt extends Vt{constructor(){super(),Reflect.defineProperty(this,"debug",{configurable:!0,get(){return null!==this.getAttribute("debug")},set(e){e?this.setAttribute("debug",""):this.removeAttribute("debug")}})}get csp(){return this.getAttribute("csp")||""}set csp(e){this.setAttribute("csp",e)}get contentWindow(){const e=this[jt];return e?e.global:null}get contentDocument(){const e=this[jt];return e?e.global.document:null}evaluate(e,t){const n=this[jt];if(!n)throw Error("Not initialized");return n.evaluate(e,t)}lifecycleCallback(e){switch(e){case"attributeChanged":case"firstConnected":Gt(this);break;case"destroyed":if(this[jt]){const e=this[jt];e.unload()}}}static get observedAttributes(){return["src","text"]}}zt.AUTOLOAD_DISABLED=Bt,zt.SANDBOX_INSTANCE=jt,window.HTMLWebSandboxElement=zt,customElements.define("web-sandbox",zt),e.HTMLWebSandboxElement=zt,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=web-sandbox.umd.js.map
