(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.WebSandbox={}))})(this,function(e){'use strict';function t(e,t=void 0){const n=`please report internal shim error: ${e}`;console.error(n),t&&(console.error(`${t}`),console.error(`${t.stack}`));debugger;throw n}function n(e,n){e||t(n)}function r(e){let t=`'use strict'; (${e})`;return t=t.replace(/\(0,\s*_[0-9a-fA-F]{3}\u200D\.e\)/g,"(0, eval)"),t=t.replace(/_[0-9a-fA-F]{3}\u200D\.g\./g,""),t=t.replace(/cov_[^+]+\+\+[;,]/g,""),t}function a(e,t){const{callAndWrapError:n}=e,{initRootRealm:a,initCompartment:o,getRealmGlobal:i,realmEvaluate:l}=t,{create:s,defineProperties:c}=Object;class d{constructor(){throw new TypeError("Realm is not a constructor")}static makeRootRealm(t={}){const o=s(d.prototype);return n(a,[e,o,t]),o}static makeCompartment(t={}){const a=s(d.prototype);return n(o,[e,a,t]),a}get global(){return n(i,[this])}evaluate(e,t,r={}){return n(l,[this,e,t,r])}}return c(d,{toString:{value:()=>"function Realm() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),c(d.prototype,{toString:{value:()=>"[object Realm]",writable:!1,enumerable:!1,configurable:!0}}),d}function o(e,t=!1){function r(t,r,o,i){for(const l of t){const t=B(e,l);t&&(n("value"in t,`unexpected accessor on global property: ${l}`),a[l]={value:t.value,writable:r,enumerable:o,configurable:i})}}const a={};return t?(r(ae,!0,!1,!0),r(oe,!0,!1,!0)):(r(ae,!1,!1,!1),r(oe,!1,!1,!1)),r(ie,!0,!1,!0),a}function i(){function e(e){if(e===void 0||null===e)throw new TypeError(`can't convert undefined or null to object`);return Object(e)}function t(e){return"symbol"==typeof e?e:`${e}`}function n(e,t){if("function"!=typeof e)throw TypeError(`invalid ${t} usage`);return e}const{defineProperty:r,defineProperties:a,getOwnPropertyDescriptor:o,getPrototypeOf:i,prototype:l}=Object;try{(0,l.__lookupGetter__)("x")}catch(e){return}a(l,{__defineGetter__:{value:function(t,a){const o=e(this);r(o,t,{get:n(a,"getter"),enumerable:!0,configurable:!0})}},__defineSetter__:{value:function(t,a){const o=e(this);r(o,t,{set:n(a,"setter"),enumerable:!0,configurable:!0})}},__lookupGetter__:{value:function(n){let r=e(this);n=t(n);let a;for(;r&&!(a=o(r,n));)r=i(r);return a&&a.get}},__lookupSetter__:{value:function(n){let r=e(this);n=t(n);let a;for(;r&&!(a=o(r,n));)r=i(r);return a&&a.set}}})}function l(){function e(e,a){let o;try{o=(0,eval)(a)}catch(t){if(t instanceof SyntaxError)return;throw t}const i=n(o),l=function(){throw new TypeError("Not available")};t(l,{name:{value:e}}),t(i,{constructor:{value:l}}),t(l,{prototype:{value:i}}),l!==Function.prototype.constructor&&r(l,Function.prototype.constructor)}const{defineProperties:t,getPrototypeOf:n,setPrototypeOf:r}=Object;e("Function","(function(){})"),e("GeneratorFunction","(function*(){})"),e("AsyncFunction","(async function(){})"),e("AsyncGeneratorFunction","(async function*(){})")}function s(){const e=new Function("try {return this===global}catch(e){return false}")();if(!e)return;const t=require("vm"),n=t.runInNewContext(se);return n}function c(){if("undefined"!=typeof document){const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const t=e.contentWindow.eval(le);return t}}function d(e,t=[],n=!1){const r=o(e,n),a=e.eval,i=e.Function,l=a(j)();return _({unsafeGlobal:e,sharedGlobalDescs:r,unsafeEval:a,unsafeFunction:i,callAndWrapError:l,allShims:t})}function u(e,t=!1){const n=ce(),r=d(n,e,t),{unsafeEval:a}=r;return a(de)(),a(ue)(),r}function m(e,t={}){const n=z(e),r=Z(n,n=>{if(n in t)return!1;if("eval"===n||pe.has(n)||!ne(me,n))return!1;const r=B(e,n);return!1===r.configurable&&!1===r.writable&&J(r,"value")});return r}function p(e){const t=e.search(he);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible html comment syntax rejected around line ${n}`)}}function f(e){const t=e.search(Se);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible import expression rejected around line ${n}`)}}function b(e){const t=e.search(ye);if(-1!==t){const n=e.slice(0,t).split("\n").length;throw new SyntaxError(`possible direct eval expression rejected around line ${n}`)}}function E(e){p(e),f(e),b(e)}function g(e){return 0===e.length?"":`const {${ee(e,",")}} = this;`}function h(e,t){const{unsafeFunction:n}=e,r=g(t);return n(`with (arguments[0]) {${r};return function() {'use strict';return eval(arguments[0]);};}`)}function S(e,n,r,a){const{unsafeEval:o}=e,i=o(ge);return function(l={},s={}){const c=s.transforms||[],d=te(c,r||[],[ve]);return function(r){let s={src:r,endowments:l};s=i(s,d);const c=m(n,s.endowments),u=m(s.endowments),p=te(c,u),f=h(e,p),b=o(fe)(e,n,s.endowments,a),E=Proxy.revocable({},b),g=E.proxy,S=X(f,n,[g]);b.useUnsafeEvaluator=!0;let y;try{return X(S,n,[s.src])}catch(t){throw y=t,t}finally{b.useUnsafeEvaluator&&(E.revoke(),t("handler did not revoke useUnsafeEvaluator",y))}}}}function y(e,t){const{unsafeEval:r,unsafeFunction:a}=e,o=r(be)(e,t);return n(q(o).constructor!==Function,"hide Function"),n(q(o).constructor!==a,"hide unsafeFunction"),o}function v(e){return(t,n,r={})=>e(n,r)(t)}function C(e,t){const{unsafeGlobal:r,unsafeEval:a,unsafeFunction:o}=e,i=a(Ee)(e,function(...e){const n=`${$(e)||""}`;let a=`${ee(e,",")}`;if(!ne(/^[\w\s,]*$/,a))throw new SyntaxError("shim limitation: Function arg must be simple ASCII identifiers, possibly separated by commas: no default values, pattern matches, or non-ASCII parameter names");if(new o(n),re(a,")"))throw new r.SyntaxError("shim limitation: Function arg string contains parenthesis");0<a.length&&(a+="\n/*``*/");const i=`(function(${a}){\n${n}\n})`;return t(i)});return n(q(i).constructor!==Function,"hide Function"),n(q(i).constructor!==o,"hide unsafeFunction"),i}function N(e){return n(Object(e)===e,"bad object, not a Realm instance"),n(Ce.has(e),"Realm instance has no record"),Ce.get(e)}function T(e,t){n(Object(e)===e,"bad object, not a Realm instance"),n(!Ce.has(e),"Realm instance already has a record"),Ce.set(e,t)}function A(e,t,n){U(e,{eval:{value:t,writable:!0,configurable:!0},Function:{value:n,writable:!0,configurable:!0}})}function M(e,t,n){const{sharedGlobalDescs:r,unsafeGlobal:a}=e,o=W(a.Object.prototype,r),i=S(e,o,t,n),l=i(),s=y(e,l),c=C(e,l),d=v(i);A(o,s,c);const u=_({safeGlobal:o,safeEval:s,safeEvalWhichTakesEndowments:d,safeFunction:c});return u}function L(){if(!Le){Le=Ae.makeRootRealm();const e=window.document.body.lastChild;if("IFRAME"===e.nodeName&&e.contentWindow&&Le.global instanceof e.contentWindow.Object){const t=e.contentDocument;t.removeChild(t.documentElement),Object.defineProperties(e,{contentWindow:{},contentDocument:{}})}}const e=Le.global.Realm.makeCompartment(),t=e.evaluate;return e.evaluate=function(e,...n){return e=e.replace(/\.import\(/g,`['import'](`),t.call(this,e,...n)},Le.evaluate(Me.toString())({rootRealm:Le,compartment:e}),e}function O(e){return e.split(";").reduce((e,t)=>{const[n,...r]=t.trim().split(/\s+/g);return n&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=r.includes("'none'")?[]:r),e},{})}function R(e,t,n=document.location){e=e.toLowerCase(),t=t.toLowerCase();const r=new URL(t),a=/^(?:(?<scheme>[a-z][a-z0-9+.-]*):\/\/)?(?<host>\[[0-9A-F:.]{2,}\]|(?:[^'\/?#:]|%[0-9A-F]{2})+)(?::(?<port>[^\/?]*))?(?<path>[^?#]*)?$/i;if("*"===e)return!["blob:","data:","filesystem:"].includes(r.protocol);if(e.match(/^[a-z][a-z0-9+.-]*:$/i))return r.protocol===e;if(e.match(a)){const{scheme:t,host:o,port:i,path:l}=e.match(a).groups;if(!r.hostname)return!1;const s=r.protocol.replace(":",""),c=r.hostname,d=r.port,u=r.pathname,m=Oe(u);if(t&&s!==t)return!1;if(!t){const e=n.protocol.replace(":","");if("http"===e&&"http"!==s&&"https"!==s||"http"!==e&&s!==e)return!1}if(o.startsWith("*")){if(!c.endsWith(o.slice(1)))return!1;}else if(c!==o)return!1;if(/^[\d.]+$/.test(o)&&"127.0.0.1"!==o||/^\[.*\]$/.test(o))return!1;if(!i){if(!["",{ftp:21,http:80,https:443,ws:80,wss:443}[s]].includes(d))return!1}else if("*"!==i&&d!==i)return!1;if(l){const e=!l.endsWith("/"),t=Oe(l);if(t.length>m.length)return!1;for(let e of t){e=decodeURIComponent(e);const t=decodeURIComponent(m[0]);if(t!==e)return!1;m.shift()}if(e&&0<m.length)return!1}return!0}if("'self'"===e){const{protocol:e,hostname:t,port:a}=n;return r.protocol===e&&r.hostname===t&&r.port===a}return!1}function w(){return window.document.createElement("web-sandbox")}const x=e=>{if("string"==typeof e&&["","module","application/javascript","application/ecmascript","text/javascript","text/ecmascript"].includes(e.trim().toLowerCase()))return!0;let t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE;if(t||(t=window.WEBSANDBOX_PREVENT_SCRIPT_TYPE=new Map),t.has(e))return t.get(e);t.set(e,!1);const n=document.createElement("script");n.setAttribute("type",e),n.textContent=`${"WEBSANDBOX_PREVENT_SCRIPT_TYPE"}.set(${JSON.stringify(e)}, true)`,document.head.appendChild(n);const r=t.get(e);return document.head.removeChild(n),r};var D=({parent:e})=>{let t;const n=(e,t)=>t.reduce((t,n)=>(t[n]=e[n],t),{});return{...n(Object,["assign","create","defineProperties","defineProperty","entries","freeze","fromEntries","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","is","isExtensible","isFrozen","isSealed","keys","preventExtensions","seal","setPrototypeOf","values"]),...n(Reflect,["apply","construct","deleteProperty","get","has","ownKeys","set"]),from:Array.from,isArray(e){return Array.isArray(e)},isBoolean(e){return"boolean"==typeof e},isNull(e){return null===e},isNumber(e){return"number"==typeof e},isString(e){return"string"==typeof e},isObject(e){return"object"==typeof e&&null!==e},isFunction(e){return"function"==typeof e},hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)},toString(e){return Object.prototype.toString.call(e)},inherits(e,t){const{has:n,get:r,ownKeys:a,set:o,deleteProperty:i,getOwnPropertyDescriptor:l}=Reflect;return new Proxy(e,{get(e,a,o){const i=n(e,a)?[e,a,o]:[t,a];return r(...i)},has(e,r){return n(e,r)||n(t,r)},ownKeys(e){return new Set(...a(e),...a(t))},set(e,r,a,i){const l=n(e,r)?[e,r,a,i]:[t,r,a];return o(...l)},deleteProperty(e,r){return i(n(e,r)?e:t,r)},getOwnPropertyDescriptor(e,r){return l(n(e,r)?e:t,r)}})},mixin(e,t){const{defineProperty:n,getOwnPropertyDescriptor:r,ownKeys:a}=Reflect;a(t).forEach(a=>{const o=r(t,a);n(e,a,o)})},queueMicrotask:"function"==typeof e.queueMicrotask?e.queueMicrotask.bind(e):n=>(t||(t=Promise.resolve())).then(n).catch(t=>e.setTimeout(()=>{throw t},0)),Events:class{constructor(){this.eventTarget=new e.EventTarget}add(e,t){this.eventTarget.addEventListener(e,({detail:e})=>t(e))}dispatch(t,n){this.eventTarget.dispatchEvent(new e.CustomEvent(t,{detail:n}))}}}},I=e=>{const t=e.compartment;return((e,n)=>n.debug?e(n):t.evaluate(e.toString())(n))(D,e)},P=({compartment:e,csp:t,debug:n,documentView:r,namespace:a,parent:o,permissions:i,title:l,top:s,windowView:c},{apply:d,construct:u,defineProperty:m,isFunction:p,isObject:f,toString:b})=>{const E={};E.bridge=E,E.title=l,E.namespace=a,E.permissions=i,E.compartment=e,E.global=e.global,E.evaluate=e.evaluate.bind(e),E.top=s,E.parent=o,E.debug=n,E.windowView=c,E.documentView=r,E.csp=t,E.classRegistry=new Map;let g=null;return E.getCurrentNativeObject=function(){return g},E.setCurrentNativeObject=function(e){g=e},E.SandboxSecurityError=class extends TypeError{constructor(){super(...arguments),this.name="WebSandboxSecurityError"}},E.toNativeObject=function(e){const t=E.toNativeObject.cache.get(e);return t?t:e},E.toNativeObject.cache=new WeakMap,E.toVirtualObject=function(e){if(E.toVirtualObject.cache.has(e))return E.toVirtualObject.cache.get(e);if(e instanceof E.global.Object)return e;let t;if(e===E.windowView)t=E.classRegistry.get(o.Window);else if(e===E.documentView)t=E.classRegistry.get(o.HTMLDocument);else{const n=e.constructor;n&&(t=E.classRegistry.get(n))}if(!t||[E.parent,E.parent.document].includes(e)||e.isConnected&&e instanceof E.parent.Node&&E.parent.document.documentElement.contains(e))throw new E.SandboxSecurityError(`Forbidden: ${b(e)}`);E.setCurrentNativeObject(e);const n=u(t,[]);return E.setCurrentNativeObject(null),E.bindObject(n,e),n},E.toVirtualObject.cache=new WeakMap,E.toLiveVirtuaObject=function(e){return new Proxy(e,["getPrototypeOf","setPrototypeOf","isExtensible","preventExtensions","getOwnPropertyDescriptor","defineProperty","has","get","set","deleteProperty","ownKeys"].reduce((e,t)=>(e[t]=(...e)=>E.toVirtualAny(Reflect[t](...e.map(e=>E.toNativeAny(e)))),e),{}))},E.bindObject=function(e,t){E.toNativeObject.cache.set(e,t),E.toVirtualObject.cache.set(t,e)},E.toNativeFunction=function(e){if(E.toNativeFunction.cache.has(e))return E.toNativeFunction.cache.get(e);const t=e=>e.map(e=>E.toVirtualAny(e)),n=function(...n){const r=this,a=r?E.toVirtualObject(r):void 0,o=t(n),i=d(e,a,o);return E.toNativeAny(i)};return m(n,"name",{value:e.name,configurable:!0}),E.toNativeFunction.cache.set(e,n),n},E.toNativeFunction.cache=new WeakMap,E.toVirtualFunction=function(e){if(E.toVirtualFunction.cache.has(e))return E.toVirtualFunction.cache.get(e);const t=e=>e.map(e=>E.toNativeAny(e)),n=function(...n){const r=this,a=r?E.toNativeObject(r):void 0,o=t(n),i=d(e,a,o);return E.toVirtualAny(i)};return m(n,"name",{value:e.name,configurable:!0}),E.toVirtualFunction.cache.set(e,n),n},E.toVirtualFunction.cache=new WeakMap,E.toVirtualAny=function(e){return f(e)?E.toVirtualObject(e):p(e)?E.toVirtualFunction(e):e},E.toNativeAny=function(e){return f(e)?E.toNativeObject(e):p(e)?E.toNativeFunction(e):e},E},H=({bindObject:e,bridge:t,classRegistry:n,csp:r,debug:a,documentView:o,evaluate:i,getCurrentNativeObject:l,global:s,parent:c,permissions:d,SandboxSecurityError:u,setCurrentNativeObject:m,toLiveVirtuaObject:p,toNativeAny:f,toNativeObject:b,top:E,toVirtualAny:g,windowView:h},{apply:S,construct:y,create:v,CSPValidation:C,defineProperties:N,defineProperty:T,deleteProperty:A,entries:M,Events:L,from:O,get:R,getOwnPropertyDescriptor:w,getPrototypeOf:x,hasOwnProperty:D,inherits:I,isArray:P,isFunction:H,isJavaScriptType:k,isObject:V,keys:j,ownKeys:F,queueMicrotask:W,Sanitizer:_,set:U,setPrototypeOf:B,utils:G})=>{const z={},q={Window:h.constructor,Document:o.constructor};z.prefix=`${h.localName}.`,z.scriptType=`${z.prefix}script`,z.disabled=`${z.prefix}disabled`,z.elementDefined=`${z.prefix}defined`,z.symbols={initialize:Symbol("initialize"),connectedCallback:Symbol("connectedCallback"),disconnectedCallback:Symbol("disconnectedCallback"),attributeChangedCallback:Symbol("attributeChangedCallback")},z.timeoutList=[],z.intervalList=[],z.animationFrameList=[],z.customElements=new Map,z.events=new L,z.call=e=>a?e(t,G):i(e.toString())(t,G),z.callAndWrapError=(e,t,n=[])=>{try{return S(e,t,n)}catch(e){if(V(e)&&e instanceof Object)throw e;throw g(e)}},z.catchNextError=e=>{const{callAndWrapError:t}=z;return new Proxy(e,{deleteProperty(){return t(()=>A(...arguments))},get(e,n,r){const a=t(()=>R(e,n));return H(a)?function(){return t(()=>a.apply(this===r?e:this,arguments))}:a},set(e,n,r){return t(()=>U(e,n,r))}})};const K=new C(r);z.cspValidation=(e,t,n)=>{const{valid:r,message:a}=z.catchNextError(K).validity(e,t);if(!r)if("warn"===n)z.console.error(new u(a));else if("error"===n)throw new u(a);return r},z.console=M(c.console).reduce((e,[t,n])=>(e[t]=a?n:function(){z.callAndWrapError(n,this,arguments)},e),{});let X=null;return z.getCurrentScript=()=>X,z.setCurrentScript=e=>{X=e},z.toVirtualNodeCreater=(e,t,n)=>function(){return z.callAndWrapError(()=>{const r=c.Node.DOCUMENT_FRAGMENT_NODE;let a;const o=b(this),i=O(arguments).map(e=>f(e)),l=o.isConnected;l&&(a={addedNodes:t(i,o).map(e=>e.nodeType===r?[...e.childNodes]:e).flat(1),removedNodes:n(i,o)});const s=o[e](...i);return l&&z.events.dispatch("mutation",a),g(s)})},z.cssStyleSheetFilter=e=>z.callAndWrapError(()=>{const t=e.cssRules;for(let n=t.length-1;0<=n;){const r=t[n];switch(!0){case r instanceof c.CSSImportRule||r instanceof c.CSSMediaRule:e.deleteRule(n);break;case r instanceof c.CSSSupportsRule:z.cssStyleSheetFilter(r);break;case r instanceof c.CSSStyleRule:if(r.selectorText.includes(":host")&&o.contains(e.ownerNode)){const t=r.selectorText.split(",").filter(e=>!e.includes(":host")).join(",");if(0!==t.length){const a=r.cssText.replace(/[^{]*/,t);e.insertRule(a,n+1)}e.deleteRule(n)}else if(r.selectorText.includes(":defined")){const t=r.cssText.replace(":defined",`[${z.elementDefined}]`.replace(".","\\."));e.insertRule(t,n)}}n--}}),z.runScript=({src:e,textContent:t,element:n=null,csp:r=!0})=>{const a=z.catchNextError(E.fetch),o=s.Error;if(r&&e&&!z.cspValidation("script-src",e,"warn"))return Promise.reject();const l=e=>{z.setCurrentScript(n);try{i(e)}catch(e){W(()=>{throw e})}z.setCurrentScript(null)};return e?a(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw o([t.status,t.statusText,e].join(", "));const n=t.headers.get("content-type");if(!n||!/^(text|application)\/(x-)?javascript(;|$)/.test(n))throw o(n);return t.text().then(t=>{const n=/(\/\/# sourceURL=)((https?:\/\/)?([\w-])+\.{1}([a-zA-Z]{2,63})([/\w-]*)*\/?\??([^#\n\r]*)?)/;n.test(t)?t=t.replace(n,(t,n,r)=>`${n}${E.URL(r,e).href}`):t+=`\n//# sourceURL=${e}`,l(t)})}):(t&&l(t),Promise.resolve())},z.sanitizer=z.catchNextError(new _({...["allowElements","blockElements","dropElements","allowAttributes","dropAttributes"].reduce((e,t)=>(e[t]=d[t],e),{}),uponSanitizeElement(e,t){"script"===t.tagName&&k(e.type)?e.setAttribute("type",z.scriptType):c.customElements.get(t.tagName)&&e.parentNode.removeChild()}})),z.configToMap=e=>{const t=e=>{const t=new Map,n=new Set(["arguments","caller","length","name","prototype"]),r=new Set(["constructor"]),a=(e,t)=>[...j(e).filter(e=>!n.has(e)),...j(t).filter(e=>!r.has(e))];return e.forEach(e=>{const n=e.name||e,r=e.value,o=c[n]||{},i=o.prototype||{};P(r)?t.set(n,new Set(r)):t.set(n,new Set(a(o,i)))}),t};return{allowInterfaces:t(e.allowInterfaces),blockInterfaces:t(e.blockInterfaces)}},z.createVirtualClass=(t,n={},r)=>{const a=t.name,o=w(n,z.symbols.initialize),s=i(`(function ${a}(){return constructor.call(this,...arguments)})`,{constructor(){let n=this,a=l();if(a)e(n,a),r&&y(r,arguments,s);else{const r=O(arguments).map(e=>f(e));if(!(this instanceof s))return a=t(...r),g(a);a=y(t,r),V(a)&&e(n,a)}return o&&(m(a),n=o.value.call(n,...arguments)),n}}),c={constructor:{configurable:!0,value:s,writable:!0},[Symbol.toStringTag]:{configurable:!0,value:t.prototype&&t.prototype[Symbol.toStringTag]||a},...F(n).reduce((e,t)=>{const r=w(n,t);return e[t]=r,e},{})};return r?(B(s,r),s.prototype=v(r.prototype,c)):N(s.prototype,c),N(s,{toString:{configurable:!0,value(){return`function ${a}() { [virtual code] }`},writable:!0},prototype:{configurable:!1,enumerable:!1,writable:!1}}),s},z.interfaceGenerator=(e,t)=>{const r=z.configToMap(d),a=(r,o)=>{if(s[r])return s[r];if(!o.has(r))throw new u(`"${r}" is not in the allowed list`);const i=c[r];if(n.has(i))return n.get(i);const d=q[r]||i;if(!V(i)&&!H(i))return i;const m=x(i),f=m.name;f&&!n.get(m)&&a(f,o);const b=e[r]||{},E=t.includes(r);E&&(b[z.symbols.initialize]=function(){return I(this,p(l()))});const g=n.get(m),h=z.createVirtualClass(i,b,g);return z.importPropertys(h,d,[...o.get(r).values()]),n.set(i,h),h};return[...r.allowInterfaces.keys()].reduce((e,t)=>{const n=a(t,r.allowInterfaces);return n&&(e[t]=n),e},{})},z.importPropertys=(e,t,n)=>{const r=(e,t)=>{const n=w(e,t);if(!n){const n=x(e);return n?r(n,t):void 0}return n},a=(e,t,n)=>{if(!D(e,n)){const a=r(t,n);a&&(F(a).forEach(e=>{const t=a[e];a[e]=H(t)?function(){return z.callAndWrapError(t,this,arguments)}:t,a[e]=g(a[e])}),T(e,n,a))}};n.forEach(n=>{a(e,t,n),H(t)&&t.prototype&&a(e.prototype,t.prototype,n)})},z},k=(e,t)=>{const n=e.compartment,r=(e,r)=>r.debug?e(r,t):n.evaluate(e.toString())(r,t),a=r(P,e);return t.assign(a,r(H,a)),a};const V=r(a),j=r(function(){const{getPrototypeOf:e}=Object,{apply:t}=Reflect,n=e=>(n,...r)=>t(e,n,r),r=n(Map.prototype.get),a=n(Set.prototype.has),o=new Map([["EvalError",EvalError],["RangeError",RangeError],["ReferenceError",ReferenceError],["SyntaxError",SyntaxError],["TypeError",TypeError],["URIError",URIError]]),i=new Set([EvalError.prototype,RangeError.prototype,ReferenceError.prototype,SyntaxError.prototype,TypeError.prototype,URIError.prototype,Error.prototype]);return function(n,l){try{return t(n,void 0,l)}catch(t){if(Object(t)!==t)throw t;if(a(i,e(t)))throw t;let n,l,s;try{n=`${t.name}`,l=`${t.message}`,s=`${t.stack||l}`}catch(e){throw new Error("unknown error")}const c=r(o,n)||Error;try{throw new c(l)}catch(e){throw e.stack=s,e}}}}),{assign:F,create:W,freeze:_,defineProperties:U,getOwnPropertyDescriptor:B,getOwnPropertyDescriptors:G,getOwnPropertyNames:z,getPrototypeOf:q,setPrototypeOf:K}=Object,{apply:X,ownKeys:Y}=Reflect,Q=e=>(t,...n)=>X(e,t,n),J=Q(Object.prototype.hasOwnProperty),Z=Q(Array.prototype.filter),$=Q(Array.prototype.pop),ee=Q(Array.prototype.join),te=Q(Array.prototype.concat),ne=Q(RegExp.prototype.test),re=Q(String.prototype.includes),ae=["Infinity","NaN","undefined"],oe=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Array","ArrayBuffer","Boolean","DataView","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Object","RangeError","ReferenceError","Set","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","JSON","Math","Reflect","escape","unescape"],ie=["Date","Error","Promise","Proxy","RegExp","Intl"],le="'use strict'; this",se=`(0, eval)("'use strict'; this")`,ce=()=>{const e=c(),t=s();if(!e&&!t||e&&t)throw new Error("unexpected platform, unable to create Realm");return e||t},de=r(i),ue=r(l),me=/^[a-zA-Z_$][\w$]*$/,pe=new Set(["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"]),fe=r(function(e,t,n={},r=!1){const{unsafeGlobal:a,unsafeEval:o}=e,{freeze:i,getOwnPropertyDescriptor:l}=Object,{get:s,set:c}=Reflect,d=new Proxy(i({}),{get(e,t){throw new TypeError(`unexpected scope handler trap called: ${t+""}`)}});return{__proto__:d,useUnsafeEvaluator:!1,get(e,r){return"symbol"==typeof r?void 0:"eval"===r&&!0===this.useUnsafeEvaluator?(this.useUnsafeEvaluator=!1,o):r in n?s(n,r,t):s(t,r)},set(e,r,a){if(r in n){const e=l(n,r);return"value"in e?c(n,r,a):c(n,r,a,t)}return c(t,r,a)},has(e,o){return!!r||!!("eval"===o||o in n||o in t||o in a)},getPrototypeOf(){return null}}}),be=r(function(e,t){const{callAndWrapError:n}=e,{defineProperties:r}=Object,a={eval(){return n(t,arguments)}}.eval;return r(a,{toString:{value:()=>`function ${"eval"}() { [shim code] }`,writable:!1,enumerable:!1,configurable:!0}}),a}),Ee=r(function(e,t){const{callAndWrapError:n,unsafeFunction:r}=e,{defineProperties:a}=Object,o=function(){return n(t,arguments)};return a(o,{prototype:{value:r.prototype},toString:{value:()=>"function Function() { [shim code] }",writable:!1,enumerable:!1,configurable:!0}}),o}),ge=r(function(e,t){const{create:n,getOwnPropertyDescriptors:r}=Object,{apply:a}=Reflect,o=(e=>(t,...n)=>a(e,t,n))(Array.prototype.reduce);return e={src:`${e.src}`,endowments:n(null,r(e.endowments))},e=o(t,(e,t)=>t.rewrite?t.rewrite(e):e,e),e={src:`${e.src}`,endowments:n(null,r(e.endowments))},e}),he=/(?:<!--|-->)/,Se=/\bimport\s*(?:\(|\/[/*])/,ye=/\beval\s*(?:\(|\/[/*])/,ve={rewrite(e){return E(e.src),e}},Ce=new WeakMap,Ne={initRootRealm:function(e,t,n){const{shims:r,transforms:a,sloppyGlobals:o,configurableGlobals:i}=n,l=te(e.allShims,r),s=u(l,i),{unsafeEval:c}=s,d=c(V)(s,Ne);s.sharedGlobalDescs.Realm={value:d,writable:!0,configurable:!0};const m=M(s,a,o),{safeEvalWhichTakesEndowments:p}=m;for(const r of l)p(r);T(t,m)},initCompartment:function(e,t,n={}){const{transforms:r,sloppyGlobals:a}=n,o=M(e,r,a);T(t,o)},getRealmGlobal:function(e){const{safeGlobal:t}=N(e);return t},realmEvaluate:function(e,t,n={},r={}){const{safeEvalWhichTakesEndowments:a}=N(e);return a(t,n,r)}},Te=function(){const e=eval,t=e(le);return i(),l(),d(t)}(),Ae=a(Te,Ne);var Me=({rootRealm:e,compartment:t})=>{const{seal:n}=Object,{defineProperty:r,getOwnPropertyDescriptor:a,ownKeys:o}=Reflect,i=(e,t)=>{const n=a(e,t);if(n&&n.configurable){if(n.hasOwnProperty("value")){const a=n.value;delete n.value,delete n.writable,n.get=()=>a,n.set=function(n){if(this!==e)r(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0});else throw TypeError(`Cannot assign to read only property '${t}' of object '#<${e}>'`)}}n.configurable=!1,r(e,t,n)}};delete t.global.Realm,o(e.global).map(t=>e.global[t]).filter(e=>e&&"object"==typeof e||"function"==typeof e).forEach(e=>{o(e).forEach(t=>{i(e,t)}),n(e),e.prototype&&(o(e.prototype).forEach(t=>{i(e.prototype,t)}),n(e.prototype))})};let Le;const Oe=e=>e.replace(/^\/|\/$/g,"").split("/"),Re=["connect-src","script-src","style-src"];class we{constructor(e){this.policy={...("string"==typeof e?O(e):e)}}validity(e,t){let n=!0,r="",a=this.policy[e];return(!a&&Re.includes(e)&&(e="default-src",a=this.policy[e]||["*"]),!a)?{valid:n,message:r}:(n=a.length&&a.some(e=>R(e,t)),n||(r=`Refused: ${JSON.stringify(t)}: Because it violates the following Content Security Policy directive: "${e} ${a.join(" ")}"`),{valid:n,message:r})}}var xe=["Array","AudioParamMap","CSSKeyframesRule","CSSNumericArray","CSSRuleList","CSSStyleDeclaration","CSSTransformValue","CSSUnparsedValue","DataTransferItemList","DOMRectList","DOMStringList","DOMTokenList","EventCounts","FileList","FormData","Headers","HTMLAllCollection","HTMLCollection","HTMLFormControlsCollection","HTMLFormElement","HTMLOptionsCollection","HTMLSelectElement","KeyboardLayoutMap","MediaKeyStatusMap","MediaList","MIDIInputMap","MIDIOutputMap","MimeTypeArray","NamedNodeMap","NodeList","Object","Plugin","PluginArray","Promise","RadioNodeList","RTCStatsReport","SourceBufferList","StylePropertyMap","StylePropertyMapReadOnly","StyleSheetList","SVGLengthList","SVGNumberList","SVGPointList","SVGStringList","SVGTransformList","TextTrackCueList","TextTrackList","TouchList","XRAnchorSet","XRInputSourceArray"];const De=(e,t=/^(on)[\w]+/)=>Object.keys("string"==typeof e?window[e].prototype:e).filter(e=>t.test(e));var Ie={allowInterfaces:["AggregateError","AnalyserNode","Animation","AnimationEffect","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","atob","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioDestinationNode","AudioListener","AudioNode","AudioParam","AudioParamMap","AudioProcessingEvent","AudioScheduledSourceNode","BaseAudioContext","BeforeUnloadEvent","Blob","BlobEvent","blur","btoa","ByteLengthQueuingStrategy","cancelAnimationFrame","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","CDATASection","ChannelMergerNode","ChannelSplitterNode","CharacterData","clearInterval","clearTimeout","Clipboard","ClipboardEvent","ClipboardItem","close","closed","Comment","CompositionEvent","CompressionStream","console","ConstantSourceNode","ConvolverNode","CountQueuingStrategy","createImageBitmap","CSS","CSS2Properties","CSSAnimation","CSSConditionRule","CSSFontFaceRule","CSSGroupingRule","CSSImageValue","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSKeywordValue","CSSMathInvert","CSSMathMax","CSSMathMin","CSSMathNegate","CSSMathProduct","CSSMathSum","CSSMathValue","CSSMatrixComponent","CSSMediaRule","CSSNamespaceRule","CSSNumericArray","CSSNumericValue","CSSPageRule","CSSPerspective","CSSPositionValue","CSSPropertyRule","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSSkew","CSSSkewX","CSSSkewY","CSSStyleDeclaration","CSSStyleRule","CSSStyleSheet","CSSStyleValue","CSSSupportsRule","CSSTransformComponent","CSSTransformValue","CSSTransition","CSSTranslate","CSSUnitValue","CSSUnparsedValue","CSSVariableReferenceValue","CustomElementRegistry","customElements","CustomEvent","DataTransfer","DataTransferItem","DataTransferItemList","DelayNode","DeviceMotionEvent","DeviceMotionEventAcceleration","DeviceMotionEventRotationRate","DeviceOrientationEvent","devicePixelRatio",{name:"Document",value:["activeElement","adoptNode","body","characterSet","childElementCount","children","contentType","createAttribute","createAttributeNS","createCDATASection","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createNodeIterator","createProcessingInstruction","createTextNode","createTreeWalker","defaultView","documentElement","documentURI","domain","firstElementChild","getAnimations","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","head","hidden","importNode","lastElementChild",...De("Document"),"querySelector","querySelectorAll","readyState","styleSheets","title","URL","visibilityState"]},{name:"DocumentFragment",value:["append","childElementCount","children","firstElementChild","getElementById","lastElementChild","prepend","querySelector","querySelectorAll","replaceChildren"]},"DocumentTimeline","DOMError","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMStringList","DOMStringMap","DOMTokenList","DragEvent","DynamicsCompressorNode",{name:"Element",value:["after","animate","append","attachShadow","attributes","attributeStyleMap","before","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","computedStyleMap","firstElementChild","getAnimations","getAttribute","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","hasAttribute","hasAttributeNS","hasAttributes","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","namespaceURI","nextElementSibling","outerHTML","part","prefix","previousElementSibling","querySelector","querySelectorAll","remove","removeAttribute","removeAttributeNode","removeAttributeNS","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNode","setAttributeNodeNS","setAttributeNS","shadowRoot","tagName","toggleAttribute",...De("Element",/^(aria|on)[\w]+/)]},"ElementInternals","ErrorEvent",{name:"Event",value:["bubbles","cancelable","currentTarget","defaultPrevented","eventPhase","initEvent","preventDefault","stopImmediatePropagation","stopPropagation","target","timeStamp","type"]},{name:"EventTarget",value:["addEventListener","dispatchEvent","removeEventListener"]},"fetch","focus","FocusEvent","FontFace","FontFaceSetLoadEvent","GainNode","getComputedStyle","HashChangeEvent","HTMLAllCollection","HTMLAnchorElement","HTMLAreaElement","HTMLAudioElement","HTMLQuoteElement",{name:"HTMLBodyElement",value:De("HTMLBodyElement")},"HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLTableCaptionElement","HTMLTableColElement","HTMLDataElement","HTMLDataListElement","HTMLDocument",{name:"HTMLElement",value:["accessKey","autofocus","blur","click","dataset","dir","draggable","focus","hidden","innerText","lang","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth",...De("HTMLElement"),"spellcheck","style","tabIndex","title"]},"HTMLModElement","HTMLDetailsElement","HTMLDialogElement","HTMLDivElement","HTMLDListElement","HTMLFieldSetElement","HTMLFormElement","HTMLHeadingElement","HTMLHeadElement","HTMLHRElement","HTMLHtmlElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMediaElement","HTMLMeterElement","HTMLMenuElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLScriptElement","HTMLSelectElement",{name:"HTMLSlotElement",value:[]},"HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableCellElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTableRowElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","IIRFilterNode","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","innerHeight","innerWidth","InputEvent","Keyboard","KeyboardEvent","KeyboardLayoutMap","KeyframeEffect",{name:"localStorage",value:[]},"Location","location","matchMedia","MediaCapabilities","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaError","MediaKeyMessageEvent","MediaKeys","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaSession","MediaSource","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamTrack","MediaStreamTrackEvent","menubar","MessageChannel","MessageEvent","MessagePort",{name:"MouseEvent",value:["altKey","button","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","relatedTarget","shiftKey","x","y"]},"MutationObserver","MutationRecord","name","NamedNodeMap","NavigationPreloadManager",{name:"Navigator",value:["language","languages","userAgent"]},"navigator",{name:"Node",value:["appendChild","ATTRIBUTE_NODE","baseURI","CDATA_SECTION_NODE","childNodes","cloneNode","COMMENT_NODE","contains","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","ELEMENT_NODE","ENTITY_NODE","ENTITY_REFERENCE_NODE","firstChild","hasChildNodes","insertBefore","isConnected","isEqualNode","lastChild","nextSibling","nodeName","nodeType","nodeValue","normalize","NOTATION_NODE","ownerDocument","parentNode","previousSibling","PROCESSING_INSTRUCTION_NODE","removeChild","replaceChild","textContent","TEXT_NODE"]},"NodeFilter","NodeIterator","NodeList","Notification","OfflineAudioCompletionEvent","OfflineAudioContext","offscreenBuffering","OffscreenCanvas","OffscreenCanvasRenderingContext2D",...De(window),"outerHeight","outerWidth","OverconstrainedError","PageTransitionEvent","pageXOffset","pageYOffset","Path2D","RadioNodeList","requestAnimationFrame","requestIdleCallback","ResizeObserver","ResizeObserverEntry","ResizeObserverSize","setInterval","setTimeout",{name:"ShadowRoot",value:["activeElement","delegatesFocus","getAnimations","host","innerHTML","mode","styleSheets"]},"SourceBuffer","SourceBufferList","speechSynthesis","SpeechSynthesisErrorEvent","SpeechSynthesisEvent","SpeechSynthesisUtterance",{name:"Storage",value:["clear","getItem","key","length","removeItem","setItem"]},"StorageEvent","StorageManager","styleMedia","StylePropertyMap","StylePropertyMapReadOnly","StyleSheet","StyleSheetList","SubmitEvent",{name:"Text",value:["wholeText"]},"TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransitionEvent","TreeWalker","TrustedHTML","TrustedScript","TrustedScriptURL","TrustedTypePolicy","TrustedTypePolicyFactory","trustedTypes",{name:"UIEvent",value:["detail"]},"URL","URLSearchParams","VideoPlaybackQuality","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArrayObject","WheelEvent",{name:"Window",value:[]},"WritableStream","WritableStreamDefaultWriter","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],blockInterfaces:[],allowElements:[],blockElements:[],dropElements:[],allowAttributes:[],dropAttributes:[]};const Pe=Object.seal(/^data-[\-\w.\u00B7-\uFFFF]/),He=Object.seal(/^aria-[\-\w]+$/),ke=Object.seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ve=Object.seal(/^(?:\w+script|data):/i),je=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),{Node:Fe,NodeFilter:We,Text:_e,Comment:Ue,NamedNodeMap:Be,DocumentFragment:Ge,document:ze}=window,qe=Symbol("executeHook"),Ke=Symbol("sanitizeElements"),Xe=Symbol("sanitizeAttributes"),Ye=Symbol("sanitizeShadowDOM"),Qe=Symbol("sanitize"),Je=["base","embed","iframe","meta","noscript","object","param","frame","frameset","noframes"],Ze=["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"],$e=["audio","video","img","source","image","track"],et=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"],tt=ze.createElement("form"),nt=e=>{try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=""}catch(t){e.remove()}}},rt=function(e,t){if(t.removeAttribute(e),"is"===e)try{t.setAttribute(e,"")}catch(e){}},at=e=>{const t=e.match(/^[\r\n\t ]+/),n=t&&t[0],r=ze.implementation.createHTMLDocument(""),{body:a}=r;return a.innerHTML=e,e&&n&&r.body.insertBefore(ze.createTextNode(n),r.body.childNodes[0]||null),a},ot=e=>(e.ownerDocument||e).createNodeIterator(e,We.SHOW_ELEMENT|We.SHOW_COMMENT|We.SHOW_TEXT,()=>We.FILTER_ACCEPT,!1),it=e=>!(e instanceof _e||e instanceof Ue)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof Be&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore),lt=e=>"object"==typeof Fe?e instanceof Fe:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;class st{constructor(e={}){this.config=e}[qe](e,t,n){const r=this.config[e];r&&r.call(this,t,n,this.config)}[Ke](e){const{allowElements:t,dropElements:n}=this.config;if(this[qe]("beforeSanitizeElements",e,null),it(e))return nt(e),!0;if(e.nodeName.match(/[\u0080-\uFFFF]/))return nt(e),!0;const r=e.nodeName.toLowerCase();if(this[qe]("uponSanitizeElement",e,{tagName:r,allowElements:t}),"script"===r&&!e.type)return nt(e),!0;if(("svg"===r||"math"===r)&&0!==e.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length)return nt(e),!0;if(!lt(e.firstElementChild)&&(!lt(e.content)||!lt(e.content.firstElementChild))&&/<[/\w]/g.test(e.innerHTML)&&/<[/\w]/g.test(e.textContent))return nt(e),!0;if(!this.isValidElement(r)){const t=!Je.includes(r)&&n&&!n.includes(r);if(t&&!Ze.includes(r)){const t=e.parentNode,n=e.childNodes,r=n.length;for(let a=r-1;0<=a;--a)t.insertBefore(n[a].cloneNode(!0),e.nextSibling)}return nt(e),!0}return("noscript"===r||"noembed"===r)&&/<\/no(script|embed)/i.test(e.innerHTML)?(nt(e),!0):(this[qe]("afterSanitizeElements",e,null),!1)}isValidAttribute(e,t,n){const{allowAttributes:r,dropAttributes:a}=this.config,o=e.toLowerCase(),i=t.toLowerCase();if(("id"===i||"name"===i)&&(n in ze||n in tt))return!1;if(0===i.indexOf("on")||"script"===o&&"type"===i&&x(n))return!1;if(Pe.test(i));else if(He.test(i));else{if(a&&a.includes(i)||r&&r.length&&!r.includes(i))return!1;if(et.includes(i));else if(ke.test(n.replace(je,"")));else if(("src"===i||"xlink:href"===i||"href"===i)&&"script"!==o&&0===n.indexOf("data:")&&$e.includes(o));else if(!Ve.test(n.replace(je,"")));else if(!n);else return!1}return!0}isValidElement(e){const{allowElements:t,blockElements:n,dropElements:r}=this.config,a=e.toLowerCase();return!Je.includes(a)&&!(r&&r.includes(a)||n&&n.includes(a)||t&&t.length&&!t.includes(a))}[Xe](e){const{allowAttributes:t}=this.config,n=e.nodeName;let r,a,o,i;this[qe]("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(s){const l={name:"",value:"",keep:!0,allowAttributes:t};for(i=s.length;i--;){r=s[i];const{name:t}=r;(a=r.value.trim(),o=t,l.name=o,l.value=a,l.keep=void 0,this[qe]("uponSanitizeAttribute",e,l),a=l.value,!l.keep)&&(this.isValidAttribute(n,o,a)||rt(t,e))}this[qe]("afterSanitizeAttributes",e,null)}}[Ye](e){let t;const n=ot(e);for(this[qe]("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)(this[qe]("uponSanitizeShadowNode",t,null),!this[Ke](t))&&(t.content instanceof Ge&&this[Ye](t.content),this[Xe](t));this[qe]("afterSanitizeShadowDOM",e,null)}[Qe](e,t){e=`${e}`;const n=at(e);if(!n)return t?ze.createDocumentFragment():"";const r=ot(n);for(let n;n=r.nextNode();)this[Ke](n)||(n.content instanceof Ge&&this[Ye](n.content),this[Xe](n));if(t){const e=n.ownerDocument.createDocumentFragment();if(n)for(;n.firstChild;)e.appendChild(n.firstChild);return e}const a=n.innerHTML;return a}sanitize(e){return this[Qe](e,!0)}sanitizeToString(e){return this[Qe](e)}}var ct=({animationFrameList:e,callAndWrapError:t,catchNextError:n,console:r,cspValidation:a,documentView:o,global:i,intervalList:l,namespace:s,parent:c,SandboxSecurityError:d,timeoutList:u,title:m,toNativeAny:p,toNativeObject:f,top:b,toVirtualAny:E,toVirtualObject:g},{defineProperties:h,has:S,isFunction:y,isString:v})=>{let C,N;const T=n(c),A=T.document,M=n(A),L=T.location,O=n(L),R=n(o),w=n(b.URL),x=e=>new w(e,M.baseURI),D=(e,t)=>{const r=!["href","assign","replace"].includes(e),o=new w(M.baseURI),i=n(o);if(r?S(i,e)&&(i[e]=t):i.href=x(t).href,["javascript:","blob:","data:","filesystem:"].includes(i.protocol))throw new d(`Forbidden: "${i.protocol}"`);a("navigate-to",i.href,"error")&&("reload"===e?O[e](t):["assign","replace"].includes(e)?O[e](i.href):O.href=i.href)},I=e=>function(){const t=Array.from(arguments).map(e=>p(e)),n=T[e](...t),r=E(n);return r},P=I("fetch"),H={atob:I("atob"),btoa:I("btoa"),setTimeout(e,...t){if(v(e))throw new d(`The first parameter must be a function`);return u.push(T.setTimeout(e.bind(this),...t))},clearTimeout(e){const t=u.indexOf(e);-1!==t&&(u.splice(t,1),T.clearTimeout(e))},setInterval(e,...t){if(v(e))throw new d(`The first parameter must be a function`);return l.push(T.setInterval(e.bind(this),...t))},clearInterval(e){const t=l.indexOf(e);-1!==t&&(l.splice(t,1),T.clearInterval(e))},fetch(){const e=arguments[0],n=x(v(e)?e:e.url);return a("connect-src",n.href,"error")?P(...arguments).catch(e=>t(()=>{throw e})):Promise.reject()}};y(T.queueMicrotask)&&(H.queueMicrotask=I("queueMicrotask"));const k={console:r,get customElements(){return g(T.customElements)},get localStorage(){return g(T.localStorage)},name:s,get navigator(){return g(T.navigator)},get self(){return i},get window(){return i},get document(){return C},get location(){return N?N:(N=h(g(L),{...["hash","host","hostname","href","origin","password","pathname","port","protocol","search","username"].reduce((e,t)=>(e[t]={enumerable:!0,get(){return O[t]},set(e){D(t,e)}},e),{}),...["assign","reload","replace"].reduce((e,t)=>(e[t]={enumerable:!0,value(e){D(t,e)}},e),{}),...{toString:{enumerable:!0,value(){return this.href}}}}),N)},set location(e){this.location.href=e},close(){if(!i.closed){const{dispatchEvent:t,clearTimeout:n,clearInterval:r,cancelAnimationFrame:a,document:o,Event:s}=i;t(new s("beforeunload")),t(new s("pagehide")),t(new s("unload")),u.forEach(e=>n(e)),l.forEach(e=>r(e)),e.forEach(e=>a(e)),o.removeChild(o.documentElement),i.closed=!0}},getComputedStyle(e,t){const n=f(e),r=T.getComputedStyle(n,t);return g(r)},requestAnimationFrame(t,...n){return e.push(T.requestAnimationFrame(t.bind(this),...n))},cancelAnimationFrame(t){const n=e.indexOf(t);-1!==n&&(e.splice(n,1),T.cancelAnimationFrame(t))},...H};if(C)return C;C=g(o);const V=M.createElement("html"),j=M.createElement("head"),F=M.createElement("title"),W=M.createElement("body");return F.textContent=m,j.appendChild(F),V.appendChild(j),V.appendChild(W),R.appendChild(V),k};const dt={CSSStyleSheet:({catchNextError:e,documentView:t,toNativeObject:n})=>{const r=e(t);return{insertRule(t,a){const o=e(n(this));return t.includes(":host")&&r.contains(o.ownerNode)||o.insertRule(t,a),a},addRule(t,a,o){const i=e(n(this));return t.includes(":host")&&r.contains(i.ownerNode)||i.addRule(t,a,o),-1}}},CustomElementRegistry:({bindObject:e,catchNextError:t,customElements:n,elementDefined:r,global:a,setCurrentNativeObject:o,toNativeObject:i},{create:l,construct:s,setPrototypeOf:c,inherits:d,isArray:u})=>{const m=new Map;return{define(e,t,r={}){if(!e.includes("-")||n.has(e))throw new TypeError(`Illegal constructor`);const o=t.observedAttributes;if(n.set(e,{constructor:t,observedAttributes:u(o)?[...o]:[],options:r}),m.has(e))for(let t;t=m.get(e).shift();)t();a.document.querySelectorAll(r.extends?`${r.extends}[is="${e}"]`:e).forEach(e=>{this.upgrade(e)})},get(e){const t=n.get(e);return t?t.constructor:void 0},upgrade(a){const u=a.getAttribute("is")||a.localName,m=n.get(u);if(m&&!(a instanceof m.constructor)){const n=i(a);o(n);const u=s(m.constructor,[]);if(o(null),c(a,d(u,l(m.constructor.prototype))),t(n).setAttribute(r,""),e(a,n),m.observedAttributes.length&&a.attributeChangedCallback)for(const e of m.observedAttributes){const t=a.getAttribute(e);t&&a.attributeChangedCallback(e,null,t)}t(n).isConnected&&a.connectedCallback&&a.connectedCallback()}},whenDefined(e){return n.get(e)?Promise.resolve():new Promise((t)=>{m.has(e)||m.set(e,[]),m.get(e).push(t)})}}},Document:({catchNextError:e,getCurrentScript:t,global:n,parent:r,SandboxSecurityError:a,sanitizer:o,toNativeAny:i,toVirtualAny:l},{defineProperty:s,from:c,keys:d})=>{const u=new WeakMap,m=r.document,f=e(m),b=r.customElements,E=e(b),g=e=>function(){const t=c(arguments).map(e=>i(e)),n=f[e](...t),r=l(n);return r},h=e=>function(...t){const r={createElement:{name:t[0],options:t[1]},["createElementNS"]:{ns:t[0],name:t[1],options:t[2]}}[e];if(!o.isValidElement(r.name)||E.get(r.name))throw new a(`Forbidden: tag <${r.name} />`);const i=f[e](...t);r.options&&i.setAttribute("is",r.options.is);const s=l(i);return n.customElements.upgrade(s),s},S=g("adoptNode"),y=g("createAttribute"),v=g("createAttributeNS"),C=g("createCDATASection"),N=g("createComment"),T=g("createDocumentFragment"),A=h("createElement"),M=h("createElementNS"),L=g("createEvent"),O=g("createNodeIterator"),R=g("createProcessingInstruction"),w=g("createTextNode"),x=g("createTreeWalker"),D=g("importNode"),I={adoptNode:S,get body(){return this.querySelector("body")},get characterSet(){return f.characterSet},get contentType(){return f.contentType},createAttribute:y,createAttributeNS:v,createCDATASection:C,createComment:N,createDocumentFragment:T,createElement:A,createElementNS:M,createEvent:L,createNodeIterator:O,createProcessingInstruction:R,createTextNode:w,createTreeWalker:x,get currentScript(){return t()},get defaultView(){return n},get documentElement(){return this.querySelector("html")},get documentURI(){return f.documentURI},get domain(){return f.domain},get head(){return this.querySelector("head")},get hidden(){return f.hidden},importNode:D,get readyState(){return f.readyState},get title(){return this.querySelector("title").textContent},set title(e){this.querySelector("title").textContent=e},get URL(){return f.URL},get visibilityState(){return f.visibilityState}};return d(r.Document.prototype).filter(e=>/^on[\w\W]+$/.test(e)).forEach(e=>{s(I,e,{enumerable:!0,configurable:!0,get(){const t=u.get(this);return t&&t[e]||null},set(t){const n=e.replace("on",""),r=this[e];u.has(this)||u.set(this,{}),r&&this.removeEventListener(n,r),this.addEventListener(n,t),u.get(this)[e]=t}})}),I},Element:({callAndWrapError:e,catchNextError:t,customElements:n,events:r,prefix:a,SandboxSecurityError:o,sanitizer:i,toNativeAny:l,toNativeObject:s,toVirtualAny:c,toVirtualNodeCreater:d,toVirtualObject:u,windowView:m},{from:p})=>{const f=t(m),b=(e,n)=>t(s(e))[n],E=(e,r)=>function(){const[d,u]=r(arguments),m=p(arguments).map(e=>l(e)),f=t(s(this)),b=f.getAttribute(d),E=f.nodeName;if(!i.isValidAttribute(E,d,u)||0===d.indexOf(a)||0===u.indexOf(a)||b&&0===b.indexOf(a))throw new o(`Forbidden: attribute [${d}=${JSON.stringify(u)}]`);const g=f[e](...m),h=f.getAttribute("is")||f.localName,S=f.getAttribute(d);return n.get(h)&&n.get(h).observedAttributes.includes(d)&&this.attributeChangedCallback&&(null!==b||null!==S)&&this.attributeChangedCallback(d,b,S),c(g)},g=e=>{const t=f.getBoundingClientRect();return e.x-=t.x,e.y-=t.y,e},h=(e,t)=>{r.dispatch("mutation",{addedNodes:e,removedNodes:t})};return{get className(){return b(this,"className")},set className(e){this.setAttribute("class",e)},set innerHTML(t){e(()=>{const e=s(this),n=e.isConnected,r=i.sanitize(t),a=p(e.childNodes),o=p(r.childNodes);for(;e.firstChild;)e.removeChild(e.firstChild);"template"===e.nodeName.toLowerCase()?e.content.appendChild(r):e.appendChild(r),n&&h(o,a)})},get innerHTML(){return b(this,"innerHTML")},set outerHTML(t){e(()=>{const e=s(this),n=e.isConnected,r=i.sanitize(t),a=p(r.childNodes);e.parentNode.replaceChild(r,e),n&&h(a,[e])})},get outerHTML(){return b(this,"outerHTML")},insertAdjacentHTML(t,n){e(()=>{const e=s(this),r=e.isConnected,a=i.sanitize(n),o=p(a.childNodes);switch(t.toLowerCase()){case"beforebegin":e.parentNode.insertBefore(a,e);break;case"afterbegin":e.insertBefore(a,e.firstChild);break;case"beforeend":e.appendChild(a);break;case"afterend":e.parentNode.insertBefore(a,e.nextElementSibling);break;default:throw new TypeError(`invalid parameter '${t}'`);}r&&h(o,[])})},insertAdjacentElement:d("insertAdjacentElement",e=>[e[1]],e=>e[1].isConnected?[e[1]]:[]),before:d("before",e=>e,e=>e.filter(e=>e.isConnected)),append:d("append",e=>e,e=>e.filter(e=>e.isConnected)),after:d("after",e=>e,e=>e.filter(e=>e.isConnected)),remove:d("remove",()=>[],(e,n)=>n.isConnected?[n]:[]),getBoundingClientRect(){const e=t(s(this)),n=e.getBoundingClientRect();return u(g(n))},getClientRects(){const e=t(s(this)),n=e.getClientRects();for(let e=0;e<n.length;e++)g(n[e]);return u(n)},removeAttribute:E("removeAttribute",e=>[e[0],""]),removeAttributeNS:E("removeAttributeNS",e=>[e[1],""]),removeAttributeNode:E("removeAttributeNode",e=>[e[0].name,""]),setAttribute:E("setAttribute",e=>e),setAttributeNS:E("setAttributeNS",e=>[e[1],e[2]]),setAttributeNode:E("setAttributeNode",e=>[e[0].name,e[0].value]),setAttributeNodeNS:E("setAttributeNodeNS",e=>[e[0].name,e[0].value]),toggleAttribute:E("toggleAttribute",e=>[e[0],""])}},Event:({catchNextError:e,documentView:t,global:n,parent:r,toNativeObject:a,toVirtualObject:o})=>{const i=e(t);return{composedPath(){const t=e(a(this)),l=t.composedPath();return l.filter(e=>e===r||e instanceof r.Node&&i.contains(e)).map(e=>e===r?n:o(e))}}},FocusEvent:({global:e,toNativeObject:t,toVirtualAny:n})=>({get relatedTarget(){const r=t(this).relatedTarget;return r instanceof e.Object?n(r):null}}),HTMLAnchorElement:({catchNextError:e,cspValidation:t,toNativeObject:n})=>({click(){t("navigate-to",this.href,"error")&&e(n(this)).click()}}),HTMLFormElement:({catchNextError:e,cspValidation:t,toNativeObject:n})=>({submit(){t("form-action",this.action,"error")&&t("navigate-to",this.action,"error")&&e(n(this)).submit()}}),HTMLLinkElement:({catchNextError:e,console:t,cspValidation:n,cssStyleSheetFilter:r,disabled:a,global:o,symbols:i,toNativeObject:l})=>({[i.connectedCallback](){const s=e(l(this));s.href&&!n("style-src",s.href,"warn")&&s.setAttribute("type",a);const c=()=>{try{return!!s.sheet.cssRules}catch(t){return!1}},d=()=>{c()?r(s.sheet):(s.setAttribute("type",a),t.error(`Access to stylesheet at '${s.href}' from origin '${o.location.origin}' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.`))};s.addEventListener("load",d),s.addEventListener("error",d)}}),HTMLScriptElement:({catchNextError:e,classRegistry:t,getCurrentNativeObject:n,parent:r,runScript:a,SandboxSecurityError:o,sanitizer:i,scriptType:l,symbols:s,toNativeObject:c,top:d},{isNull:u})=>{const m=e(d.URL),p=l,f=t=>e(c(t)),b=(e,t,n)=>{if(!i.isValidAttribute(e.nodeName,t,n))throw new o(`Forbidden: attribute [${t}=${JSON.stringify(n)}]`)};return{[s.initialize](){return e(n()).setAttribute("type",p),this},get src(){const e=f(this),t=e.getAttribute("src");return u(t)?"":new m(t,this.baseURI).href},set src(e){const t=f(this);b(t,"src",e),t.setAttribute("src",e)},get type(){const e=f(this),t=e.getAttribute("type");return u(t)?"":t},set type(e){const t=f(this);t.setAttribute("type",e)},[s.connectedCallback](){const e=f(this);if(e.getAttribute("type")!==p)return;const n=t.get(r.Event);a({element:this,src:this.src,textContent:this.textContent}).then(()=>{this.dispatchEvent(new n("load"))},()=>{this.dispatchEvent(new n("error"))})}}},HTMLStyleElement:({catchNextError:e,toNativeObject:t,symbols:n,cssStyleSheetFilter:r})=>({[n.connectedCallback](){const a=e(t(this)),o=a.sheet;r(o)}}),MouseEvent:({catchNextError:e,parent:t,toNativeObject:n,windowView:r})=>{const a=e(r),o=e=>e.view!==t;return{get clientX(){const t=e(n(this));if(!o(t)){const e=a.getBoundingClientRect();return t.clientX-e.x}return t.clientX},get clientY(){const t=e(n(this));if(!o(t)){const e=a.getBoundingClientRect();return t.clientY-e.y}return t.clientY},get x(){return this.clientX},get y(){return this.clientY},get pageX(){return a.scrollLeft+this.clientX},get pageY(){return a.scrollTop+this.clientY}}},Node:({catchNextError:e,global:t,parent:n,toNativeObject:r,toVirtualNodeCreater:a})=>{const o=n.document,i=(t,n)=>e(t)[n];return{get ownerDocument(){const e=t.document;return e===this?null:e},get nodeName(){const e=t.document,n=e===this?o:r(this);return i(n,"nodeName")},get nodeType(){const e=t.document,n=e===this?o:r(this);return i(n,"nodeType")},appendChild:a("appendChild",e=>[e[0]],e=>e[0].isConnected?[e[0]]:[]),insertBefore:a("insertBefore",e=>[e[0]],e=>e[0].isConnected?[e[0]]:[]),replaceChild:a("replaceChild",e=>[e[0]],e=>[e[1]]),removeChild:a("removeChild",()=>[],e=>[e[0]])}},ShadowRoot:({callAndWrapError:e,toNativeObject:t,sanitizer:n})=>({get innerHTML(){return e(()=>t(this).innerHTML)},set innerHTML(r){e(()=>{const e=t(this),a=n.sanitize(r);for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(a)})}}),Storage:({callAndWrapError:e,catchNextError:t,getCurrentNativeObject:n,namespace:r,prefix:a,symbols:o,toNativeObject:i,toVirtualObject:l},{inherits:s,isString:c,keys:d})=>{const u=`${a}${r}.`,m=e=>t(i(e)),p=e=>d(e).filter(e=>0===e.indexOf(u));return{[o.initialize](){return e(()=>s(this,new Proxy(n(),{get(e,t){const n=l(e);return c(t)?n.getItem(t):void 0},set(e,t,n){const r=l(e);return!!c(t)&&(r.setItem(t,n),!0)},deleteProperty(e,t){const n=l(e);return!!c(t)&&(n.removeItem(t),!0)}})))},get length(){return e(()=>p(i(this)).length)},key(t){return e(()=>p(i(this)).map(e=>e.replace(u,""))[t])},getItem(e){return m(this).getItem(`${u}${e}`)},setItem(e,t){return m(this).setItem(`${u}${e}`,t)},removeItem(e){return m(this).removeItem(`${u}${e}`)},clear(){const t=m(this);e(()=>p(t).forEach(e=>t.removeItem(e)))}}},Touch:({catchNextError:e,toNativeObject:t,windowView:n})=>{const r=e(n);return{get clientX(){const n=e(t(this)),a=r.getBoundingClientRect();return n.clientX-a.x},get clientY(){const n=e(t(this)),a=r.getBoundingClientRect();return n.clientY-a.y},get pageX(){return r.scrollLeft+this.clientX},get pageY(){return r.scrollTop+this.clientY}}},XMLHttpRequest:({callAndWrapError:e,cspValidation:t,parent:n,toNativeObject:r})=>({open(){return e(()=>{const e=new n.URL(arguments[1],n.document.baseURI);t("connect-src",e.href,"error")&&r(this).open(...arguments)})}})},ut=e=>{const t={};return Object.entries(dt).forEach(([n,r])=>{t[n]=e.call(r)}),e.interfaceGenerator(t,xe)},mt=e=>e.call(ct),pt=e=>{e.call(({classRegistry:e,createVirtualClass:t,getCurrentNativeObject:n,parent:r,symbols:a,toLiveVirtuaObject:o},{inherits:i})=>{[r.Object,r.Array,r.Promise].forEach(r=>{e.set(r,t(r,{[a.initialize](){return i(this,o(n()))}}))})})},ft=({console:e,cspValidation:t,events:n,global:r,symbols:a,toVirtualObject:o,parent:i},{isString:l})=>{i.addEventListener("hashchange",e=>{const t=o(new e.constructor(e.type,{newUrl:e.newURL,oldURL:e.oldURL}));r.dispatchEvent(t)});const s=e=>{t("navigate-to",e.target.href,"warn")||e.preventDefault()},c=e=>{let n=e.target.action;const{submitter:r}=e;if(r){const e=r.getAttribute("formaction");e&&(n=r.formAction)}t("form-action",n,"warn")&&t("navigate-to",n,"warn")||e.preventDefault()},d=e=>{if(l(e))return;const t=o(e),n=e.localName,i=r.customElements.get(1===t.nodeType&&t.getAttribute("is")||t.localName);t[a.connectedCallback]?t[a.connectedCallback]():i&&!(t instanceof i)?r.customElements.upgrade(t):i&&t.connectedCallback&&t.connectedCallback(),"a"===n?e.addEventListener("click",s,!0):"form"===n&&e.addEventListener("submit",c,!0),e.childNodes.forEach(d)},u=e=>{const t=o(e),n=e.localName;t[a.disconnectedCallback]?t[a.disconnectedCallback]():r.customElements.get(t.localName)&&t.disconnectedCallback&&t.disconnectedCallback(),"a"===n?e.removeEventListener("click",s):"form"===n&&e.removeEventListener("submit",c),e.childNodes.forEach(u)};n.add("mutation",({addedNodes:t,removedNodes:n})=>{try{n.forEach(u),t.forEach(d)}catch(t){e.error(t)}})};var bt=e=>{e.csp=e.csp||"default-src 'none'",e.permissions=Ie,e.compartment=e.compartment||L();const t=I(e),{create:n,mixin:r,setPrototypeOf:a}=t;r(t,{CSPValidation:we,isJavaScriptType:x,Sanitizer:st,utils:t});const o=k(e,t),{bindObject:i,classRegistry:l,evaluate:s,global:c,parent:d,runScript:u,windowView:m}=o;return r(c,ut(o)),r(c,mt(o)),pt(o),ft(o,t),i(c,m),a(c,n(l.get(d.Window).prototype)),{global:c,evaluate(){return s(...arguments)},async load({src:e,srcdoc:t}){return u({src:e,textContent:t,csp:!1})},async unload(){c.close()}}};let Et,gt=0;const ht=Symbol("closed"),St=Symbol("virtual-browser");class yt extends HTMLElement{constructor(){if(super(),!Et){const e=document.createElement("style"),t="contain"in this.style?"contain: layout":"transform: scale(1)";e.textContent=`${this.localName} { ${t}; overflow: hidden; }`,document.head.appendChild(e),Et=!0}Reflect.defineProperty(this,"debug",{configurable:!0,get(){return null!==this.getAttribute("debug")},set(e){e?this.setAttribute("debug",""):this.removeAttribute("debug")}})}get name(){return this.getAttribute("name")||""}set name(e){this.setAttribute("name",e)}get src(){const e=this.getAttribute("src");return null===e?"":new URL(e,this.baseURI).href}set src(e){this.setAttribute("src",e)}get srcdoc(){return this.getAttribute("srcdoc")||""}set srcdoc(e){this.setAttribute("srcdoc",e)}get csp(){return this.getAttribute("csp")||""}set csp(e){this.setAttribute("csp",e)}get contentWindow(){return this[St].global}get contentDocument(){return this[St].global.document}evaluate(){return this[St].evaluate(...arguments)}connectedCallback(){if(this[ht])throw TypeError(`The <web-sandbox> has been destroyed`);this[St]=bt({csp:this.csp,debug:this.debug,documentView:this.attachShadow({mode:"closed"}),namespace:this.name||`sandbox${gt}`,parent:window,title:this.name,top:window,windowView:this}),this[St].load({src:this.src,srcdoc:this.srcdoc}).then(()=>{this.dispatchEvent(new Event("load"))},()=>{this.dispatchEvent(new Event("error"))}),gt++}disconnectedCallback(){this[St].unload(),this[ht]=!0}}window.HTMLWebSandboxElement=yt,window.WebSandbox=w,window.customElements.define("web-sandbox",yt),e.HTMLWebSandboxElement=yt,e.WebSandbox=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=web-sandbox.umd.js.map
